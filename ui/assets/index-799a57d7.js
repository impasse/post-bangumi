(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))b(E);new MutationObserver(E=>{for(const A of E)if(A.type==="childList")for(const R of A.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&b(R)}).observe(document,{childList:!0,subtree:!0});function C(E){const A={};return E.integrity&&(A.integrity=E.integrity),E.referrerPolicy&&(A.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?A.credentials="include":E.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function b(E){if(E.ep)return;E.ep=!0;const A=C(E);fetch(E.href,A)}})();function Ti(t,o){const C=Object.create(null),b=t.split(",");for(let E=0;E<b.length;E++)C[b[E]]=!0;return o?E=>!!C[E.toLowerCase()]:E=>!!C[E]}function ki(t){if(he(t)){const o={};for(let C=0;C<t.length;C++){const b=t[C],E=Se(b)?Br(b):ki(b);if(E)for(const A in E)o[A]=E[A]}return o}else{if(Se(t))return t;if(Ce(t))return t}}const Dr=/;(?![^(]*\))/g,Tr=/:([^]+)/,kr=/\/\*.*?\*\//gs;function Br(t){const o={};return t.replace(kr,"").split(Dr).forEach(C=>{if(C){const b=C.split(Tr);b.length>1&&(o[b[0].trim()]=b[1].trim())}}),o}function Bi(t){let o="";if(Se(t))o=t;else if(he(t))for(let C=0;C<t.length;C++){const b=Bi(t[C]);b&&(o+=b+" ")}else if(Ce(t))for(const C in t)t[C]&&(o+=C+" ");return o.trim()}const Or="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pr=Ti(Or);function Hs(t){return!!t||t===""}const pe={},dt=[],Ie=()=>{},Ir=()=>!1,Fr=/^on[^a-z]/,Gt=t=>Fr.test(t),Oi=t=>t.startsWith("onUpdate:"),we=Object.assign,Pi=(t,o)=>{const C=t.indexOf(o);C>-1&&t.splice(C,1)},Hr=Object.prototype.hasOwnProperty,ue=(t,o)=>Hr.call(t,o),he=Array.isArray,wt=t=>Xt(t)==="[object Map]",Ur=t=>Xt(t)==="[object Set]",de=t=>typeof t=="function",Se=t=>typeof t=="string",Ii=t=>typeof t=="symbol",Ce=t=>t!==null&&typeof t=="object",Us=t=>Ce(t)&&de(t.then)&&de(t.catch),$r=Object.prototype.toString,Xt=t=>$r.call(t),Nr=t=>Xt(t).slice(8,-1),Wr=t=>Xt(t)==="[object Object]",Fi=t=>Se(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ut=Ti(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yt=t=>{const o=Object.create(null);return C=>o[C]||(o[C]=t(C))},jr=/-(\w)/g,ft=Yt(t=>t.replace(jr,(o,C)=>C?C.toUpperCase():"")),zr=/\B([A-Z])/g,mt=Yt(t=>t.replace(zr,"-$1").toLowerCase()),$s=Yt(t=>t.charAt(0).toUpperCase()+t.slice(1)),ri=Yt(t=>t?`on${$s(t)}`:""),jt=(t,o)=>!Object.is(t,o),ni=(t,o)=>{for(let C=0;C<t.length;C++)t[C](o)},zt=(t,o,C)=>{Object.defineProperty(t,o,{configurable:!0,enumerable:!1,value:C})},Kr=t=>{const o=parseFloat(t);return isNaN(o)?t:o};let ss;const qr=()=>ss||(ss=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ke;class Vr{constructor(o=!1){this.detached=o,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ke,!o&&ke&&(this.index=(ke.scopes||(ke.scopes=[])).push(this)-1)}get active(){return this._active}run(o){if(this._active){const C=ke;try{return ke=this,o()}finally{ke=C}}}on(){ke=this}off(){ke=this.parent}stop(o){if(this._active){let C,b;for(C=0,b=this.effects.length;C<b;C++)this.effects[C].stop();for(C=0,b=this.cleanups.length;C<b;C++)this.cleanups[C]();if(this.scopes)for(C=0,b=this.scopes.length;C<b;C++)this.scopes[C].stop(!0);if(!this.detached&&this.parent&&!o){const E=this.parent.scopes.pop();E&&E!==this&&(this.parent.scopes[this.index]=E,E.index=this.index)}this.parent=void 0,this._active=!1}}}function Gr(t,o=ke){o&&o.active&&o.effects.push(t)}function Xr(){return ke}const Hi=t=>{const o=new Set(t);return o.w=0,o.n=0,o},Ns=t=>(t.w&Ze)>0,Ws=t=>(t.n&Ze)>0,Yr=({deps:t})=>{if(t.length)for(let o=0;o<t.length;o++)t[o].w|=Ze},Jr=t=>{const{deps:o}=t;if(o.length){let C=0;for(let b=0;b<o.length;b++){const E=o[b];Ns(E)&&!Ws(E)?E.delete(t):o[C++]=E,E.w&=~Ze,E.n&=~Ze}o.length=C}},fi=new WeakMap;let bt=0,Ze=1;const gi=30;let Be;const at=Symbol(""),vi=Symbol("");class Ui{constructor(o,C=null,b){this.fn=o,this.scheduler=C,this.active=!0,this.deps=[],this.parent=void 0,Gr(this,b)}run(){if(!this.active)return this.fn();let o=Be,C=Ye;for(;o;){if(o===this)return;o=o.parent}try{return this.parent=Be,Be=this,Ye=!0,Ze=1<<++bt,bt<=gi?Yr(this):rs(this),this.fn()}finally{bt<=gi&&Jr(this),Ze=1<<--bt,Be=this.parent,Ye=C,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Be===this?this.deferStop=!0:this.active&&(rs(this),this.onStop&&this.onStop(),this.active=!1)}}function rs(t){const{deps:o}=t;if(o.length){for(let C=0;C<o.length;C++)o[C].delete(t);o.length=0}}let Ye=!0;const js=[];function Ct(){js.push(Ye),Ye=!1}function St(){const t=js.pop();Ye=t===void 0?!0:t}function Re(t,o,C){if(Ye&&Be){let b=fi.get(t);b||fi.set(t,b=new Map);let E=b.get(C);E||b.set(C,E=Hi()),zs(E)}}function zs(t,o){let C=!1;bt<=gi?Ws(t)||(t.n|=Ze,C=!Ns(t)):C=!t.has(Be),C&&(t.add(Be),Be.deps.push(t))}function Ke(t,o,C,b,E,A){const R=fi.get(t);if(!R)return;let i=[];if(o==="clear")i=[...R.values()];else if(C==="length"&&he(t)){const r=Number(b);R.forEach((h,u)=>{(u==="length"||u>=r)&&i.push(h)})}else switch(C!==void 0&&i.push(R.get(C)),o){case"add":he(t)?Fi(C)&&i.push(R.get("length")):(i.push(R.get(at)),wt(t)&&i.push(R.get(vi)));break;case"delete":he(t)||(i.push(R.get(at)),wt(t)&&i.push(R.get(vi)));break;case"set":wt(t)&&i.push(R.get(at));break}if(i.length===1)i[0]&&pi(i[0]);else{const r=[];for(const h of i)h&&r.push(...h);pi(Hi(r))}}function pi(t,o){const C=he(t)?t:[...t];for(const b of C)b.computed&&ns(b);for(const b of C)b.computed||ns(b)}function ns(t,o){(t!==Be||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Zr=Ti("__proto__,__v_isRef,__isVue"),Ks=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ii)),Qr=$i(),en=$i(!1,!0),tn=$i(!0),os=sn();function sn(){const t={};return["includes","indexOf","lastIndexOf"].forEach(o=>{t[o]=function(...C){const b=ge(this);for(let A=0,R=this.length;A<R;A++)Re(b,"get",A+"");const E=b[o](...C);return E===-1||E===!1?b[o](...C.map(ge)):E}}),["push","pop","shift","unshift","splice"].forEach(o=>{t[o]=function(...C){Ct();const b=ge(this)[o].apply(this,C);return St(),b}}),t}function rn(t){const o=ge(this);return Re(o,"has",t),o.hasOwnProperty(t)}function $i(t=!1,o=!1){return function(b,E,A){if(E==="__v_isReactive")return!t;if(E==="__v_isReadonly")return t;if(E==="__v_isShallow")return o;if(E==="__v_raw"&&A===(t?o?Sn:Ys:o?Xs:Gs).get(b))return b;const R=he(b);if(!t){if(R&&ue(os,E))return Reflect.get(os,E,A);if(E==="hasOwnProperty")return rn}const i=Reflect.get(b,E,A);return(Ii(E)?Ks.has(E):Zr(E))||(t||Re(b,"get",E),o)?i:Le(i)?R&&Fi(E)?i:i.value:Ce(i)?t?Js(i):ji(i):i}}const nn=qs(),on=qs(!0);function qs(t=!1){return function(C,b,E,A){let R=C[b];if(Lt(R)&&Le(R)&&!Le(E))return!1;if(!t&&(!mi(E)&&!Lt(E)&&(R=ge(R),E=ge(E)),!he(C)&&Le(R)&&!Le(E)))return R.value=E,!0;const i=he(C)&&Fi(b)?Number(b)<C.length:ue(C,b),r=Reflect.set(C,b,E,A);return C===ge(A)&&(i?jt(E,R)&&Ke(C,"set",b,E):Ke(C,"add",b,E)),r}}function an(t,o){const C=ue(t,o);t[o];const b=Reflect.deleteProperty(t,o);return b&&C&&Ke(t,"delete",o,void 0),b}function ln(t,o){const C=Reflect.has(t,o);return(!Ii(o)||!Ks.has(o))&&Re(t,"has",o),C}function hn(t){return Re(t,"iterate",he(t)?"length":at),Reflect.ownKeys(t)}const Vs={get:Qr,set:nn,deleteProperty:an,has:ln,ownKeys:hn},cn={get:tn,set(t,o){return!0},deleteProperty(t,o){return!0}},dn=we({},Vs,{get:en,set:on}),Ni=t=>t,Jt=t=>Reflect.getPrototypeOf(t);function kt(t,o,C=!1,b=!1){t=t.__v_raw;const E=ge(t),A=ge(o);C||(o!==A&&Re(E,"get",o),Re(E,"get",A));const{has:R}=Jt(E),i=b?Ni:C?qi:Ki;if(R.call(E,o))return i(t.get(o));if(R.call(E,A))return i(t.get(A));t!==E&&t.get(o)}function Bt(t,o=!1){const C=this.__v_raw,b=ge(C),E=ge(t);return o||(t!==E&&Re(b,"has",t),Re(b,"has",E)),t===E?C.has(t):C.has(t)||C.has(E)}function Ot(t,o=!1){return t=t.__v_raw,!o&&Re(ge(t),"iterate",at),Reflect.get(t,"size",t)}function as(t){t=ge(t);const o=ge(this);return Jt(o).has.call(o,t)||(o.add(t),Ke(o,"add",t,t)),this}function ls(t,o){o=ge(o);const C=ge(this),{has:b,get:E}=Jt(C);let A=b.call(C,t);A||(t=ge(t),A=b.call(C,t));const R=E.call(C,t);return C.set(t,o),A?jt(o,R)&&Ke(C,"set",t,o):Ke(C,"add",t,o),this}function hs(t){const o=ge(this),{has:C,get:b}=Jt(o);let E=C.call(o,t);E||(t=ge(t),E=C.call(o,t)),b&&b.call(o,t);const A=o.delete(t);return E&&Ke(o,"delete",t,void 0),A}function cs(){const t=ge(this),o=t.size!==0,C=t.clear();return o&&Ke(t,"clear",void 0,void 0),C}function Pt(t,o){return function(b,E){const A=this,R=A.__v_raw,i=ge(R),r=o?Ni:t?qi:Ki;return!t&&Re(i,"iterate",at),R.forEach((h,u)=>b.call(E,r(h),r(u),A))}}function It(t,o,C){return function(...b){const E=this.__v_raw,A=ge(E),R=wt(A),i=t==="entries"||t===Symbol.iterator&&R,r=t==="keys"&&R,h=E[t](...b),u=C?Ni:o?qi:Ki;return!o&&Re(A,"iterate",r?vi:at),{next(){const{value:l,done:g}=h.next();return g?{value:l,done:g}:{value:i?[u(l[0]),u(l[1])]:u(l),done:g}},[Symbol.iterator](){return this}}}}function Ge(t){return function(...o){return t==="delete"?!1:this}}function un(){const t={get(A){return kt(this,A)},get size(){return Ot(this)},has:Bt,add:as,set:ls,delete:hs,clear:cs,forEach:Pt(!1,!1)},o={get(A){return kt(this,A,!1,!0)},get size(){return Ot(this)},has:Bt,add:as,set:ls,delete:hs,clear:cs,forEach:Pt(!1,!0)},C={get(A){return kt(this,A,!0)},get size(){return Ot(this,!0)},has(A){return Bt.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Pt(!0,!1)},b={get(A){return kt(this,A,!0,!0)},get size(){return Ot(this,!0)},has(A){return Bt.call(this,A,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:Pt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(A=>{t[A]=It(A,!1,!1),C[A]=It(A,!0,!1),o[A]=It(A,!1,!0),b[A]=It(A,!0,!0)}),[t,C,o,b]}const[_n,fn,gn,vn]=un();function Wi(t,o){const C=o?t?vn:gn:t?fn:_n;return(b,E,A)=>E==="__v_isReactive"?!t:E==="__v_isReadonly"?t:E==="__v_raw"?b:Reflect.get(ue(C,E)&&E in b?C:b,E,A)}const pn={get:Wi(!1,!1)},mn={get:Wi(!1,!0)},Cn={get:Wi(!0,!1)},Gs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Sn=new WeakMap;function bn(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wn(t){return t.__v_skip||!Object.isExtensible(t)?0:bn(Nr(t))}function ji(t){return Lt(t)?t:zi(t,!1,Vs,pn,Gs)}function yn(t){return zi(t,!1,dn,mn,Xs)}function Js(t){return zi(t,!0,cn,Cn,Ys)}function zi(t,o,C,b,E){if(!Ce(t)||t.__v_raw&&!(o&&t.__v_isReactive))return t;const A=E.get(t);if(A)return A;const R=wn(t);if(R===0)return t;const i=new Proxy(t,R===2?b:C);return E.set(t,i),i}function ut(t){return Lt(t)?ut(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function mi(t){return!!(t&&t.__v_isShallow)}function Zs(t){return ut(t)||Lt(t)}function ge(t){const o=t&&t.__v_raw;return o?ge(o):t}function Qs(t){return zt(t,"__v_skip",!0),t}const Ki=t=>Ce(t)?ji(t):t,qi=t=>Ce(t)?Js(t):t;function En(t){Ye&&Be&&(t=ge(t),zs(t.dep||(t.dep=Hi())))}function Ln(t,o){t=ge(t);const C=t.dep;C&&pi(C)}function Le(t){return!!(t&&t.__v_isRef===!0)}function xn(t){return Le(t)?t.value:t}const Rn={get:(t,o,C)=>xn(Reflect.get(t,o,C)),set:(t,o,C,b)=>{const E=t[o];return Le(E)&&!Le(C)?(E.value=C,!0):Reflect.set(t,o,C,b)}};function er(t){return ut(t)?t:new Proxy(t,Rn)}var tr;class An{constructor(o,C,b,E){this._setter=C,this.dep=void 0,this.__v_isRef=!0,this[tr]=!1,this._dirty=!0,this.effect=new Ui(o,()=>{this._dirty||(this._dirty=!0,Ln(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!E,this.__v_isReadonly=b}get value(){const o=ge(this);return En(o),(o._dirty||!o._cacheable)&&(o._dirty=!1,o._value=o.effect.run()),o._value}set value(o){this._setter(o)}}tr="__v_isReadonly";function Mn(t,o,C=!1){let b,E;const A=de(t);return A?(b=t,E=Ie):(b=t.get,E=t.set),new An(b,E,A||!E,C)}function Je(t,o,C,b){let E;try{E=b?t(...b):t()}catch(A){Zt(A,o,C)}return E}function De(t,o,C,b){if(de(t)){const A=Je(t,o,C,b);return A&&Us(A)&&A.catch(R=>{Zt(R,o,C)}),A}const E=[];for(let A=0;A<t.length;A++)E.push(De(t[A],o,C,b));return E}function Zt(t,o,C,b=!0){const E=o?o.vnode:null;if(o){let A=o.parent;const R=o.proxy,i=C;for(;A;){const h=A.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](t,R,i)===!1)return}A=A.parent}const r=o.appContext.config.errorHandler;if(r){Je(r,null,10,[t,R,i]);return}}Dn(t,C,E,b)}function Dn(t,o,C,b=!0){console.error(t)}let xt=!1,Ci=!1;const be=[];let We=0;const _t=[];let je=null,rt=0;const ir=Promise.resolve();let Vi=null;function Tn(t){const o=Vi||ir;return t?o.then(this?t.bind(this):t):o}function kn(t){let o=We+1,C=be.length;for(;o<C;){const b=o+C>>>1;Rt(be[b])<t?o=b+1:C=b}return o}function Gi(t){(!be.length||!be.includes(t,xt&&t.allowRecurse?We+1:We))&&(t.id==null?be.push(t):be.splice(kn(t.id),0,t),sr())}function sr(){!xt&&!Ci&&(Ci=!0,Vi=ir.then(nr))}function Bn(t){const o=be.indexOf(t);o>We&&be.splice(o,1)}function On(t){he(t)?_t.push(...t):(!je||!je.includes(t,t.allowRecurse?rt+1:rt))&&_t.push(t),sr()}function ds(t,o=xt?We+1:0){for(;o<be.length;o++){const C=be[o];C&&C.pre&&(be.splice(o,1),o--,C())}}function rr(t){if(_t.length){const o=[...new Set(_t)];if(_t.length=0,je){je.push(...o);return}for(je=o,je.sort((C,b)=>Rt(C)-Rt(b)),rt=0;rt<je.length;rt++)je[rt]();je=null,rt=0}}const Rt=t=>t.id==null?1/0:t.id,Pn=(t,o)=>{const C=Rt(t)-Rt(o);if(C===0){if(t.pre&&!o.pre)return-1;if(o.pre&&!t.pre)return 1}return C};function nr(t){Ci=!1,xt=!0,be.sort(Pn);const o=Ie;try{for(We=0;We<be.length;We++){const C=be[We];C&&C.active!==!1&&Je(C,null,14)}}finally{We=0,be.length=0,rr(),xt=!1,Vi=null,(be.length||_t.length)&&nr()}}function In(t,o,...C){if(t.isUnmounted)return;const b=t.vnode.props||pe;let E=C;const A=o.startsWith("update:"),R=A&&o.slice(7);if(R&&R in b){const u=`${R==="modelValue"?"model":R}Modifiers`,{number:l,trim:g}=b[u]||pe;g&&(E=C.map(S=>Se(S)?S.trim():S)),l&&(E=C.map(Kr))}let i,r=b[i=ri(o)]||b[i=ri(ft(o))];!r&&A&&(r=b[i=ri(mt(o))]),r&&De(r,t,6,E);const h=b[i+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[i])return;t.emitted[i]=!0,De(h,t,6,E)}}function or(t,o,C=!1){const b=o.emitsCache,E=b.get(t);if(E!==void 0)return E;const A=t.emits;let R={},i=!1;if(!de(t)){const r=h=>{const u=or(h,o,!0);u&&(i=!0,we(R,u))};!C&&o.mixins.length&&o.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return!A&&!i?(Ce(t)&&b.set(t,null),null):(he(A)?A.forEach(r=>R[r]=null):we(R,A),Ce(t)&&b.set(t,R),R)}function Qt(t,o){return!t||!Gt(o)?!1:(o=o.slice(2).replace(/Once$/,""),ue(t,o[0].toLowerCase()+o.slice(1))||ue(t,mt(o))||ue(t,o))}let Oe=null,ar=null;function Kt(t){const o=Oe;return Oe=t,ar=t&&t.type.__scopeId||null,o}function Fn(t,o=Oe,C){if(!o||t._n)return t;const b=(...E)=>{b._d&&Ss(-1);const A=Kt(o);let R;try{R=t(...E)}finally{Kt(A),b._d&&Ss(1)}return R};return b._n=!0,b._c=!0,b._d=!0,b}function oi(t){const{type:o,vnode:C,proxy:b,withProxy:E,props:A,propsOptions:[R],slots:i,attrs:r,emit:h,render:u,renderCache:l,data:g,setupState:S,ctx:v,inheritAttrs:s}=t;let e,a;const f=Kt(t);try{if(C.shapeFlag&4){const c=E||b;e=Ne(u.call(c,c,l,A,S,g,v)),a=r}else{const c=o;e=Ne(c.length>1?c(A,{attrs:r,slots:i,emit:h}):c(A,null)),a=o.props?r:Hn(r)}}catch(c){Et.length=0,Zt(c,t,1),e=lt(ze)}let n=e;if(a&&s!==!1){const c=Object.keys(a),{shapeFlag:m}=n;c.length&&m&7&&(R&&c.some(Oi)&&(a=Un(a,R)),n=Qe(n,a))}return C.dirs&&(n=Qe(n),n.dirs=n.dirs?n.dirs.concat(C.dirs):C.dirs),C.transition&&(n.transition=C.transition),e=n,Kt(f),e}const Hn=t=>{let o;for(const C in t)(C==="class"||C==="style"||Gt(C))&&((o||(o={}))[C]=t[C]);return o},Un=(t,o)=>{const C={};for(const b in t)(!Oi(b)||!(b.slice(9)in o))&&(C[b]=t[b]);return C};function $n(t,o,C){const{props:b,children:E,component:A}=t,{props:R,children:i,patchFlag:r}=o,h=A.emitsOptions;if(o.dirs||o.transition)return!0;if(C&&r>=0){if(r&1024)return!0;if(r&16)return b?us(b,R,h):!!R;if(r&8){const u=o.dynamicProps;for(let l=0;l<u.length;l++){const g=u[l];if(R[g]!==b[g]&&!Qt(h,g))return!0}}}else return(E||i)&&(!i||!i.$stable)?!0:b===R?!1:b?R?us(b,R,h):!0:!!R;return!1}function us(t,o,C){const b=Object.keys(o);if(b.length!==Object.keys(t).length)return!0;for(let E=0;E<b.length;E++){const A=b[E];if(o[A]!==t[A]&&!Qt(C,A))return!0}return!1}function Nn({vnode:t,parent:o},C){for(;o&&o.subTree===t;)(t=o.vnode).el=C,o=o.parent}const Wn=t=>t.__isSuspense;function jn(t,o){o&&o.pendingBranch?he(t)?o.effects.push(...t):o.effects.push(t):On(t)}function zn(t,o){if(me){let C=me.provides;const b=me.parent&&me.parent.provides;b===C&&(C=me.provides=Object.create(b)),C[t]=o}}function $t(t,o,C=!1){const b=me||Oe;if(b){const E=b.parent==null?b.vnode.appContext&&b.vnode.appContext.provides:b.parent.provides;if(E&&t in E)return E[t];if(arguments.length>1)return C&&de(o)?o.call(b.proxy):o}}const Ft={};function ai(t,o,C){return lr(t,o,C)}function lr(t,o,{immediate:C,deep:b,flush:E,onTrack:A,onTrigger:R}=pe){const i=Xr()===(me==null?void 0:me.scope)?me:null;let r,h=!1,u=!1;if(Le(t)?(r=()=>t.value,h=mi(t)):ut(t)?(r=()=>t,b=!0):he(t)?(u=!0,h=t.some(n=>ut(n)||mi(n)),r=()=>t.map(n=>{if(Le(n))return n.value;if(ut(n))return ct(n);if(de(n))return Je(n,i,2)})):de(t)?o?r=()=>Je(t,i,2):r=()=>{if(!(i&&i.isUnmounted))return l&&l(),De(t,i,3,[g])}:r=Ie,o&&b){const n=r;r=()=>ct(n())}let l,g=n=>{l=a.onStop=()=>{Je(n,i,4)}},S;if(Mt)if(g=Ie,o?C&&De(o,i,3,[r(),u?[]:void 0,g]):r(),E==="sync"){const n=zo();S=n.__watcherHandles||(n.__watcherHandles=[])}else return Ie;let v=u?new Array(t.length).fill(Ft):Ft;const s=()=>{if(a.active)if(o){const n=a.run();(b||h||(u?n.some((c,m)=>jt(c,v[m])):jt(n,v)))&&(l&&l(),De(o,i,3,[n,v===Ft?void 0:u&&v[0]===Ft?[]:v,g]),v=n)}else a.run()};s.allowRecurse=!!o;let e;E==="sync"?e=s:E==="post"?e=()=>xe(s,i&&i.suspense):(s.pre=!0,i&&(s.id=i.uid),e=()=>Gi(s));const a=new Ui(r,e);o?C?s():v=a.run():E==="post"?xe(a.run.bind(a),i&&i.suspense):a.run();const f=()=>{a.stop(),i&&i.scope&&Pi(i.scope.effects,a)};return S&&S.push(f),f}function Kn(t,o,C){const b=this.proxy,E=Se(t)?t.includes(".")?hr(b,t):()=>b[t]:t.bind(b,b);let A;de(o)?A=o:(A=o.handler,C=o);const R=me;gt(this);const i=lr(E,A.bind(b),C);return R?gt(R):ht(),i}function hr(t,o){const C=o.split(".");return()=>{let b=t;for(let E=0;E<C.length&&b;E++)b=b[C[E]];return b}}function ct(t,o){if(!Ce(t)||t.__v_skip||(o=o||new Set,o.has(t)))return t;if(o.add(t),Le(t))ct(t.value,o);else if(he(t))for(let C=0;C<t.length;C++)ct(t[C],o);else if(Ur(t)||wt(t))t.forEach(C=>{ct(C,o)});else if(Wr(t))for(const C in t)ct(t[C],o);return t}function qn(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xi(()=>{t.isMounted=!0}),_r(()=>{t.isUnmounting=!0}),t}const Me=[Function,Array],Vn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Me,onEnter:Me,onAfterEnter:Me,onEnterCancelled:Me,onBeforeLeave:Me,onLeave:Me,onAfterLeave:Me,onLeaveCancelled:Me,onBeforeAppear:Me,onAppear:Me,onAfterAppear:Me,onAppearCancelled:Me},setup(t,{slots:o}){const C=Io(),b=qn();let E;return()=>{const A=o.default&&dr(o.default(),!0);if(!A||!A.length)return;let R=A[0];if(A.length>1){for(const s of A)if(s.type!==ze){R=s;break}}const i=ge(t),{mode:r}=i;if(b.isLeaving)return li(R);const h=_s(R);if(!h)return li(R);const u=Si(h,i,b,C);bi(h,u);const l=C.subTree,g=l&&_s(l);let S=!1;const{getTransitionKey:v}=h.type;if(v){const s=v();E===void 0?E=s:s!==E&&(E=s,S=!0)}if(g&&g.type!==ze&&(!nt(h,g)||S)){const s=Si(g,i,b,C);if(bi(g,s),r==="out-in")return b.isLeaving=!0,s.afterLeave=()=>{b.isLeaving=!1,C.update.active!==!1&&C.update()},li(R);r==="in-out"&&h.type!==ze&&(s.delayLeave=(e,a,f)=>{const n=cr(b,g);n[String(g.key)]=g,e._leaveCb=()=>{a(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=f})}return R}}},Gn=Vn;function cr(t,o){const{leavingVNodes:C}=t;let b=C.get(o.type);return b||(b=Object.create(null),C.set(o.type,b)),b}function Si(t,o,C,b){const{appear:E,mode:A,persisted:R=!1,onBeforeEnter:i,onEnter:r,onAfterEnter:h,onEnterCancelled:u,onBeforeLeave:l,onLeave:g,onAfterLeave:S,onLeaveCancelled:v,onBeforeAppear:s,onAppear:e,onAfterAppear:a,onAppearCancelled:f}=o,n=String(t.key),c=cr(C,t),m=(d,_)=>{d&&De(d,b,9,_)},p=(d,_)=>{const L=_[1];m(d,_),he(d)?d.every(x=>x.length<=1)&&L():d.length<=1&&L()},w={mode:A,persisted:R,beforeEnter(d){let _=i;if(!C.isMounted)if(E)_=s||i;else return;d._leaveCb&&d._leaveCb(!0);const L=c[n];L&&nt(t,L)&&L.el._leaveCb&&L.el._leaveCb(),m(_,[d])},enter(d){let _=r,L=h,x=u;if(!C.isMounted)if(E)_=e||r,L=a||h,x=f||u;else return;let T=!1;const M=d._enterCb=H=>{T||(T=!0,H?m(x,[d]):m(L,[d]),w.delayedLeave&&w.delayedLeave(),d._enterCb=void 0)};_?p(_,[d,M]):M()},leave(d,_){const L=String(t.key);if(d._enterCb&&d._enterCb(!0),C.isUnmounting)return _();m(l,[d]);let x=!1;const T=d._leaveCb=M=>{x||(x=!0,_(),M?m(v,[d]):m(S,[d]),d._leaveCb=void 0,c[L]===t&&delete c[L])};c[L]=t,g?p(g,[d,T]):T()},clone(d){return Si(d,o,C,b)}};return w}function li(t){if(ei(t))return t=Qe(t),t.children=null,t}function _s(t){return ei(t)?t.children?t.children[0]:void 0:t}function bi(t,o){t.shapeFlag&6&&t.component?bi(t.component.subTree,o):t.shapeFlag&128?(t.ssContent.transition=o.clone(t.ssContent),t.ssFallback.transition=o.clone(t.ssFallback)):t.transition=o}function dr(t,o=!1,C){let b=[],E=0;for(let A=0;A<t.length;A++){let R=t[A];const i=C==null?R.key:String(C)+String(R.key!=null?R.key:A);R.type===$e?(R.patchFlag&128&&E++,b=b.concat(dr(R.children,o,i))):(o||R.type!==ze)&&b.push(i!=null?Qe(R,{key:i}):R)}if(E>1)for(let A=0;A<b.length;A++)b[A].patchFlag=-2;return b}const Nt=t=>!!t.type.__asyncLoader,ei=t=>t.type.__isKeepAlive;function Xn(t,o){ur(t,"a",o)}function Yn(t,o){ur(t,"da",o)}function ur(t,o,C=me){const b=t.__wdc||(t.__wdc=()=>{let E=C;for(;E;){if(E.isDeactivated)return;E=E.parent}return t()});if(ti(o,b,C),C){let E=C.parent;for(;E&&E.parent;)ei(E.parent.vnode)&&Jn(b,o,C,E),E=E.parent}}function Jn(t,o,C,b){const E=ti(o,t,b,!0);Yi(()=>{Pi(b[o],E)},C)}function ti(t,o,C=me,b=!1){if(C){const E=C[t]||(C[t]=[]),A=o.__weh||(o.__weh=(...R)=>{if(C.isUnmounted)return;Ct(),gt(C);const i=De(o,C,t,R);return ht(),St(),i});return b?E.unshift(A):E.push(A),A}}const qe=t=>(o,C=me)=>(!Mt||t==="sp")&&ti(t,(...b)=>o(...b),C),Zn=qe("bm"),Xi=qe("m"),Qn=qe("bu"),eo=qe("u"),_r=qe("bum"),Yi=qe("um"),to=qe("sp"),io=qe("rtg"),so=qe("rtc");function ro(t,o=me){ti("ec",t,o)}function tt(t,o,C,b){const E=t.dirs,A=o&&o.dirs;for(let R=0;R<E.length;R++){const i=E[R];A&&(i.oldValue=A[R].value);let r=i.dir[b];r&&(Ct(),De(r,C,8,[t.el,i,t,o]),St())}}const no=Symbol(),wi=t=>t?Er(t)?es(t)||t.proxy:wi(t.parent):null,yt=we(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>wi(t.parent),$root:t=>wi(t.root),$emit:t=>t.emit,$options:t=>Ji(t),$forceUpdate:t=>t.f||(t.f=()=>Gi(t.update)),$nextTick:t=>t.n||(t.n=Tn.bind(t.proxy)),$watch:t=>Kn.bind(t)}),hi=(t,o)=>t!==pe&&!t.__isScriptSetup&&ue(t,o),oo={get({_:t},o){const{ctx:C,setupState:b,data:E,props:A,accessCache:R,type:i,appContext:r}=t;let h;if(o[0]!=="$"){const S=R[o];if(S!==void 0)switch(S){case 1:return b[o];case 2:return E[o];case 4:return C[o];case 3:return A[o]}else{if(hi(b,o))return R[o]=1,b[o];if(E!==pe&&ue(E,o))return R[o]=2,E[o];if((h=t.propsOptions[0])&&ue(h,o))return R[o]=3,A[o];if(C!==pe&&ue(C,o))return R[o]=4,C[o];yi&&(R[o]=0)}}const u=yt[o];let l,g;if(u)return o==="$attrs"&&Re(t,"get",o),u(t);if((l=i.__cssModules)&&(l=l[o]))return l;if(C!==pe&&ue(C,o))return R[o]=4,C[o];if(g=r.config.globalProperties,ue(g,o))return g[o]},set({_:t},o,C){const{data:b,setupState:E,ctx:A}=t;return hi(E,o)?(E[o]=C,!0):b!==pe&&ue(b,o)?(b[o]=C,!0):ue(t.props,o)||o[0]==="$"&&o.slice(1)in t?!1:(A[o]=C,!0)},has({_:{data:t,setupState:o,accessCache:C,ctx:b,appContext:E,propsOptions:A}},R){let i;return!!C[R]||t!==pe&&ue(t,R)||hi(o,R)||(i=A[0])&&ue(i,R)||ue(b,R)||ue(yt,R)||ue(E.config.globalProperties,R)},defineProperty(t,o,C){return C.get!=null?t._.accessCache[o]=0:ue(C,"value")&&this.set(t,o,C.value,null),Reflect.defineProperty(t,o,C)}};let yi=!0;function ao(t){const o=Ji(t),C=t.proxy,b=t.ctx;yi=!1,o.beforeCreate&&fs(o.beforeCreate,t,"bc");const{data:E,computed:A,methods:R,watch:i,provide:r,inject:h,created:u,beforeMount:l,mounted:g,beforeUpdate:S,updated:v,activated:s,deactivated:e,beforeDestroy:a,beforeUnmount:f,destroyed:n,unmounted:c,render:m,renderTracked:p,renderTriggered:w,errorCaptured:d,serverPrefetch:_,expose:L,inheritAttrs:x,components:T,directives:M,filters:H}=o;if(h&&lo(h,b,null,t.appContext.config.unwrapInjectedRef),R)for(const y in R){const D=R[y];de(D)&&(b[y]=D.bind(C))}if(E){const y=E.call(C,C);Ce(y)&&(t.data=ji(y))}if(yi=!0,A)for(const y in A){const D=A[y],B=de(D)?D.bind(C,C):de(D.get)?D.get.bind(C,C):Ie,O=!de(D)&&de(D.set)?D.set.bind(C):Ie,j=Wo({get:B,set:O});Object.defineProperty(b,y,{enumerable:!0,configurable:!0,get:()=>j.value,set:X=>j.value=X})}if(i)for(const y in i)fr(i[y],b,C,y);if(r){const y=de(r)?r.call(C):r;Reflect.ownKeys(y).forEach(D=>{zn(D,y[D])})}u&&fs(u,t,"c");function N(y,D){he(D)?D.forEach(B=>y(B.bind(C))):D&&y(D.bind(C))}if(N(Zn,l),N(Xi,g),N(Qn,S),N(eo,v),N(Xn,s),N(Yn,e),N(ro,d),N(so,p),N(io,w),N(_r,f),N(Yi,c),N(to,_),he(L))if(L.length){const y=t.exposed||(t.exposed={});L.forEach(D=>{Object.defineProperty(y,D,{get:()=>C[D],set:B=>C[D]=B})})}else t.exposed||(t.exposed={});m&&t.render===Ie&&(t.render=m),x!=null&&(t.inheritAttrs=x),T&&(t.components=T),M&&(t.directives=M)}function lo(t,o,C=Ie,b=!1){he(t)&&(t=Ei(t));for(const E in t){const A=t[E];let R;Ce(A)?"default"in A?R=$t(A.from||E,A.default,!0):R=$t(A.from||E):R=$t(A),Le(R)&&b?Object.defineProperty(o,E,{enumerable:!0,configurable:!0,get:()=>R.value,set:i=>R.value=i}):o[E]=R}}function fs(t,o,C){De(he(t)?t.map(b=>b.bind(o.proxy)):t.bind(o.proxy),o,C)}function fr(t,o,C,b){const E=b.includes(".")?hr(C,b):()=>C[b];if(Se(t)){const A=o[t];de(A)&&ai(E,A)}else if(de(t))ai(E,t.bind(C));else if(Ce(t))if(he(t))t.forEach(A=>fr(A,o,C,b));else{const A=de(t.handler)?t.handler.bind(C):o[t.handler];de(A)&&ai(E,A,t)}}function Ji(t){const o=t.type,{mixins:C,extends:b}=o,{mixins:E,optionsCache:A,config:{optionMergeStrategies:R}}=t.appContext,i=A.get(o);let r;return i?r=i:!E.length&&!C&&!b?r=o:(r={},E.length&&E.forEach(h=>qt(r,h,R,!0)),qt(r,o,R)),Ce(o)&&A.set(o,r),r}function qt(t,o,C,b=!1){const{mixins:E,extends:A}=o;A&&qt(t,A,C,!0),E&&E.forEach(R=>qt(t,R,C,!0));for(const R in o)if(!(b&&R==="expose")){const i=ho[R]||C&&C[R];t[R]=i?i(t[R],o[R]):o[R]}return t}const ho={data:gs,props:st,emits:st,methods:st,computed:st,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:st,directives:st,watch:uo,provide:gs,inject:co};function gs(t,o){return o?t?function(){return we(de(t)?t.call(this,this):t,de(o)?o.call(this,this):o)}:o:t}function co(t,o){return st(Ei(t),Ei(o))}function Ei(t){if(he(t)){const o={};for(let C=0;C<t.length;C++)o[t[C]]=t[C];return o}return t}function Ee(t,o){return t?[...new Set([].concat(t,o))]:o}function st(t,o){return t?we(we(Object.create(null),t),o):o}function uo(t,o){if(!t)return o;if(!o)return t;const C=we(Object.create(null),t);for(const b in o)C[b]=Ee(t[b],o[b]);return C}function _o(t,o,C,b=!1){const E={},A={};zt(A,si,1),t.propsDefaults=Object.create(null),gr(t,o,E,A);for(const R in t.propsOptions[0])R in E||(E[R]=void 0);C?t.props=b?E:yn(E):t.type.props?t.props=E:t.props=A,t.attrs=A}function fo(t,o,C,b){const{props:E,attrs:A,vnode:{patchFlag:R}}=t,i=ge(E),[r]=t.propsOptions;let h=!1;if((b||R>0)&&!(R&16)){if(R&8){const u=t.vnode.dynamicProps;for(let l=0;l<u.length;l++){let g=u[l];if(Qt(t.emitsOptions,g))continue;const S=o[g];if(r)if(ue(A,g))S!==A[g]&&(A[g]=S,h=!0);else{const v=ft(g);E[v]=Li(r,i,v,S,t,!1)}else S!==A[g]&&(A[g]=S,h=!0)}}}else{gr(t,o,E,A)&&(h=!0);let u;for(const l in i)(!o||!ue(o,l)&&((u=mt(l))===l||!ue(o,u)))&&(r?C&&(C[l]!==void 0||C[u]!==void 0)&&(E[l]=Li(r,i,l,void 0,t,!0)):delete E[l]);if(A!==i)for(const l in A)(!o||!ue(o,l))&&(delete A[l],h=!0)}h&&Ke(t,"set","$attrs")}function gr(t,o,C,b){const[E,A]=t.propsOptions;let R=!1,i;if(o)for(let r in o){if(Ut(r))continue;const h=o[r];let u;E&&ue(E,u=ft(r))?!A||!A.includes(u)?C[u]=h:(i||(i={}))[u]=h:Qt(t.emitsOptions,r)||(!(r in b)||h!==b[r])&&(b[r]=h,R=!0)}if(A){const r=ge(C),h=i||pe;for(let u=0;u<A.length;u++){const l=A[u];C[l]=Li(E,r,l,h[l],t,!ue(h,l))}}return R}function Li(t,o,C,b,E,A){const R=t[C];if(R!=null){const i=ue(R,"default");if(i&&b===void 0){const r=R.default;if(R.type!==Function&&de(r)){const{propsDefaults:h}=E;C in h?b=h[C]:(gt(E),b=h[C]=r.call(null,o),ht())}else b=r}R[0]&&(A&&!i?b=!1:R[1]&&(b===""||b===mt(C))&&(b=!0))}return b}function vr(t,o,C=!1){const b=o.propsCache,E=b.get(t);if(E)return E;const A=t.props,R={},i=[];let r=!1;if(!de(t)){const u=l=>{r=!0;const[g,S]=vr(l,o,!0);we(R,g),S&&i.push(...S)};!C&&o.mixins.length&&o.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!A&&!r)return Ce(t)&&b.set(t,dt),dt;if(he(A))for(let u=0;u<A.length;u++){const l=ft(A[u]);vs(l)&&(R[l]=pe)}else if(A)for(const u in A){const l=ft(u);if(vs(l)){const g=A[u],S=R[l]=he(g)||de(g)?{type:g}:Object.assign({},g);if(S){const v=Cs(Boolean,S.type),s=Cs(String,S.type);S[0]=v>-1,S[1]=s<0||v<s,(v>-1||ue(S,"default"))&&i.push(l)}}}const h=[R,i];return Ce(t)&&b.set(t,h),h}function vs(t){return t[0]!=="$"}function ps(t){const o=t&&t.toString().match(/^\s*(function|class) (\w+)/);return o?o[2]:t===null?"null":""}function ms(t,o){return ps(t)===ps(o)}function Cs(t,o){return he(o)?o.findIndex(C=>ms(C,t)):de(o)&&ms(o,t)?0:-1}const pr=t=>t[0]==="_"||t==="$stable",Zi=t=>he(t)?t.map(Ne):[Ne(t)],go=(t,o,C)=>{if(o._n)return o;const b=Fn((...E)=>Zi(o(...E)),C);return b._c=!1,b},mr=(t,o,C)=>{const b=t._ctx;for(const E in t){if(pr(E))continue;const A=t[E];if(de(A))o[E]=go(E,A,b);else if(A!=null){const R=Zi(A);o[E]=()=>R}}},Cr=(t,o)=>{const C=Zi(o);t.slots.default=()=>C},vo=(t,o)=>{if(t.vnode.shapeFlag&32){const C=o._;C?(t.slots=ge(o),zt(o,"_",C)):mr(o,t.slots={})}else t.slots={},o&&Cr(t,o);zt(t.slots,si,1)},po=(t,o,C)=>{const{vnode:b,slots:E}=t;let A=!0,R=pe;if(b.shapeFlag&32){const i=o._;i?C&&i===1?A=!1:(we(E,o),!C&&i===1&&delete E._):(A=!o.$stable,mr(o,E)),R=o}else o&&(Cr(t,o),R={default:1});if(A)for(const i in E)!pr(i)&&!(i in R)&&delete E[i]};function Sr(){return{app:null,config:{isNativeTag:Ir,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mo=0;function Co(t,o){return function(b,E=null){de(b)||(b=Object.assign({},b)),E!=null&&!Ce(E)&&(E=null);const A=Sr(),R=new Set;let i=!1;const r=A.app={_uid:mo++,_component:b,_props:E,_container:null,_context:A,_instance:null,version:Ko,get config(){return A.config},set config(h){},use(h,...u){return R.has(h)||(h&&de(h.install)?(R.add(h),h.install(r,...u)):de(h)&&(R.add(h),h(r,...u))),r},mixin(h){return A.mixins.includes(h)||A.mixins.push(h),r},component(h,u){return u?(A.components[h]=u,r):A.components[h]},directive(h,u){return u?(A.directives[h]=u,r):A.directives[h]},mount(h,u,l){if(!i){const g=lt(b,E);return g.appContext=A,u&&o?o(g,h):t(g,h,l),i=!0,r._container=h,h.__vue_app__=r,es(g.component)||g.component.proxy}},unmount(){i&&(t(null,r._container),delete r._container.__vue_app__)},provide(h,u){return A.provides[h]=u,r}};return r}}function xi(t,o,C,b,E=!1){if(he(t)){t.forEach((g,S)=>xi(g,o&&(he(o)?o[S]:o),C,b,E));return}if(Nt(b)&&!E)return;const A=b.shapeFlag&4?es(b.component)||b.component.proxy:b.el,R=E?null:A,{i,r}=t,h=o&&o.r,u=i.refs===pe?i.refs={}:i.refs,l=i.setupState;if(h!=null&&h!==r&&(Se(h)?(u[h]=null,ue(l,h)&&(l[h]=null)):Le(h)&&(h.value=null)),de(r))Je(r,i,12,[R,u]);else{const g=Se(r),S=Le(r);if(g||S){const v=()=>{if(t.f){const s=g?ue(l,r)?l[r]:u[r]:r.value;E?he(s)&&Pi(s,A):he(s)?s.includes(A)||s.push(A):g?(u[r]=[A],ue(l,r)&&(l[r]=u[r])):(r.value=[A],t.k&&(u[t.k]=r.value))}else g?(u[r]=R,ue(l,r)&&(l[r]=R)):S&&(r.value=R,t.k&&(u[t.k]=R))};R?(v.id=-1,xe(v,C)):v()}}}const xe=jn;function So(t){return bo(t)}function bo(t,o){const C=qr();C.__VUE__=!0;const{insert:b,remove:E,patchProp:A,createElement:R,createText:i,createComment:r,setText:h,setElementText:u,parentNode:l,nextSibling:g,setScopeId:S=Ie,insertStaticContent:v}=t,s=(k,F,W,q=null,z=null,ee=null,Z=!1,G=null,J=!!F.dynamicChildren)=>{if(k===F)return;k&&!nt(k,F)&&(q=I(k),X(k,z,ee,!0),k=null),F.patchFlag===-2&&(J=!1,F.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:se}=F;switch(K){case ii:e(k,F,W,q);break;case ze:a(k,F,W,q);break;case ci:k==null&&f(F,W,q,Z);break;case $e:T(k,F,W,q,z,ee,Z,G,J);break;default:se&1?m(k,F,W,q,z,ee,Z,G,J):se&6?M(k,F,W,q,z,ee,Z,G,J):(se&64||se&128)&&K.process(k,F,W,q,z,ee,Z,G,J,V)}ie!=null&&z&&xi(ie,k&&k.ref,ee,F||k,!F)},e=(k,F,W,q)=>{if(k==null)b(F.el=i(F.children),W,q);else{const z=F.el=k.el;F.children!==k.children&&h(z,F.children)}},a=(k,F,W,q)=>{k==null?b(F.el=r(F.children||""),W,q):F.el=k.el},f=(k,F,W,q)=>{[k.el,k.anchor]=v(k.children,F,W,q,k.el,k.anchor)},n=({el:k,anchor:F},W,q)=>{let z;for(;k&&k!==F;)z=g(k),b(k,W,q),k=z;b(F,W,q)},c=({el:k,anchor:F})=>{let W;for(;k&&k!==F;)W=g(k),E(k),k=W;E(F)},m=(k,F,W,q,z,ee,Z,G,J)=>{Z=Z||F.type==="svg",k==null?p(F,W,q,z,ee,Z,G,J):_(k,F,z,ee,Z,G,J)},p=(k,F,W,q,z,ee,Z,G)=>{let J,K;const{type:ie,props:se,shapeFlag:ne,transition:oe,dirs:le}=k;if(J=k.el=R(k.type,ee,se&&se.is,se),ne&8?u(J,k.children):ne&16&&d(k.children,J,null,q,z,ee&&ie!=="foreignObject",Z,G),le&&tt(k,null,q,"created"),w(J,k,k.scopeId,Z,q),se){for(const ae in se)ae!=="value"&&!Ut(ae)&&A(J,ae,null,se[ae],ee,k.children,q,z,P);"value"in se&&A(J,"value",null,se.value),(K=se.onVnodeBeforeMount)&&He(K,q,k)}le&&tt(k,null,q,"beforeMount");const ce=(!z||z&&!z.pendingBranch)&&oe&&!oe.persisted;ce&&oe.beforeEnter(J),b(J,F,W),((K=se&&se.onVnodeMounted)||ce||le)&&xe(()=>{K&&He(K,q,k),ce&&oe.enter(J),le&&tt(k,null,q,"mounted")},z)},w=(k,F,W,q,z)=>{if(W&&S(k,W),q)for(let ee=0;ee<q.length;ee++)S(k,q[ee]);if(z){let ee=z.subTree;if(F===ee){const Z=z.vnode;w(k,Z,Z.scopeId,Z.slotScopeIds,z.parent)}}},d=(k,F,W,q,z,ee,Z,G,J=0)=>{for(let K=J;K<k.length;K++){const ie=k[K]=G?Xe(k[K]):Ne(k[K]);s(null,ie,F,W,q,z,ee,Z,G)}},_=(k,F,W,q,z,ee,Z)=>{const G=F.el=k.el;let{patchFlag:J,dynamicChildren:K,dirs:ie}=F;J|=k.patchFlag&16;const se=k.props||pe,ne=F.props||pe;let oe;W&&it(W,!1),(oe=ne.onVnodeBeforeUpdate)&&He(oe,W,F,k),ie&&tt(F,k,W,"beforeUpdate"),W&&it(W,!0);const le=z&&F.type!=="foreignObject";if(K?L(k.dynamicChildren,K,G,W,q,le,ee):Z||D(k,F,G,null,W,q,le,ee,!1),J>0){if(J&16)x(G,F,se,ne,W,q,z);else if(J&2&&se.class!==ne.class&&A(G,"class",null,ne.class,z),J&4&&A(G,"style",se.style,ne.style,z),J&8){const ce=F.dynamicProps;for(let ae=0;ae<ce.length;ae++){const fe=ce[ae],ye=se[fe],Te=ne[fe];(Te!==ye||fe==="value")&&A(G,fe,ye,Te,z,k.children,W,q,P)}}J&1&&k.children!==F.children&&u(G,F.children)}else!Z&&K==null&&x(G,F,se,ne,W,q,z);((oe=ne.onVnodeUpdated)||ie)&&xe(()=>{oe&&He(oe,W,F,k),ie&&tt(F,k,W,"updated")},q)},L=(k,F,W,q,z,ee,Z)=>{for(let G=0;G<F.length;G++){const J=k[G],K=F[G],ie=J.el&&(J.type===$e||!nt(J,K)||J.shapeFlag&70)?l(J.el):W;s(J,K,ie,null,q,z,ee,Z,!0)}},x=(k,F,W,q,z,ee,Z)=>{if(W!==q){if(W!==pe)for(const G in W)!Ut(G)&&!(G in q)&&A(k,G,W[G],null,Z,F.children,z,ee,P);for(const G in q){if(Ut(G))continue;const J=q[G],K=W[G];J!==K&&G!=="value"&&A(k,G,K,J,Z,F.children,z,ee,P)}"value"in q&&A(k,"value",W.value,q.value)}},T=(k,F,W,q,z,ee,Z,G,J)=>{const K=F.el=k?k.el:i(""),ie=F.anchor=k?k.anchor:i("");let{patchFlag:se,dynamicChildren:ne,slotScopeIds:oe}=F;oe&&(G=G?G.concat(oe):oe),k==null?(b(K,W,q),b(ie,W,q),d(F.children,W,ie,z,ee,Z,G,J)):se>0&&se&64&&ne&&k.dynamicChildren?(L(k.dynamicChildren,ne,W,z,ee,Z,G),(F.key!=null||z&&F===z.subTree)&&br(k,F,!0)):D(k,F,W,ie,z,ee,Z,G,J)},M=(k,F,W,q,z,ee,Z,G,J)=>{F.slotScopeIds=G,k==null?F.shapeFlag&512?z.ctx.activate(F,W,q,Z,J):H(F,W,q,z,ee,Z,J):$(k,F,J)},H=(k,F,W,q,z,ee,Z)=>{const G=k.component=Po(k,q,z);if(ei(k)&&(G.ctx.renderer=V),Fo(G),G.asyncDep){if(z&&z.registerDep(G,N),!k.el){const J=G.subTree=lt(ze);a(null,J,F,W)}return}N(G,k,F,W,z,ee,Z)},$=(k,F,W)=>{const q=F.component=k.component;if($n(k,F,W))if(q.asyncDep&&!q.asyncResolved){y(q,F,W);return}else q.next=F,Bn(q.update),q.update();else F.el=k.el,q.vnode=F},N=(k,F,W,q,z,ee,Z)=>{const G=()=>{if(k.isMounted){let{next:ie,bu:se,u:ne,parent:oe,vnode:le}=k,ce=ie,ae;it(k,!1),ie?(ie.el=le.el,y(k,ie,Z)):ie=le,se&&ni(se),(ae=ie.props&&ie.props.onVnodeBeforeUpdate)&&He(ae,oe,ie,le),it(k,!0);const fe=oi(k),ye=k.subTree;k.subTree=fe,s(ye,fe,l(ye.el),I(ye),k,z,ee),ie.el=fe.el,ce===null&&Nn(k,fe.el),ne&&xe(ne,z),(ae=ie.props&&ie.props.onVnodeUpdated)&&xe(()=>He(ae,oe,ie,le),z)}else{let ie;const{el:se,props:ne}=F,{bm:oe,m:le,parent:ce}=k,ae=Nt(F);if(it(k,!1),oe&&ni(oe),!ae&&(ie=ne&&ne.onVnodeBeforeMount)&&He(ie,ce,F),it(k,!0),se&&_e){const fe=()=>{k.subTree=oi(k),_e(se,k.subTree,k,z,null)};ae?F.type.__asyncLoader().then(()=>!k.isUnmounted&&fe()):fe()}else{const fe=k.subTree=oi(k);s(null,fe,W,q,k,z,ee),F.el=fe.el}if(le&&xe(le,z),!ae&&(ie=ne&&ne.onVnodeMounted)){const fe=F;xe(()=>He(ie,ce,fe),z)}(F.shapeFlag&256||ce&&Nt(ce.vnode)&&ce.vnode.shapeFlag&256)&&k.a&&xe(k.a,z),k.isMounted=!0,F=W=q=null}},J=k.effect=new Ui(G,()=>Gi(K),k.scope),K=k.update=()=>J.run();K.id=k.uid,it(k,!0),K()},y=(k,F,W)=>{F.component=k;const q=k.vnode.props;k.vnode=F,k.next=null,fo(k,F.props,q,W),po(k,F.children,W),Ct(),ds(),St()},D=(k,F,W,q,z,ee,Z,G,J=!1)=>{const K=k&&k.children,ie=k?k.shapeFlag:0,se=F.children,{patchFlag:ne,shapeFlag:oe}=F;if(ne>0){if(ne&128){O(K,se,W,q,z,ee,Z,G,J);return}else if(ne&256){B(K,se,W,q,z,ee,Z,G,J);return}}oe&8?(ie&16&&P(K,z,ee),se!==K&&u(W,se)):ie&16?oe&16?O(K,se,W,q,z,ee,Z,G,J):P(K,z,ee,!0):(ie&8&&u(W,""),oe&16&&d(se,W,q,z,ee,Z,G,J))},B=(k,F,W,q,z,ee,Z,G,J)=>{k=k||dt,F=F||dt;const K=k.length,ie=F.length,se=Math.min(K,ie);let ne;for(ne=0;ne<se;ne++){const oe=F[ne]=J?Xe(F[ne]):Ne(F[ne]);s(k[ne],oe,W,null,z,ee,Z,G,J)}K>ie?P(k,z,ee,!0,!1,se):d(F,W,q,z,ee,Z,G,J,se)},O=(k,F,W,q,z,ee,Z,G,J)=>{let K=0;const ie=F.length;let se=k.length-1,ne=ie-1;for(;K<=se&&K<=ne;){const oe=k[K],le=F[K]=J?Xe(F[K]):Ne(F[K]);if(nt(oe,le))s(oe,le,W,null,z,ee,Z,G,J);else break;K++}for(;K<=se&&K<=ne;){const oe=k[se],le=F[ne]=J?Xe(F[ne]):Ne(F[ne]);if(nt(oe,le))s(oe,le,W,null,z,ee,Z,G,J);else break;se--,ne--}if(K>se){if(K<=ne){const oe=ne+1,le=oe<ie?F[oe].el:q;for(;K<=ne;)s(null,F[K]=J?Xe(F[K]):Ne(F[K]),W,le,z,ee,Z,G,J),K++}}else if(K>ne)for(;K<=se;)X(k[K],z,ee,!0),K++;else{const oe=K,le=K,ce=new Map;for(K=le;K<=ne;K++){const Ae=F[K]=J?Xe(F[K]):Ne(F[K]);Ae.key!=null&&ce.set(Ae.key,K)}let ae,fe=0;const ye=ne-le+1;let Te=!1,et=0;const Ve=new Array(ye);for(K=0;K<ye;K++)Ve[K]=0;for(K=oe;K<=se;K++){const Ae=k[K];if(fe>=ye){X(Ae,z,ee,!0);continue}let Fe;if(Ae.key!=null)Fe=ce.get(Ae.key);else for(ae=le;ae<=ne;ae++)if(Ve[ae-le]===0&&nt(Ae,F[ae])){Fe=ae;break}Fe===void 0?X(Ae,z,ee,!0):(Ve[Fe-le]=K+1,Fe>=et?et=Fe:Te=!0,s(Ae,F[Fe],W,null,z,ee,Z,G,J),fe++)}const ts=Te?wo(Ve):dt;for(ae=ts.length-1,K=ye-1;K>=0;K--){const Ae=le+K,Fe=F[Ae],is=Ae+1<ie?F[Ae+1].el:q;Ve[K]===0?s(null,Fe,W,is,z,ee,Z,G,J):Te&&(ae<0||K!==ts[ae]?j(Fe,W,is,2):ae--)}}},j=(k,F,W,q,z=null)=>{const{el:ee,type:Z,transition:G,children:J,shapeFlag:K}=k;if(K&6){j(k.component.subTree,F,W,q);return}if(K&128){k.suspense.move(F,W,q);return}if(K&64){Z.move(k,F,W,V);return}if(Z===$e){b(ee,F,W);for(let se=0;se<J.length;se++)j(J[se],F,W,q);b(k.anchor,F,W);return}if(Z===ci){n(k,F,W);return}if(q!==2&&K&1&&G)if(q===0)G.beforeEnter(ee),b(ee,F,W),xe(()=>G.enter(ee),z);else{const{leave:se,delayLeave:ne,afterLeave:oe}=G,le=()=>b(ee,F,W),ce=()=>{se(ee,()=>{le(),oe&&oe()})};ne?ne(ee,le,ce):ce()}else b(ee,F,W)},X=(k,F,W,q=!1,z=!1)=>{const{type:ee,props:Z,ref:G,children:J,dynamicChildren:K,shapeFlag:ie,patchFlag:se,dirs:ne}=k;if(G!=null&&xi(G,null,W,k,!0),ie&256){F.ctx.deactivate(k);return}const oe=ie&1&&ne,le=!Nt(k);let ce;if(le&&(ce=Z&&Z.onVnodeBeforeUnmount)&&He(ce,F,k),ie&6)te(k.component,W,q);else{if(ie&128){k.suspense.unmount(W,q);return}oe&&tt(k,null,F,"beforeUnmount"),ie&64?k.type.remove(k,F,W,z,V,q):K&&(ee!==$e||se>0&&se&64)?P(K,F,W,!1,!0):(ee===$e&&se&384||!z&&ie&16)&&P(J,F,W),q&&re(k)}(le&&(ce=Z&&Z.onVnodeUnmounted)||oe)&&xe(()=>{ce&&He(ce,F,k),oe&&tt(k,null,F,"unmounted")},W)},re=k=>{const{type:F,el:W,anchor:q,transition:z}=k;if(F===$e){Y(W,q);return}if(F===ci){c(k);return}const ee=()=>{E(W),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(k.shapeFlag&1&&z&&!z.persisted){const{leave:Z,delayLeave:G}=z,J=()=>Z(W,ee);G?G(k.el,ee,J):J()}else ee()},Y=(k,F)=>{let W;for(;k!==F;)W=g(k),E(k),k=W;E(F)},te=(k,F,W)=>{const{bum:q,scope:z,update:ee,subTree:Z,um:G}=k;q&&ni(q),z.stop(),ee&&(ee.active=!1,X(Z,k,F,W)),G&&xe(G,F),xe(()=>{k.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},P=(k,F,W,q=!1,z=!1,ee=0)=>{for(let Z=ee;Z<k.length;Z++)X(k[Z],F,W,q,z)},I=k=>k.shapeFlag&6?I(k.component.subTree):k.shapeFlag&128?k.suspense.next():g(k.anchor||k.el),U=(k,F,W)=>{k==null?F._vnode&&X(F._vnode,null,null,!0):s(F._vnode||null,k,F,null,null,null,W),ds(),rr(),F._vnode=k},V={p:s,um:X,m:j,r:re,mt:H,mc:d,pc:D,pbc:L,n:I,o:t};let Q,_e;return o&&([Q,_e]=o(V)),{render:U,hydrate:Q,createApp:Co(U,Q)}}function it({effect:t,update:o},C){t.allowRecurse=o.allowRecurse=C}function br(t,o,C=!1){const b=t.children,E=o.children;if(he(b)&&he(E))for(let A=0;A<b.length;A++){const R=b[A];let i=E[A];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=E[A]=Xe(E[A]),i.el=R.el),C||br(R,i)),i.type===ii&&(i.el=R.el)}}function wo(t){const o=t.slice(),C=[0];let b,E,A,R,i;const r=t.length;for(b=0;b<r;b++){const h=t[b];if(h!==0){if(E=C[C.length-1],t[E]<h){o[b]=E,C.push(b);continue}for(A=0,R=C.length-1;A<R;)i=A+R>>1,t[C[i]]<h?A=i+1:R=i;h<t[C[A]]&&(A>0&&(o[b]=C[A-1]),C[A]=b)}}for(A=C.length,R=C[A-1];A-- >0;)C[A]=R,R=o[R];return C}const yo=t=>t.__isTeleport,$e=Symbol(void 0),ii=Symbol(void 0),ze=Symbol(void 0),ci=Symbol(void 0),Et=[];let Pe=null;function Eo(t=!1){Et.push(Pe=t?null:[])}function Lo(){Et.pop(),Pe=Et[Et.length-1]||null}let At=1;function Ss(t){At+=t}function xo(t){return t.dynamicChildren=At>0?Pe||dt:null,Lo(),At>0&&Pe&&Pe.push(t),t}function Ro(t,o,C,b,E,A){return xo(yr(t,o,C,b,E,A,!0))}function Ao(t){return t?t.__v_isVNode===!0:!1}function nt(t,o){return t.type===o.type&&t.key===o.key}const si="__vInternal",wr=({key:t})=>t??null,Wt=({ref:t,ref_key:o,ref_for:C})=>t!=null?Se(t)||Le(t)||de(t)?{i:Oe,r:t,k:o,f:!!C}:t:null;function yr(t,o=null,C=null,b=0,E=null,A=t===$e?0:1,R=!1,i=!1){const r={__v_isVNode:!0,__v_skip:!0,type:t,props:o,key:o&&wr(o),ref:o&&Wt(o),scopeId:ar,slotScopeIds:null,children:C,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:A,patchFlag:b,dynamicProps:E,dynamicChildren:null,appContext:null,ctx:Oe};return i?(Qi(r,C),A&128&&t.normalize(r)):C&&(r.shapeFlag|=Se(C)?8:16),At>0&&!R&&Pe&&(r.patchFlag>0||A&6)&&r.patchFlag!==32&&Pe.push(r),r}const lt=Mo;function Mo(t,o=null,C=null,b=0,E=null,A=!1){if((!t||t===no)&&(t=ze),Ao(t)){const i=Qe(t,o,!0);return C&&Qi(i,C),At>0&&!A&&Pe&&(i.shapeFlag&6?Pe[Pe.indexOf(t)]=i:Pe.push(i)),i.patchFlag|=-2,i}if(No(t)&&(t=t.__vccOpts),o){o=Do(o);let{class:i,style:r}=o;i&&!Se(i)&&(o.class=Bi(i)),Ce(r)&&(Zs(r)&&!he(r)&&(r=we({},r)),o.style=ki(r))}const R=Se(t)?1:Wn(t)?128:yo(t)?64:Ce(t)?4:de(t)?2:0;return yr(t,o,C,b,E,R,A,!0)}function Do(t){return t?Zs(t)||si in t?we({},t):t:null}function Qe(t,o,C=!1){const{props:b,ref:E,patchFlag:A,children:R}=t,i=o?ko(b||{},o):b;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:i,key:i&&wr(i),ref:o&&o.ref?C&&E?he(E)?E.concat(Wt(o)):[E,Wt(o)]:Wt(o):E,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:R,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:o&&t.type!==$e?A===-1?16:A|16:A,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qe(t.ssContent),ssFallback:t.ssFallback&&Qe(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function To(t=" ",o=0){return lt(ii,null,t,o)}function Ne(t){return t==null||typeof t=="boolean"?lt(ze):he(t)?lt($e,null,t.slice()):typeof t=="object"?Xe(t):lt(ii,null,String(t))}function Xe(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qe(t)}function Qi(t,o){let C=0;const{shapeFlag:b}=t;if(o==null)o=null;else if(he(o))C=16;else if(typeof o=="object")if(b&65){const E=o.default;E&&(E._c&&(E._d=!1),Qi(t,E()),E._c&&(E._d=!0));return}else{C=32;const E=o._;!E&&!(si in o)?o._ctx=Oe:E===3&&Oe&&(Oe.slots._===1?o._=1:(o._=2,t.patchFlag|=1024))}else de(o)?(o={default:o,_ctx:Oe},C=32):(o=String(o),b&64?(C=16,o=[To(o)]):C=8);t.children=o,t.shapeFlag|=C}function ko(...t){const o={};for(let C=0;C<t.length;C++){const b=t[C];for(const E in b)if(E==="class")o.class!==b.class&&(o.class=Bi([o.class,b.class]));else if(E==="style")o.style=ki([o.style,b.style]);else if(Gt(E)){const A=o[E],R=b[E];R&&A!==R&&!(he(A)&&A.includes(R))&&(o[E]=A?[].concat(A,R):R)}else E!==""&&(o[E]=b[E])}return o}function He(t,o,C,b=null){De(t,o,7,[C,b])}const Bo=Sr();let Oo=0;function Po(t,o,C){const b=t.type,E=(o?o.appContext:t.appContext)||Bo,A={uid:Oo++,vnode:t,type:b,parent:o,appContext:E,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(E.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vr(b,E),emitsOptions:or(b,E),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:b.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,suspense:C,suspenseId:C?C.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return A.ctx={_:A},A.root=o?o.root:A,A.emit=In.bind(null,A),t.ce&&t.ce(A),A}let me=null;const Io=()=>me||Oe,gt=t=>{me=t,t.scope.on()},ht=()=>{me&&me.scope.off(),me=null};function Er(t){return t.vnode.shapeFlag&4}let Mt=!1;function Fo(t,o=!1){Mt=o;const{props:C,children:b}=t.vnode,E=Er(t);_o(t,C,E,o),vo(t,b);const A=E?Ho(t,o):void 0;return Mt=!1,A}function Ho(t,o){const C=t.type;t.accessCache=Object.create(null),t.proxy=Qs(new Proxy(t.ctx,oo));const{setup:b}=C;if(b){const E=t.setupContext=b.length>1?$o(t):null;gt(t),Ct();const A=Je(b,t,0,[t.props,E]);if(St(),ht(),Us(A)){if(A.then(ht,ht),o)return A.then(R=>{bs(t,R,o)}).catch(R=>{Zt(R,t,0)});t.asyncDep=A}else bs(t,A,o)}else Lr(t,o)}function bs(t,o,C){de(o)?t.type.__ssrInlineRender?t.ssrRender=o:t.render=o:Ce(o)&&(t.setupState=er(o)),Lr(t,C)}let ws;function Lr(t,o,C){const b=t.type;if(!t.render){if(!o&&ws&&!b.render){const E=b.template||Ji(t).template;if(E){const{isCustomElement:A,compilerOptions:R}=t.appContext.config,{delimiters:i,compilerOptions:r}=b,h=we(we({isCustomElement:A,delimiters:i},R),r);b.render=ws(E,h)}}t.render=b.render||Ie}gt(t),Ct(),ao(t),St(),ht()}function Uo(t){return new Proxy(t.attrs,{get(o,C){return Re(t,"get","$attrs"),o[C]}})}function $o(t){const o=b=>{t.exposed=b||{}};let C;return{get attrs(){return C||(C=Uo(t))},slots:t.slots,emit:t.emit,expose:o}}function es(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(er(Qs(t.exposed)),{get(o,C){if(C in o)return o[C];if(C in yt)return yt[C](t)},has(o,C){return C in o||C in yt}}))}function No(t){return de(t)&&"__vccOpts"in t}const Wo=(t,o)=>Mn(t,o,Mt),jo=Symbol(""),zo=()=>$t(jo),Ko="3.2.47",qo="http://www.w3.org/2000/svg",ot=typeof document<"u"?document:null,ys=ot&&ot.createElement("template"),Vo={insert:(t,o,C)=>{o.insertBefore(t,C||null)},remove:t=>{const o=t.parentNode;o&&o.removeChild(t)},createElement:(t,o,C,b)=>{const E=o?ot.createElementNS(qo,t):ot.createElement(t,C?{is:C}:void 0);return t==="select"&&b&&b.multiple!=null&&E.setAttribute("multiple",b.multiple),E},createText:t=>ot.createTextNode(t),createComment:t=>ot.createComment(t),setText:(t,o)=>{t.nodeValue=o},setElementText:(t,o)=>{t.textContent=o},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ot.querySelector(t),setScopeId(t,o){t.setAttribute(o,"")},insertStaticContent(t,o,C,b,E,A){const R=C?C.previousSibling:o.lastChild;if(E&&(E===A||E.nextSibling))for(;o.insertBefore(E.cloneNode(!0),C),!(E===A||!(E=E.nextSibling)););else{ys.innerHTML=b?`<svg>${t}</svg>`:t;const i=ys.content;if(b){const r=i.firstChild;for(;r.firstChild;)i.appendChild(r.firstChild);i.removeChild(r)}o.insertBefore(i,C)}return[R?R.nextSibling:o.firstChild,C?C.previousSibling:o.lastChild]}};function Go(t,o,C){const b=t._vtc;b&&(o=(o?[o,...b]:[...b]).join(" ")),o==null?t.removeAttribute("class"):C?t.setAttribute("class",o):t.className=o}function Xo(t,o,C){const b=t.style,E=Se(C);if(C&&!E){if(o&&!Se(o))for(const A in o)C[A]==null&&Ri(b,A,"");for(const A in C)Ri(b,A,C[A])}else{const A=b.display;E?o!==C&&(b.cssText=C):o&&t.removeAttribute("style"),"_vod"in t&&(b.display=A)}}const Es=/\s*!important$/;function Ri(t,o,C){if(he(C))C.forEach(b=>Ri(t,o,b));else if(C==null&&(C=""),o.startsWith("--"))t.setProperty(o,C);else{const b=Yo(t,o);Es.test(C)?t.setProperty(mt(b),C.replace(Es,""),"important"):t[b]=C}}const Ls=["Webkit","Moz","ms"],di={};function Yo(t,o){const C=di[o];if(C)return C;let b=ft(o);if(b!=="filter"&&b in t)return di[o]=b;b=$s(b);for(let E=0;E<Ls.length;E++){const A=Ls[E]+b;if(A in t)return di[o]=A}return o}const xs="http://www.w3.org/1999/xlink";function Jo(t,o,C,b,E){if(b&&o.startsWith("xlink:"))C==null?t.removeAttributeNS(xs,o.slice(6,o.length)):t.setAttributeNS(xs,o,C);else{const A=Pr(o);C==null||A&&!Hs(C)?t.removeAttribute(o):t.setAttribute(o,A?"":C)}}function Zo(t,o,C,b,E,A,R){if(o==="innerHTML"||o==="textContent"){b&&R(b,E,A),t[o]=C??"";return}if(o==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=C;const r=C??"";(t.value!==r||t.tagName==="OPTION")&&(t.value=r),C==null&&t.removeAttribute(o);return}let i=!1;if(C===""||C==null){const r=typeof t[o];r==="boolean"?C=Hs(C):C==null&&r==="string"?(C="",i=!0):r==="number"&&(C=0,i=!0)}try{t[o]=C}catch{}i&&t.removeAttribute(o)}function Qo(t,o,C,b){t.addEventListener(o,C,b)}function ea(t,o,C,b){t.removeEventListener(o,C,b)}function ta(t,o,C,b,E=null){const A=t._vei||(t._vei={}),R=A[o];if(b&&R)R.value=b;else{const[i,r]=ia(o);if(b){const h=A[o]=na(b,E);Qo(t,i,h,r)}else R&&(ea(t,i,R,r),A[o]=void 0)}}const Rs=/(?:Once|Passive|Capture)$/;function ia(t){let o;if(Rs.test(t)){o={};let b;for(;b=t.match(Rs);)t=t.slice(0,t.length-b[0].length),o[b[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mt(t.slice(2)),o]}let ui=0;const sa=Promise.resolve(),ra=()=>ui||(sa.then(()=>ui=0),ui=Date.now());function na(t,o){const C=b=>{if(!b._vts)b._vts=Date.now();else if(b._vts<=C.attached)return;De(oa(b,C.value),o,5,[b])};return C.value=t,C.attached=ra(),C}function oa(t,o){if(he(o)){const C=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{C.call(t),t._stopped=!0},o.map(b=>E=>!E._stopped&&b&&b(E))}else return o}const As=/^on[a-z]/,aa=(t,o,C,b,E=!1,A,R,i,r)=>{o==="class"?Go(t,b,E):o==="style"?Xo(t,C,b):Gt(o)?Oi(o)||ta(t,o,C,b,R):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):la(t,o,b,E))?Zo(t,o,b,A,R,i,r):(o==="true-value"?t._trueValue=b:o==="false-value"&&(t._falseValue=b),Jo(t,o,b,E))};function la(t,o,C,b){return b?!!(o==="innerHTML"||o==="textContent"||o in t&&As.test(o)&&de(C)):o==="spellcheck"||o==="draggable"||o==="translate"||o==="form"||o==="list"&&t.tagName==="INPUT"||o==="type"&&t.tagName==="TEXTAREA"||As.test(o)&&Se(C)?!1:o in t}const ha={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Gn.props;const ca=we({patchProp:aa},Vo);let Ms;function da(){return Ms||(Ms=So(ca))}const ua=(...t)=>{const o=da().createApp(...t),{mount:C}=o;return o.mount=b=>{const E=_a(b);if(!E)return;const A=o._component;!de(A)&&!A.render&&!A.template&&(A.template=E.innerHTML),E.innerHTML="";const R=C(E,!1,E instanceof SVGElement);return E instanceof Element&&(E.removeAttribute("v-cloak"),E.setAttribute("data-v-app","")),R},o};function _a(t){return Se(t)?document.querySelector(t):t}const _i=10,Ds=(t=0)=>o=>`\x1B[${o+t}m`,Ts=(t=0)=>o=>`\x1B[${38+t};5;${o}m`,ks=(t=0)=>(o,C,b)=>`\x1B[${38+t};2;${o};${C};${b}m`,ve={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(ve.modifier);const fa=Object.keys(ve.color),ga=Object.keys(ve.bgColor);[...fa,...ga];function va(){const t=new Map;for(const[o,C]of Object.entries(ve)){for(const[b,E]of Object.entries(C))ve[b]={open:`\x1B[${E[0]}m`,close:`\x1B[${E[1]}m`},C[b]=ve[b],t.set(E[0],E[1]);Object.defineProperty(ve,o,{value:C,enumerable:!1})}return Object.defineProperty(ve,"codes",{value:t,enumerable:!1}),ve.color.close="\x1B[39m",ve.bgColor.close="\x1B[49m",ve.color.ansi=Ds(),ve.color.ansi256=Ts(),ve.color.ansi16m=ks(),ve.bgColor.ansi=Ds(_i),ve.bgColor.ansi256=Ts(_i),ve.bgColor.ansi16m=ks(_i),Object.defineProperties(ve,{rgbToAnsi256:{value(o,C,b){return o===C&&C===b?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(C/255*5)+Math.round(b/255*5)},enumerable:!1},hexToRgb:{value(o){const C=/[a-f\d]{6}|[a-f\d]{3}/i.exec(o.toString(16));if(!C)return[0,0,0];let[b]=C;b.length===3&&(b=[...b].map(A=>A+A).join(""));const E=Number.parseInt(b,16);return[E>>16&255,E>>8&255,E&255]},enumerable:!1},hexToAnsi256:{value:o=>ve.rgbToAnsi256(...ve.hexToRgb(o)),enumerable:!1},ansi256ToAnsi:{value(o){if(o<8)return 30+o;if(o<16)return 90+(o-8);let C,b,E;if(o>=232)C=((o-232)*10+8)/255,b=C,E=C;else{o-=16;const i=o%36;C=Math.floor(o/36)/5,b=Math.floor(i/6)/5,E=i%6/5}const A=Math.max(C,b,E)*2;if(A===0)return 30;let R=30+(Math.round(E)<<2|Math.round(b)<<1|Math.round(C));return A===2&&(R+=60),R},enumerable:!1},rgbToAnsi:{value:(o,C,b)=>ve.ansi256ToAnsi(ve.rgbToAnsi256(o,C,b)),enumerable:!1},hexToAnsi:{value:o=>ve.ansi256ToAnsi(ve.hexToAnsi256(o)),enumerable:!1}}),ve}const Ue=va(),Ht=(()=>{if(navigator.userAgentData){const t=navigator.userAgentData.brands.find(({brand:o})=>o==="Chromium");if(t&&t.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),Bs=Ht!==0&&{level:Ht,hasBasic:!0,has256:Ht>=2,has16m:Ht>=3},pa={stdout:Bs,stderr:Bs};function ma(t,o,C){let b=t.indexOf(o);if(b===-1)return t;const E=o.length;let A=0,R="";do R+=t.slice(A,b)+o+C,A=b+E,b=t.indexOf(o,A);while(b!==-1);return R+=t.slice(A),R}function Ca(t,o,C,b){let E=0,A="";do{const R=t[b-1]==="\r";A+=t.slice(E,R?b-1:b)+o+(R?`\r
`:`
`)+C,E=b+1,b=t.indexOf(`
`,E)}while(b!==-1);return A+=t.slice(E),A}const{stdout:Os,stderr:Ps}=pa,Ai=Symbol("GENERATOR"),vt=Symbol("STYLER"),Dt=Symbol("IS_EMPTY"),Is=["ansi","ansi","ansi256","ansi16m"],pt=Object.create(null),Sa=(t,o={})=>{if(o.level&&!(Number.isInteger(o.level)&&o.level>=0&&o.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const C=Os?Os.level:0;t.level=o.level===void 0?C:o.level},ba=t=>{const o=(...C)=>C.join(" ");return Sa(o,t),Object.setPrototypeOf(o,Tt.prototype),o};function Tt(t){return ba(t)}Object.setPrototypeOf(Tt.prototype,Function.prototype);for(const[t,o]of Object.entries(Ue))pt[t]={get(){const C=Vt(this,Di(o.open,o.close,this[vt]),this[Dt]);return Object.defineProperty(this,t,{value:C}),C}};pt.visible={get(){const t=Vt(this,this[vt],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const Mi=(t,o,C,...b)=>t==="rgb"?o==="ansi16m"?Ue[C].ansi16m(...b):o==="ansi256"?Ue[C].ansi256(Ue.rgbToAnsi256(...b)):Ue[C].ansi(Ue.rgbToAnsi(...b)):t==="hex"?Mi("rgb",o,C,...Ue.hexToRgb(...b)):Ue[C][t](...b),wa=["rgb","hex","ansi256"];for(const t of wa){pt[t]={get(){const{level:C}=this;return function(...b){const E=Di(Mi(t,Is[C],"color",...b),Ue.color.close,this[vt]);return Vt(this,E,this[Dt])}}};const o="bg"+t[0].toUpperCase()+t.slice(1);pt[o]={get(){const{level:C}=this;return function(...b){const E=Di(Mi(t,Is[C],"bgColor",...b),Ue.bgColor.close,this[vt]);return Vt(this,E,this[Dt])}}}}const ya=Object.defineProperties(()=>{},{...pt,level:{enumerable:!0,get(){return this[Ai].level},set(t){this[Ai].level=t}}}),Di=(t,o,C)=>{let b,E;return C===void 0?(b=t,E=o):(b=C.openAll+t,E=o+C.closeAll),{open:t,close:o,openAll:b,closeAll:E,parent:C}},Vt=(t,o,C)=>{const b=(...E)=>Ea(b,E.length===1?""+E[0]:E.join(" "));return Object.setPrototypeOf(b,ya),b[Ai]=t,b[vt]=o,b[Dt]=C,b},Ea=(t,o)=>{if(t.level<=0||!o)return t[Dt]?"":o;let C=t[vt];if(C===void 0)return o;const{openAll:b,closeAll:E}=C;if(o.includes("\x1B"))for(;C!==void 0;)o=ma(o,C.close,C.open),C=C.parent;const A=o.indexOf(`
`);return A!==-1&&(o=Ca(o,E,b,A)),b+o+E};Object.defineProperties(Tt.prototype,pt);const Fs=Tt();Tt({level:Ps?Ps.level:0});var xr={exports:{}};(function(t,o){(function(C,b){t.exports=b()})(self,function(){return(()=>{var C={4567:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=r(9042),u=r(6114),l=r(9924),g=r(3656),S=r(844),v=r(5596),s=r(9631);class e extends S.Disposable{constructor(f,n){super(),this._terminal=f,this._renderService=n,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let c=0;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);if(this._topBoundaryFocusListener=c=>this._handleBoundaryFocus(c,0),this._bottomBoundaryFocusListener=c=>this._handleBoundaryFocus(c,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new l.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(c=>this._handleResize(c.rows))),this.register(this._terminal.onRender(c=>this._refreshRows(c.start,c.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(c=>this._handleChar(c))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(c=>this._handleTab(c))),this.register(this._terminal.onKey(c=>this._handleKey(c.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,S.toDisposable)(()=>{(0,s.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(f,n){const c=f.target,m=this._rowElements[n===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")===(n===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==m)return;let p,w;if(n===0?(p=c,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(p=this._rowElements.shift(),w=c,this._rowContainer.removeChild(p)),p.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),n===0){const d=this._createAccessibilityTreeNode();this._rowElements.unshift(d),this._rowContainer.insertAdjacentElement("afterbegin",d)}else{const d=this._createAccessibilityTreeNode();this._rowElements.push(d),this._rowContainer.appendChild(d)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(n===0?-1:1),this._rowElements[n===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let n=this._rowContainer.children.length;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const f=document.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_handleTab(f){for(let n=0;n<f;n++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&(0,s.removeElementFromParent)(this._liveRegion)}_handleKey(f){this._clearLiveRegion(),/\p{Control}/u.test(f)||this._charsToConsume.push(f)}_refreshRows(f,n){this._renderRowsDebouncer.refresh(f,n,this._terminal.rows)}_renderRows(f,n){const c=this._terminal.buffer,m=c.lines.length.toString();for(let p=f;p<=n;p++){const w=c.translateBufferLineToString(c.ydisp+p,!0),d=(c.ydisp+p+1).toString(),_=this._rowElements[p];_&&(w.length===0?_.innerText=" ":_.textContent=w,_.setAttribute("aria-posinset",d),_.setAttribute("aria-setsize",m))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}i.AccessibilityManager=e},3614:(R,i)=>{function r(g){return g.replace(/\r?\n/g,"\r")}function h(g,S){return S?"\x1B[200~"+g+"\x1B[201~":g}function u(g,S,v){g=h(g=r(g),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(g,!0),S.value=""}function l(g,S,v){const s=v.getBoundingClientRect(),e=g.clientX-s.left-10,a=g.clientY-s.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${e}px`,S.style.top=`${a}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=r,i.bracketTextForPaste=h,i.copyHandler=function(g,S){g.clipboardData&&g.clipboardData.setData("text/plain",S.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,S,v){g.stopPropagation(),g.clipboardData&&u(g.clipboardData.getData("text/plain"),S,v)},i.paste=u,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(g,S,v,s,e){l(g,S,v),e&&s.rightClickSelect(g),S.value=s.selectionText,S.select()}},7239:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=r(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(u,l,g){this._css.set(u,l,g)}getCss(u,l){return this._css.get(u,l)}setColor(u,l,g){this._color.set(u,l,g)}getColor(u,l){return this._color.get(u,l)}clear(){this._color.clear(),this._css.clear()}}},9631:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(...r){var h;for(const u of r)(h=u==null?void 0:u.parentElement)===null||h===void 0||h.removeChild(u)}},3656:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(r,h,u,l){r.addEventListener(h,u,l);let g=!1;return{dispose:()=>{g||(g=!0,r.removeEventListener(h,u,l))}}}},6465:function(R,i,r){var h=this&&this.__decorate||function(e,a,f,n){var c,m=arguments.length,p=m<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,f):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(e,a,f,n);else for(var w=e.length-1;w>=0;w--)(c=e[w])&&(p=(m<3?c(p):m>3?c(a,f,p):c(a,f))||p);return m>3&&p&&Object.defineProperty(a,f,p),p},u=this&&this.__param||function(e,a){return function(f,n){a(f,n,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const l=r(2585),g=r(8460),S=r(844),v=r(3656);let s=class extends S.Disposable{constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const a=this._linkProviders.indexOf(e);a!==-1&&this._linkProviders.splice(a,1)}}}attachToDom(e,a,f){this._element=e,this._mouseService=a,this._renderService=f,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const a=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const f=e.composedPath();for(let n=0;n<f.length;n++){const c=f[n];if(c.classList.contains("xterm"))break;if(c.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,a){var f,n;this._activeProviderReplies&&a||((f=this._activeProviderReplies)===null||f===void 0||f.forEach(m=>{m==null||m.forEach(p=>{p.link.dispose&&p.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let c=!1;for(const[m,p]of this._linkProviders.entries())a?!((n=this._activeProviderReplies)===null||n===void 0)&&n.get(m)&&(c=this._checkLinkProviderResult(m,e,c)):p.provideLinks(e.y,w=>{var d,_;if(this._isMouseOut)return;const L=w==null?void 0:w.map(x=>({link:x}));(d=this._activeProviderReplies)===null||d===void 0||d.set(m,L),c=this._checkLinkProviderResult(m,e,c),((_=this._activeProviderReplies)===null||_===void 0?void 0:_.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,a){const f=new Set;for(let n=0;n<a.size;n++){const c=a.get(n);if(c)for(let m=0;m<c.length;m++){const p=c[m],w=p.link.range.start.y<e?0:p.link.range.start.x,d=p.link.range.end.y>e?this._bufferService.cols:p.link.range.end.x;for(let _=w;_<=d;_++){if(f.has(_)){c.splice(m--,1);break}f.add(_)}}}}_checkLinkProviderResult(e,a,f){var n;if(!this._activeProviderReplies)return f;const c=this._activeProviderReplies.get(e);let m=!1;for(let p=0;p<e;p++)this._activeProviderReplies.has(p)&&!this._activeProviderReplies.get(p)||(m=!0);if(!m&&c){const p=c.find(w=>this._linkAtPosition(w.link,a));p&&(f=!0,this._handleNewLink(p))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(let p=0;p<this._activeProviderReplies.size;p++){const w=(n=this._activeProviderReplies.get(p))===null||n===void 0?void 0:n.find(d=>this._linkAtPosition(d.link,a));if(w){f=!0,this._handleNewLink(w);break}}return f}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const a=this._positionFromMouseEvent(e,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,a){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!a||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(e.link,a)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var f,n;return(n=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||n===void 0?void 0:n.decorations.pointerCursor},set:f=>{var n,c;!((n=this._currentLink)===null||n===void 0)&&n.state&&this._currentLink.state.decorations.pointerCursor!==f&&(this._currentLink.state.decorations.pointerCursor=f,this._currentLink.state.isHovered&&((c=this._element)===null||c===void 0||c.classList.toggle("xterm-cursor-pointer",f)))}},underline:{get:()=>{var f,n;return(n=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||n===void 0?void 0:n.decorations.underline},set:f=>{var n,c,m;!((n=this._currentLink)===null||n===void 0)&&n.state&&((m=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||m===void 0?void 0:m.decorations.underline)!==f&&(this._currentLink.state.decorations.underline=f,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,f))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(f=>{const n=f.start===0?0:f.start+1+this._bufferService.buffer.ydisp,c=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(n,f.end+1+this._bufferService.buffer.ydisp),c&&this._element){const m=this._positionFromMouseEvent(c,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(e,a,f){var n;!((n=this._currentLink)===null||n===void 0)&&n.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(f,a.text)}_fireUnderlineEvent(e,a){const f=e.range,n=this._bufferService.buffer.ydisp,c=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-n-1,f.end.x,f.end.y-n-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(c)}_linkLeave(e,a,f){var n;!((n=this._currentLink)===null||n===void 0)&&n.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(f,a.text)}_linkAtPosition(e,a){const f=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,c=a.y*this._bufferService.cols+a.x;return f<=c&&c<=n}_positionFromMouseEvent(e,a,f){const n=f.getCoords(e,a,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,a,f,n,c){return{x1:e,y1:a,x2:f,y2:n,cols:this._bufferService.cols,fg:c}}};s=h([u(0,l.IBufferService)],s),i.Linkifier2=s},9042:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(R,i,r){var h=this&&this.__decorate||function(s,e,a,f){var n,c=arguments.length,m=c<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,a):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,e,a,f);else for(var p=s.length-1;p>=0;p--)(n=s[p])&&(m=(c<3?n(m):c>3?n(e,a,m):n(e,a))||m);return c>3&&m&&Object.defineProperty(e,a,m),m},u=this&&this.__param||function(s,e){return function(a,f){e(a,f,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const l=r(511),g=r(2585);let S=class{constructor(s,e,a){this._bufferService=s,this._optionsService=e,this._oscLinkService=a}provideLinks(s,e){var a;const f=this._bufferService.buffer.lines.get(s-1);if(!f)return void e(void 0);const n=[],c=this._optionsService.rawOptions.linkHandler,m=new l.CellData,p=f.getTrimmedLength();let w=-1,d=-1,_=!1;for(let L=0;L<p;L++)if(d!==-1||f.hasContent(L)){if(f.loadCell(L,m),m.hasExtendedAttrs()&&m.extended.urlId){if(d===-1){d=L,w=m.extended.urlId;continue}_=m.extended.urlId!==w}else d!==-1&&(_=!0);if(_||d!==-1&&L===p-1){const x=(a=this._oscLinkService.getLinkData(w))===null||a===void 0?void 0:a.uri;if(x){const T={start:{x:d+1,y:s},end:{x:L+(_||L!==p-1?0:1),y:s}};let M=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const H=new URL(x);["http:","https:"].includes(H.protocol)||(M=!0)}catch{M=!0}M||n.push({text:x,range:T,activate:(H,$)=>c?c.activate(H,$,T):v(0,$),hover:(H,$)=>{var N;return(N=c==null?void 0:c.hover)===null||N===void 0?void 0:N.call(c,H,$,T)},leave:(H,$)=>{var N;return(N=c==null?void 0:c.leave)===null||N===void 0?void 0:N.call(c,H,$,T)}})}_=!1,m.hasExtendedAttrs()&&m.extended.urlId?(d=L,w=m.extended.urlId):(d=-1,w=-1)}}e(n)}};function v(s,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}S=h([u(0,g.IBufferService),u(1,g.IOptionsService),u(2,g.IOscLinkService)],S),i.OscLinkProvider=S},6193:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(r,h){this._parentWindow=r,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,h,u){this._rowCount=u,r=r!==void 0?r:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const r=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const h=r(844);class u extends h.Disposable{constructor(g){super(),this._parentWindow=g,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(g){this._listener&&this.clearListener(),this._listener=g,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=u},3236:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=r(2950),u=r(1680),l=r(3614),g=r(2584),S=r(5435),v=r(9312),s=r(6114),e=r(3656),a=r(9042),f=r(4567),n=r(1296),c=r(7399),m=r(8460),p=r(8437),w=r(3230),d=r(4725),_=r(428),L=r(8934),x=r(6465),T=r(5114),M=r(8969),H=r(8055),$=r(4269),N=r(5941),y=r(3107),D=r(5744),B=r(9074),O=r(2585),j=r(3730),X=r(844),re=r(6731),Y=typeof window<"u"?window.document:null;class te extends M.CoreTerminal{constructor(I={}){super(I),this.browser=s,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new m.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new m.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new m.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new m.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new m.EventEmitter),this._onBlur=this.register(new m.EventEmitter),this._onA11yCharEmitter=this.register(new m.EventEmitter),this._onA11yTabEmitter=this.register(new m.EventEmitter),this._onWillOpen=this.register(new m.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(x.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(j.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((U,V)=>this.refresh(U,V))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(U=>this._reportWindowsOptions(U))),this.register(this._inputHandler.onColor(U=>this._handleColorEvent(U))),this.register((0,m.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,m.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,m.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,m.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(U=>this._afterResize(U.cols,U.rows))),this.register((0,X.toDisposable)(()=>{var U,V;this._customKeyEventHandler=void 0,(V=(U=this.element)===null||U===void 0?void 0:U.parentNode)===null||V===void 0||V.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(I){if(this._themeService)for(const U of I){let V,Q="";switch(U.index){case 256:V="foreground",Q="10";break;case 257:V="background",Q="11";break;case 258:V="cursor",Q="12";break;default:V="ansi",Q="4;"+U.index}switch(U.type){case 0:const _e=H.color.toColorRGB(V==="ansi"?this._themeService.colors.ansi[U.index]:this._themeService.colors[V]);this.coreService.triggerDataEvent(`${g.C0.ESC}]${Q};${(0,N.toRgbString)(_e)}${g.C1_ESCAPED.ST}`);break;case 1:if(V==="ansi")this._themeService.modifyColors(k=>k.ansi[U.index]=H.rgba.toColor(...U.color));else{const k=V;this._themeService.modifyColors(F=>F[k]=H.rgba.toColor(...U.color))}break;case 2:this._themeService.restoreColor(U.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){var U;I?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)):((U=this._accessibilityManager)===null||U===void 0||U.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[I"),this.updateCursorStyle(I),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)===null||I===void 0?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,U=this.buffer.lines.get(I);if(!U)return;const V=Math.min(this.buffer.x,this.cols-1),Q=this._renderService.dimensions.css.cell.height,_e=U.getWidth(V),k=this._renderService.dimensions.css.cell.width*_e,F=this.buffer.y*this._renderService.dimensions.css.cell.height,W=V*this._renderService.dimensions.css.cell.width;this.textarea.style.left=W+"px",this.textarea.style.top=F+"px",this.textarea.style.width=k+"px",this.textarea.style.height=Q+"px",this.textarea.style.lineHeight=Q+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",U=>{this.hasSelection()&&(0,l.copyHandler)(U,this._selectionService)}));const I=U=>(0,l.handlePasteEvent)(U,this.textarea,this.coreService);this.register((0,e.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,e.addDisposableDomListener)(this.element,"paste",I)),s.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",U=>{U.button===2&&(0,l.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",U=>{(0,l.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),s.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",U=>{U.button===1&&(0,l.moveTextAreaUnderMouseCursor)(U,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,e.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var U;if(!I)throw new Error("Terminal requires a parent element.");I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=I.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),I.appendChild(this.element);const V=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),s.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,(U=this._document.defaultView)!==null&&U!==void 0?U:window),this._instantiationService.setService(d.ICoreBrowserService,this._coreBrowserService),this.register((0,e.addDisposableDomListener)(this.textarea,"focus",Q=>this._handleTextAreaFocus(Q))),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(d.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(re.ThemeService),this._instantiationService.setService(d.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance($.CharacterJoinerService),this._instantiationService.setService(d.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(d.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(Q=>this._onRender.fire(Q))),this.onResize(Q=>this._renderService.resize(Q.cols,Q.rows)),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(V);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(d.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,Q=>this.scrollLines(Q,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(d.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(Q=>this.scrollLines(Q.amount,Q.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(Q=>this._renderService.handleSelectionChanged(Q.start,Q.end,Q.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(Q=>{this.textarea.value=Q,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(Q=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",Q=>this._selectionService.handleMouseDown(Q))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",Q=>this._handleScreenReaderModeOptionChange(Q))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(D.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",Q=>{!this._overviewRulerRenderer&&Q&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(D.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const I=this,U=this.element;function V(k){const F=I._mouseService.getMouseReportCoords(k,I.screenElement);if(!F)return!1;let W,q;switch(k.overrideType||k.type){case"mousemove":q=32,k.buttons===void 0?(W=3,k.button!==void 0&&(W=k.button<3?k.button:3)):W=1&k.buttons?0:4&k.buttons?1:2&k.buttons?2:3;break;case"mouseup":q=0,W=k.button<3?k.button:3;break;case"mousedown":q=1,W=k.button<3?k.button:3;break;case"wheel":if(I.viewport.getLinesScrolled(k)===0)return!1;q=k.deltaY<0?0:1,W=4;break;default:return!1}return!(q===void 0||W===void 0||W>4)&&I.coreMouseService.triggerMouseEvent({col:F.col,row:F.row,x:F.x,y:F.y,button:W,action:q,ctrl:k.ctrlKey,alt:k.altKey,shift:k.shiftKey})}const Q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},_e={mouseup:k=>(V(k),k.buttons||(this._document.removeEventListener("mouseup",Q.mouseup),Q.mousedrag&&this._document.removeEventListener("mousemove",Q.mousedrag)),this.cancel(k)),wheel:k=>(V(k),this.cancel(k,!0)),mousedrag:k=>{k.buttons&&V(k)},mousemove:k=>{k.buttons||V(k)}};this.register(this.coreMouseService.onProtocolChange(k=>{k?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(k)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&k?Q.mousemove||(U.addEventListener("mousemove",_e.mousemove),Q.mousemove=_e.mousemove):(U.removeEventListener("mousemove",Q.mousemove),Q.mousemove=null),16&k?Q.wheel||(U.addEventListener("wheel",_e.wheel,{passive:!1}),Q.wheel=_e.wheel):(U.removeEventListener("wheel",Q.wheel),Q.wheel=null),2&k?Q.mouseup||(Q.mouseup=_e.mouseup):(this._document.removeEventListener("mouseup",Q.mouseup),Q.mouseup=null),4&k?Q.mousedrag||(Q.mousedrag=_e.mousedrag):(this._document.removeEventListener("mousemove",Q.mousedrag),Q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(U,"mousedown",k=>{if(k.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(k))return V(k),Q.mouseup&&this._document.addEventListener("mouseup",Q.mouseup),Q.mousedrag&&this._document.addEventListener("mousemove",Q.mousedrag),this.cancel(k)})),this.register((0,e.addDisposableDomListener)(U,"wheel",k=>{if(!Q.wheel){if(!this.buffer.hasScrollback){const F=this.viewport.getLinesScrolled(k);if(F===0)return;const W=g.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(k.deltaY<0?"A":"B");let q="";for(let z=0;z<Math.abs(F);z++)q+=W;return this.coreService.triggerDataEvent(q,!0),this.cancel(k,!0)}return this.viewport.handleWheel(k)?this.cancel(k):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(U,"touchstart",k=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(k),this.cancel(k)},{passive:!0})),this.register((0,e.addDisposableDomListener)(U,"touchmove",k=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(k)?void 0:this.cancel(k)},{passive:!1}))}refresh(I,U){var V;(V=this._renderService)===null||V===void 0||V.refreshRows(I,U)}updateCursorStyle(I){var U;!((U=this._selectionService)===null||U===void 0)&&U.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,U,V=0){super.scrollLines(I,U,V),this.refresh(0,this.rows-1)}paste(I){(0,l.paste)(I,this.textarea,this.coreService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}registerLinkProvider(I){return this.linkifier2.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const U=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),U}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,U,V){this._selectionService.setSelection(I,U,V)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)===null||I===void 0||I.clearSelection()}selectAll(){var I;(I=this._selectionService)===null||I===void 0||I.selectAll()}selectLines(I,U){var V;(V=this._selectionService)===null||V===void 0||V.selectLines(I,U)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const U=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!U&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;U||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const V=(0,c.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),V.type===3||V.type===2){const Q=this.rows-1;return this.scrollLines(V.type===2?-Q:Q),this.cancel(I,!0)}return V.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(V.cancel&&this.cancel(I,!0),!V.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(V.key!==g.C0.ETX&&V.key!==g.C0.CR||(this.textarea.value=""),this._onKey.fire({key:V.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(V.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,U){const V=I.isMac&&!this.options.macOptionIsMeta&&U.altKey&&!U.ctrlKey&&!U.metaKey||I.isWindows&&U.altKey&&U.ctrlKey&&!U.metaKey||I.isWindows&&U.getModifierState("AltGraph");return U.type==="keypress"?V:V&&(!U.keyCode||U.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(U){return U.keyCode===16||U.keyCode===17||U.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let U;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)U=I.charCode;else if(I.which===null||I.which===void 0)U=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;U=I.which}return!(!U||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(U=String.fromCharCode(U),this._onKey.fire({key:U,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(U,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const U=I.data;return this.coreService.triggerDataEvent(U,!0),this.cancel(I),!0}return!1}resize(I,U){I!==this.cols||U!==this.rows?super.resize(I,U):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,U){var V,Q;(V=this._charSizeService)===null||V===void 0||V.measure(),(Q=this.viewport)===null||Q===void 0||Q.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let I=1;I<this.rows;I++)this.buffer.lines.push(this.buffer.getBlankLine(p.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var I,U;this.options.rows=this.rows,this.options.cols=this.cols;const V=this._customKeyEventHandler;this._setup(),super.reset(),(I=this._selectionService)===null||I===void 0||I.reset(),this._decorationService.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1),(U=this.viewport)===null||U===void 0||U.syncScrollArea()}clearTextureAtlas(){var I;(I=this._renderService)===null||I===void 0||I.clearTextureAtlas()}_reportFocus(){var I;!((I=this.element)===null||I===void 0)&&I.classList.contains("focus")?this.coreService.triggerDataEvent(g.C0.ESC+"[I"):this.coreService.triggerDataEvent(g.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case S.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const U=this._renderService.dimensions.css.canvas.width.toFixed(0),V=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${g.C0.ESC}[4;${V};${U}t`);break;case S.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Q=this._renderService.dimensions.css.cell.width.toFixed(0),_e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${g.C0.ESC}[6;${_e};${Q}t`)}}cancel(I,U){if(this.options.cancelEvents||U)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=te},9924:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(r,h=1e3){this._renderCallback=r,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,h,u){this._rowCount=u,r=r!==void 0?r:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=l-this._lastRefreshMs,S=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const r=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,h)}}},1680:function(R,i,r){var h=this&&this.__decorate||function(e,a,f,n){var c,m=arguments.length,p=m<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,f):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(e,a,f,n);else for(var w=e.length-1;w>=0;w--)(c=e[w])&&(p=(m<3?c(p):m>3?c(a,f,p):c(a,f))||p);return m>3&&p&&Object.defineProperty(a,f,p),p},u=this&&this.__param||function(e,a){return function(f,n){a(f,n,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const l=r(844),g=r(3656),S=r(4725),v=r(2585);let s=class extends l.Disposable{constructor(e,a,f,n,c,m,p,w,d){super(),this._scrollLines=e,this._viewportElement=a,this._scrollArea=f,this._bufferService=n,this._optionsService=c,this._charSizeService=m,this._renderService=p,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(_=>this._activeBuffer=_.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(_=>this._renderDimensions=_)),this._handleThemeChange(d.colors),this.register(d.onChangeColors(_=>this._handleThemeChange(_))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}_refresh(e){if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(a)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,a){const f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&f<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const a=this._getPixelsScrolled(e);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))}_getPixelsScrolled(e){if(e.deltaY===0||e.shiftKey)return 0;let a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getLinesScrolled(e){if(e.deltaY===0||e.shiftKey)return 0;let a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(e,a){const f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&a.altKey||f==="ctrl"&&a.ctrlKey||f==="shift"&&a.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const a=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))}};s=h([u(3,v.IBufferService),u(4,v.IOptionsService),u(5,S.ICharSizeService),u(6,S.IRenderService),u(7,S.ICoreBrowserService),u(8,S.IThemeService)],s),i.Viewport=s},3107:function(R,i,r){var h=this&&this.__decorate||function(e,a,f,n){var c,m=arguments.length,p=m<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,f):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(e,a,f,n);else for(var w=e.length-1;w>=0;w--)(c=e[w])&&(p=(m<3?c(p):m>3?c(a,f,p):c(a,f))||p);return m>3&&p&&Object.defineProperty(a,f,p),p},u=this&&this.__param||function(e,a){return function(f,n){a(f,n,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const l=r(3656),g=r(4725),S=r(844),v=r(2585);let s=class extends S.Disposable{constructor(e,a,f,n){super(),this._screenElement=e,this._bufferService=a,this._decorationService=f,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var a;const f=document.createElement("div");f.classList.add("xterm-decoration"),f.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const n=(a=e.options.x)!==null&&a!==void 0?a:0;return n&&n>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(e,f),f}_refreshStyle(e){const a=e.marker.line-this._bufferService.buffers.active.ydisp;if(a<0||a>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let f=this._decorationElements.get(e);f||(f=this._createElement(e),e.element=f,this._decorationElements.set(e,f),this._container.appendChild(f)),f.style.top=a*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(f)}}_refreshXPosition(e,a=e.element){var f;if(!a)return;const n=(f=e.options.x)!==null&&f!==void 0?f:0;(e.options.anchor||"left")==="right"?a.style.right=n?n*this._renderService.dimensions.css.cell.width+"px":"":a.style.left=n?n*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var a;(a=this._decorationElements.get(e))===null||a===void 0||a.remove(),this._decorationElements.delete(e),e.dispose()}};s=h([u(1,v.IBufferService),u(2,v.IDecorationService),u(3,g.IRenderService)],s),i.BufferDecorationRenderer=s},5871:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(const h of this._zones)if(h.color===r.options.overviewRulerOptions.color&&h.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,r.marker.line))return;if(this._lineAdjacentToZone(h,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(h,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,h){return h>=r.startBufferLine&&h<=r.endBufferLine}_lineAdjacentToZone(r,h,u){return h>=r.startBufferLine-this._linePadding[u||"full"]&&h<=r.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(r,h){r.startBufferLine=Math.min(r.startBufferLine,h),r.endBufferLine=Math.max(r.endBufferLine,h)}}},5744:function(R,i,r){var h=this&&this.__decorate||function(c,m,p,w){var d,_=arguments.length,L=_<3?m:w===null?w=Object.getOwnPropertyDescriptor(m,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,m,p,w);else for(var x=c.length-1;x>=0;x--)(d=c[x])&&(L=(_<3?d(L):_>3?d(m,p,L):d(m,p))||L);return _>3&&L&&Object.defineProperty(m,p,L),L},u=this&&this.__param||function(c,m){return function(p,w){m(p,w,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const l=r(5871),g=r(3656),S=r(4725),v=r(844),s=r(2585),e={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0};let n=class extends v.Disposable{constructor(c,m,p,w,d,_,L){var x;super(),this._viewportElement=c,this._screenElement=m,this._bufferService=p,this._decorationService=w,this._renderService=d,this._optionsService=_,this._coreBrowseService=L,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(x=this._viewportElement.parentElement)===null||x===void 0||x.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,g.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);a.full=this._canvas.width,a.left=c,a.center=m,a.right=c,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=a.left,f.right=a.left+a.center}_refreshDrawHeightConstants(){e.full=Math.round(2*this._coreBrowseService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowseService.dpr);e.left=m,e.center=m,e.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const m of c)m.position!=="full"&&this._renderColorZone(m);for(const m of c)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(f[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-e[c.position||"full"]/2),a[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+e[c.position||"full"]))}_queueRefresh(c,m){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n=h([u(2,s.IBufferService),u(3,s.IDecorationService),u(4,S.IRenderService),u(5,s.IOptionsService),u(6,S.ICoreBrowserService)],n),i.OverviewRulerRenderer=n},2950:function(R,i,r){var h=this&&this.__decorate||function(s,e,a,f){var n,c=arguments.length,m=c<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,a):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,e,a,f);else for(var p=s.length-1;p>=0;p--)(n=s[p])&&(m=(c<3?n(m):c>3?n(e,a,m):n(e,a))||m);return c>3&&m&&Object.defineProperty(e,a,m),m},u=this&&this.__param||function(s,e){return function(a,f){e(a,f,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const l=r(4725),g=r(2585),S=r(2584);let v=class{constructor(s,e,a,f,n,c){this._textarea=s,this._compositionView=e,this._bufferService=a,this._optionsService=f,this._coreService=n,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(s){this._compositionView.textContent=s.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(s){if(this._isComposing||this._isSendingComposition){if(s.keyCode===229||s.keyCode===16||s.keyCode===17||s.keyCode===18)return!1;this._finalizeComposition(!1)}return s.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(s){if(this._compositionView.classList.remove("active"),this._isComposing=!1,s){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const s=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const e=this._textarea.value,a=e.replace(s,"");this._dataAlreadySent=a,e.length>s.length?this._coreService.triggerDataEvent(a,!0):e.length<s.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):e.length===s.length&&e!==s&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(s){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const c=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}s||setTimeout(()=>this.updateCompositionElements(!0),0)}}};v=h([u(2,g.IBufferService),u(3,g.IOptionsService),u(4,g.ICoreService),u(5,l.IRenderService)],v),i.CompositionHelper=v},9806:(R,i)=>{function r(h,u,l){const g=l.getBoundingClientRect(),S=h.getComputedStyle(l),v=parseInt(S.getPropertyValue("padding-left")),s=parseInt(S.getPropertyValue("padding-top"));return[u.clientX-g.left-v,u.clientY-g.top-s]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=r,i.getCoords=function(h,u,l,g,S,v,s,e,a){if(!v)return;const f=r(h,u,l);return f?(f[0]=Math.ceil((f[0]+(a?s/2:0))/s),f[1]=Math.ceil(f[1]/e),f[0]=Math.min(Math.max(f[0],1),g+(a?1:0)),f[1]=Math.min(Math.max(f[1],1),S),f):void 0}},9504:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=r(2584);function u(e,a,f,n){const c=e-l(e,f),m=a-l(a,f),p=Math.abs(c-m)-function(w,d,_){let L=0;const x=w-l(w,_),T=d-l(d,_);for(let M=0;M<Math.abs(x-T);M++){const H=g(w,d)==="A"?-1:1,$=_.buffer.lines.get(x+H*M);$!=null&&$.isWrapped&&L++}return L}(e,a,f);return s(p,v(g(e,a),n))}function l(e,a){let f=0,n=a.buffer.lines.get(e),c=n==null?void 0:n.isWrapped;for(;c&&e>=0&&e<a.rows;)f++,n=a.buffer.lines.get(--e),c=n==null?void 0:n.isWrapped;return f}function g(e,a){return e>a?"A":"B"}function S(e,a,f,n,c,m){let p=e,w=a,d="";for(;p!==f||w!==n;)p+=c?1:-1,c&&p>m.cols-1?(d+=m.buffer.translateBufferLineToString(w,!1,e,p),p=0,e=0,w++):!c&&p<0&&(d+=m.buffer.translateBufferLineToString(w,!1,0,e+1),p=m.cols-1,e=p,w--);return d+m.buffer.translateBufferLineToString(w,!1,e,p)}function v(e,a){const f=a?"O":"[";return h.C0.ESC+f+e}function s(e,a){e=Math.floor(e);let f="";for(let n=0;n<e;n++)f+=a;return f}i.moveToCellSequence=function(e,a,f,n){const c=f.buffer.x,m=f.buffer.y;if(!f.buffer.hasScrollback)return function(d,_,L,x,T,M){return u(_,x,T,M).length===0?"":s(S(d,_,d,_-l(_,T),!1,T).length,v("D",M))}(c,m,0,a,f,n)+u(m,a,f,n)+function(d,_,L,x,T,M){let H;H=u(_,x,T,M).length>0?x-l(x,T):_;const $=x,N=function(y,D,B,O,j,X){let re;return re=u(B,O,j,X).length>0?O-l(O,j):D,y<B&&re<=O||y>=B&&re<O?"C":"D"}(d,_,L,x,T,M);return s(S(d,H,L,$,N==="C",T).length,v(N,M))}(c,m,e,a,f,n);let p;if(m===a)return p=c>e?"D":"C",s(Math.abs(c-e),v(p,n));p=m>a?"D":"C";const w=Math.abs(m-a);return s(function(d,_){return _.cols-d}(m>a?e:c,f)+(w-1)*f.cols+1+((m>a?c:e)-1),v(p,n))}},1296:function(R,i,r){var h=this&&this.__decorate||function(d,_,L,x){var T,M=arguments.length,H=M<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(d,_,L,x);else for(var $=d.length-1;$>=0;$--)(T=d[$])&&(H=(M<3?T(H):M>3?T(_,L,H):T(_,L))||H);return M>3&&H&&Object.defineProperty(_,L,H),H},u=this&&this.__param||function(d,_){return function(L,x){_(L,x,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const l=r(9631),g=r(3787),S=r(2223),v=r(6171),s=r(4725),e=r(8055),a=r(8460),f=r(844),n=r(2585),c="xterm-dom-renderer-owner-",m="xterm-focus";let p=1,w=class extends f.Disposable{constructor(d,_,L,x,T,M,H,$,N,y){super(),this._element=d,this._screenElement=_,this._viewportElement=L,this._linkifier2=x,this._charSizeService=M,this._optionsService=H,this._bufferService=$,this._coreBrowserService=N,this._terminalClass=p++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,v.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(y.onChangeColors(D=>this._injectCss(D))),this._injectCss(y.colors),this._rowFactory=T.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(c+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(D=>this._handleLinkHover(D))),this.register(this._linkifier2.onHideLinkUnderline(D=>this._handleLinkLeave(D))),this.register((0,f.toDisposable)(()=>{this._element.classList.remove(c+this._terminalClass),(0,l.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){const d=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*d,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*d),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/d),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/d),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const L of this._rowElements)L.style.width=`${this.dimensions.css.canvas.width}px`,L.style.height=`${this.dimensions.css.cell.height}px`,L.style.lineHeight=`${this.dimensions.css.cell.height}px`,L.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const _=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=_,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(d){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let _=`${this._terminalSelector} .xterm-rows { color: ${d.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;_+=`${this._terminalSelector} span:not(.${g.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${g.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${g.ITALIC_CLASS} { font-style: italic;}`,_+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",_+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${d.cursor.css};  color: ${d.cursorAccent.css}; } 50% {  background-color: ${d.cursorAccent.css};  color: ${d.cursor.css}; }}`,_+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${g.CURSOR_CLASS}.${g.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${d.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${g.CURSOR_CLASS}.${g.CURSOR_BLINK_CLASS}:not(.${g.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${g.CURSOR_CLASS}.${g.CURSOR_BLINK_CLASS}.${g.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${g.CURSOR_CLASS}.${g.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${d.cursor.css}; color: ${d.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${g.CURSOR_CLASS}.${g.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${d.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${g.CURSOR_CLASS}.${g.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${d.cursor.css} inset;}`,_+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${d.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${d.selectionInactiveBackgroundOpaque.css};}`;for(const[L,x]of d.ansi.entries())_+=`${this._terminalSelector} .xterm-fg-${L} { color: ${x.css}; }${this._terminalSelector} .xterm-bg-${L} { background-color: ${x.css}; }`;_+=`${this._terminalSelector} .xterm-fg-${S.INVERTED_DEFAULT_COLOR} { color: ${e.color.opaque(d.background).css}; }${this._terminalSelector} .xterm-bg-${S.INVERTED_DEFAULT_COLOR} { background-color: ${d.foreground.css}; }`,this._themeStyleElement.textContent=_}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(d,_){for(let L=this._rowElements.length;L<=_;L++){const x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(d,_){this._refreshRowElements(d,_),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m)}handleSelectionChanged(d,_,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(d,_,L),this.renderRows(0,this._bufferService.rows-1),!d||!_)return;const x=d[1]-this._bufferService.buffer.ydisp,T=_[1]-this._bufferService.buffer.ydisp,M=Math.max(x,0),H=Math.min(T,this._bufferService.rows-1);if(M>=this._bufferService.rows||H<0)return;const $=document.createDocumentFragment();if(L){const N=d[0]>_[0];$.appendChild(this._createSelectionElement(M,N?_[0]:d[0],N?d[0]:_[0],H-M+1))}else{const N=x===M?d[0]:0,y=M===T?_[0]:this._bufferService.cols;$.appendChild(this._createSelectionElement(M,N,y));const D=H-M-1;if($.appendChild(this._createSelectionElement(M+1,0,this._bufferService.cols,D)),M!==H){const B=T===H?_[0]:this._bufferService.cols;$.appendChild(this._createSelectionElement(H,0,B))}}this._selectionContainer.appendChild($)}_createSelectionElement(d,_,L,x=1){const T=document.createElement("div");return T.style.height=x*this.dimensions.css.cell.height+"px",T.style.top=d*this.dimensions.css.cell.height+"px",T.style.left=_*this.dimensions.css.cell.width+"px",T.style.width=this.dimensions.css.cell.width*(L-_)+"px",T}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(const d of this._rowElements)d.replaceChildren()}renderRows(d,_){const L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,x=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),T=this._optionsService.rawOptions.cursorBlink;for(let M=d;M<=_;M++){const H=this._rowElements[M],$=M+this._bufferService.buffer.ydisp,N=this._bufferService.buffer.lines.get($),y=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[M]&&this._cellToRowElements[M].length===this._bufferService.cols||(this._cellToRowElements[M]=new Int16Array(this._bufferService.cols)),H.replaceChildren(this._rowFactory.createRow(N,$,$===L,y,x,T,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[M]))}}get _terminalSelector(){return`.${c}${this._terminalClass}`}_handleLinkHover(d){this._setCellUnderline(d.x1,d.x2,d.y1,d.y2,d.cols,!0)}_handleLinkLeave(d){this._setCellUnderline(d.x1,d.x2,d.y1,d.y2,d.cols,!1)}_setCellUnderline(d,_,L,x,T,M){if(d=this._cellToRowElements[L][d],_=this._cellToRowElements[x][_],d!==-1&&_!==-1)for(;d!==_||L!==x;){const H=this._rowElements[L];if(!H)return;const $=H.children[d];$&&($.style.textDecoration=M?"underline":"none"),++d>=T&&(d=0,L++)}}};w=h([u(4,n.IInstantiationService),u(5,s.ICharSizeService),u(6,n.IOptionsService),u(7,n.IBufferService),u(8,s.ICoreBrowserService),u(9,s.IThemeService)],w),i.DomRenderer=w},3787:function(R,i,r){var h=this&&this.__decorate||function(p,w,d,_){var L,x=arguments.length,T=x<3?w:_===null?_=Object.getOwnPropertyDescriptor(w,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(p,w,d,_);else for(var M=p.length-1;M>=0;M--)(L=p[M])&&(T=(x<3?L(T):x>3?L(w,d,T):L(w,d))||T);return x>3&&T&&Object.defineProperty(w,d,T),T},u=this&&this.__param||function(p,w){return function(d,_){w(d,_,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.STRIKETHROUGH_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;const l=r(2223),g=r(643),S=r(511),v=r(2585),s=r(8055),e=r(4725),a=r(4269),f=r(6171),n=r(3734);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.STRIKETHROUGH_CLASS="xterm-strikethrough",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let c=class{constructor(p,w,d,_,L,x,T){this._document=p,this._characterJoinerService=w,this._optionsService=d,this._coreBrowserService=_,this._coreService=L,this._decorationService=x,this._themeService=T,this._workCell=new S.CellData,this._columnSelectMode=!1}handleSelectionChanged(p,w,d){this._selectionStart=p,this._selectionEnd=w,this._columnSelectMode=d}createRow(p,w,d,_,L,x,T,M,H){const $=this._document.createDocumentFragment(),N=this._characterJoinerService.getJoinedCharacters(w);let y=0;for(let j=Math.min(p.length,M)-1;j>=0;j--)if(p.loadCell(j,this._workCell).getCode()!==g.NULL_CELL_CODE||d&&j===L){y=j+1;break}const D=this._themeService.colors;let B=-1,O=0;for(;O<y;O++){p.loadCell(O,this._workCell);let j=this._workCell.getWidth();if(j===0){H[O]=B;continue}let X=!1,re=O,Y=this._workCell;if(N.length>0&&O===N[0][0]){X=!0;const z=N.shift();Y=new a.JoinedCellData(this._workCell,p.translateToString(!0,z[0],z[1]),z[1]-z[0]),re=z[1]-1,j=Y.getWidth()}const te=this._document.createElement("span");if(j>1&&(te.style.width=T*j+"px"),X&&(te.style.display="inline",L>=O&&L<=re&&(L=O)),!this._coreService.isCursorHidden&&d&&O===L)switch(te.classList.add(i.CURSOR_CLASS),x&&te.classList.add(i.CURSOR_BLINK_CLASS),_){case"bar":te.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":te.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:te.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}if(Y.isBold()&&te.classList.add(i.BOLD_CLASS),Y.isItalic()&&te.classList.add(i.ITALIC_CLASS),Y.isDim()&&te.classList.add(i.DIM_CLASS),Y.isInvisible()?te.textContent=g.WHITESPACE_CELL_CHAR:te.textContent=Y.getChars()||g.WHITESPACE_CELL_CHAR,Y.isUnderline()&&(te.classList.add(`${i.UNDERLINE_CLASS}-${Y.extended.underlineStyle}`),te.textContent===" "&&(te.textContent=" "),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())te.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let z=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&z<8&&(z+=8),te.style.textDecorationColor=D.ansi[z].css}Y.isStrikethrough()&&te.classList.add(i.STRIKETHROUGH_CLASS);let P=Y.getFgColor(),I=Y.getFgColorMode(),U=Y.getBgColor(),V=Y.getBgColorMode();const Q=!!Y.isInverse();if(Q){const z=P;P=U,U=z;const ee=I;I=V,V=ee}let _e,k,F=!1;this._decorationService.forEachDecorationAtCell(O,w,void 0,z=>{z.options.layer!=="top"&&F||(z.backgroundColorRGB&&(V=50331648,U=z.backgroundColorRGB.rgba>>8&16777215,_e=z.backgroundColorRGB),z.foregroundColorRGB&&(I=50331648,P=z.foregroundColorRGB.rgba>>8&16777215,k=z.foregroundColorRGB),F=z.options.layer==="top")});const W=this._isCellInSelection(O,w);let q;switch(F||D.selectionForeground&&W&&(I=50331648,P=D.selectionForeground.rgba>>8&16777215,k=D.selectionForeground),W&&(_e=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,F=!0),F&&te.classList.add("xterm-decoration-top"),V){case 16777216:case 33554432:q=D.ansi[U],te.classList.add(`xterm-bg-${U}`);break;case 50331648:q=s.rgba.toColor(U>>16,U>>8&255,255&U),this._addStyle(te,`background-color:#${m((U>>>0).toString(16),"0",6)}`);break;default:Q?(q=D.foreground,te.classList.add(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):q=D.background}switch(_e||Y.isDim()&&(_e=s.color.multiplyOpacity(q,.5)),I){case 16777216:case 33554432:Y.isBold()&&P<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(P+=8),this._applyMinimumContrast(te,q,D.ansi[P],Y,_e,void 0)||te.classList.add(`xterm-fg-${P}`);break;case 50331648:const z=s.rgba.toColor(P>>16&255,P>>8&255,255&P);this._applyMinimumContrast(te,q,z,Y,_e,k)||this._addStyle(te,`color:#${m(P.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(te,q,D.foreground,Y,_e,void 0)||Q&&te.classList.add(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}$.appendChild(te),H[O]=++B,O=re}return O<M-1&&H.subarray(O).fill(++B),$}_applyMinimumContrast(p,w,d,_,L,x){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.excludeFromContrastRatioDemands)(_.getCode()))return!1;let T;return L||x||(T=this._themeService.colors.contrastCache.getColor(w.rgba,d.rgba)),T===void 0&&(T=s.color.ensureContrastRatio(L||w,x||d,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((L||w).rgba,(x||d).rgba,T??null)),!!T&&(this._addStyle(p,`color:${T.css}`),!0)}_addStyle(p,w){p.setAttribute("style",`${p.getAttribute("style")||""}${w};`)}_isCellInSelection(p,w){const d=this._selectionStart,_=this._selectionEnd;return!(!d||!_)&&(this._columnSelectMode?d[0]<=_[0]?p>=d[0]&&w>=d[1]&&p<_[0]&&w<=_[1]:p<d[0]&&w>=d[1]&&p>=_[0]&&w<=_[1]:w>d[1]&&w<_[1]||d[1]===_[1]&&w===d[1]&&p>=d[0]&&p<_[0]||d[1]<_[1]&&w===_[1]&&p<_[0]||d[1]<_[1]&&w===d[1]&&p>=d[0])}};function m(p,w,d){for(;p.length<d;)p=w+p;return p}c=h([u(1,e.ICharacterJoinerService),u(2,v.IOptionsService),u(3,e.ICoreBrowserService),u(4,v.ICoreService),u(5,v.IDecorationService),u(6,e.IThemeService)],c),i.DomRendererRowFactory=c},2223:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=r(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(R,i)=>{function r(h){return 57508<=h&&h<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},i.isPowerlineGlyph=r,i.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},i.excludeFromContrastRatioDemands=function(h){return r(h)||function(u){return 9472<=u&&u<=9631}(h)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const r=this.selectionStart,h=this.selectionEnd;return!(!r||!h)&&(r[1]>h[1]||r[1]===h[1]&&r[0]>h[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(R,i,r){var h=this&&this.__decorate||function(e,a,f,n){var c,m=arguments.length,p=m<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,f):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(e,a,f,n);else for(var w=e.length-1;w>=0;w--)(c=e[w])&&(p=(m<3?c(p):m>3?c(a,f,p):c(a,f))||p);return m>3&&p&&Object.defineProperty(a,f,p),p},u=this&&this.__param||function(e,a){return function(f,n){a(f,n,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const l=r(2585),g=r(8460),S=r(844);let v=class extends S.Disposable{constructor(e,a,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new s(e,a,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};v=h([u(2,l.IOptionsService)],v),i.CharSizeService=v;class s{constructor(a,f,n){this._document=a,this._parentElement=f,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const a=this._measureElement.getBoundingClientRect();return a.width!==0&&a.height!==0&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result}}},4269:function(R,i,r){var h=this&&this.__decorate||function(a,f,n,c){var m,p=arguments.length,w=p<3?f:c===null?c=Object.getOwnPropertyDescriptor(f,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,f,n,c);else for(var d=a.length-1;d>=0;d--)(m=a[d])&&(w=(p<3?m(w):p>3?m(f,n,w):m(f,n))||w);return p>3&&w&&Object.defineProperty(f,n,w),w},u=this&&this.__param||function(a,f){return function(n,c){f(n,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const l=r(3734),g=r(643),S=r(511),v=r(2585);class s extends l.AttributeData{constructor(f,n,c){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=n,this._width=c}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=s;let e=class Rr{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(f){const n={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(n),n.id}deregister(f){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===f)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(f);if(!n||n.length===0)return[];const c=[],m=n.translateToString(!0);let p=0,w=0,d=0,_=n.getFg(0),L=n.getBg(0);for(let x=0;x<n.getTrimmedLength();x++)if(n.loadCell(x,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==L){if(x-p>1){const T=this._getJoinedRanges(m,d,w,n,p);for(let M=0;M<T.length;M++)c.push(T[M])}p=x,d=w,_=this._workCell.fg,L=this._workCell.bg}w+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1){const x=this._getJoinedRanges(m,d,w,n,p);for(let T=0;T<x.length;T++)c.push(x[T])}return c}_getJoinedRanges(f,n,c,m,p){const w=f.substring(n,c);let d=[];try{d=this._characterJoiners[0].handler(w)}catch(_){console.error(_)}for(let _=1;_<this._characterJoiners.length;_++)try{const L=this._characterJoiners[_].handler(w);for(let x=0;x<L.length;x++)Rr._mergeRanges(d,L[x])}catch(L){console.error(L)}return this._stringRangesToCellRanges(d,m,p),d}_stringRangesToCellRanges(f,n,c){let m=0,p=!1,w=0,d=f[m];if(d){for(let _=c;_<this._bufferService.cols;_++){const L=n.getWidth(_),x=n.getString(_).length||g.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!p&&d[0]<=w&&(d[0]=_,p=!0),d[1]<=w){if(d[1]=_,d=f[++m],!d)break;d[0]<=w?(d[0]=_,p=!0):p=!1}w+=x}}d&&(d[1]=this._bufferService.cols)}}static _mergeRanges(f,n){let c=!1;for(let m=0;m<f.length;m++){const p=f[m];if(c){if(n[1]<=p[0])return f[m-1][1]=n[1],f;if(n[1]<=p[1])return f[m-1][1]=Math.max(n[1],p[1]),f.splice(m,1),f;f.splice(m,1),m--}else{if(n[1]<=p[0])return f.splice(m,0,n),f;if(n[1]<=p[1])return p[0]=Math.min(n[0],p[0]),f;n[0]<p[1]&&(p[0]=Math.min(n[0],p[0]),c=!0)}}return c?f[f.length-1][1]=n[1]:f.push(n),f}};e=h([u(0,v.IBufferService)],e),i.CharacterJoinerService=e},5114:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(r,h){this._textarea=r,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(R,i,r){var h=this&&this.__decorate||function(v,s,e,a){var f,n=arguments.length,c=n<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(v,s,e,a);else for(var m=v.length-1;m>=0;m--)(f=v[m])&&(c=(n<3?f(c):n>3?f(s,e,c):f(s,e))||c);return n>3&&c&&Object.defineProperty(s,e,c),c},u=this&&this.__param||function(v,s){return function(e,a){s(e,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const l=r(4725),g=r(9806);let S=class{constructor(v,s){this._renderService=v,this._charSizeService=s}getCoords(v,s,e,a,f){return(0,g.getCoords)(window,v,s,e,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(v,s){const e=(0,g.getCoordsRelativeToElement)(window,v,s);if(!(!this._charSizeService.hasValidSize||e[0]<0||e[1]<0||e[0]>=this._renderService.dimensions.css.canvas.width||e[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(e[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(e[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(e[0]),y:Math.floor(e[1])}}};S=h([u(0,l.IRenderService),u(1,l.ICharSizeService)],S),i.MouseService=S},3230:function(R,i,r){var h=this&&this.__decorate||function(c,m,p,w){var d,_=arguments.length,L=_<3?m:w===null?w=Object.getOwnPropertyDescriptor(m,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,m,p,w);else for(var x=c.length-1;x>=0;x--)(d=c[x])&&(L=(_<3?d(L):_>3?d(m,p,L):d(m,p))||L);return _>3&&L&&Object.defineProperty(m,p,L),L},u=this&&this.__param||function(c,m){return function(p,w){m(p,w,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const l=r(6193),g=r(8460),S=r(844),v=r(5596),s=r(3656),e=r(2585),a=r(4725),f=r(7226);let n=class extends S.Disposable{constructor(c,m,p,w,d,_,L,x){if(super(),this._rowCount=c,this._charSizeService=w,this._pausedResizeTask=new f.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.dispose()}}),this._renderDebouncer=new l.RenderDebouncer(L.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(_.onResize(()=>this._fullRefresh())),this.register(_.buffers.onBufferActivate(()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(d.onDecorationRegistered(()=>this._fullRefresh())),this.register(d.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(_.cols,_.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(_.buffer.y,_.buffer.y,!0))),this.register((0,s.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(x.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const T=new L.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(m),this.register({dispose:()=>T.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(c,m,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,m,this._rowCount))}_renderRows(c,m){this._renderer&&(this._renderer.renderRows(c,m),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:c,end:m}),this._onRender.fire({start:c,end:m}),this._isNextRenderRedrawOnly=!0)}resize(c,m){this._rowCount=m,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(c){var m;(m=this._renderer)===null||m===void 0||m.dispose(),this._renderer=c,this._renderer.onRequestRedraw(p=>this.refreshRows(p.start,p.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(c){return this._renderDebouncer.addRefreshCallback(c)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var c,m;this._renderer&&((m=(c=this._renderer).clearTextureAtlas)===null||m===void 0||m.call(c),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(c,m){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(c,m)):this._renderer.handleResize(c,m),this._fullRefresh())}handleCharSizeChanged(){var c;(c=this._renderer)===null||c===void 0||c.handleCharSizeChanged()}handleBlur(){var c;(c=this._renderer)===null||c===void 0||c.handleBlur()}handleFocus(){var c;(c=this._renderer)===null||c===void 0||c.handleFocus()}handleSelectionChanged(c,m,p){var w;this._selectionState.start=c,this._selectionState.end=m,this._selectionState.columnSelectMode=p,(w=this._renderer)===null||w===void 0||w.handleSelectionChanged(c,m,p)}handleCursorMove(){var c;(c=this._renderer)===null||c===void 0||c.handleCursorMove()}clear(){var c;(c=this._renderer)===null||c===void 0||c.clear()}};n=h([u(2,e.IOptionsService),u(3,a.ICharSizeService),u(4,e.IDecorationService),u(5,e.IBufferService),u(6,a.ICoreBrowserService),u(7,a.IThemeService)],n),i.RenderService=n},9312:function(R,i,r){var h=this&&this.__decorate||function(d,_,L,x){var T,M=arguments.length,H=M<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(d,_,L,x);else for(var $=d.length-1;$>=0;$--)(T=d[$])&&(H=(M<3?T(H):M>3?T(_,L,H):T(_,L))||H);return M>3&&H&&Object.defineProperty(_,L,H),H},u=this&&this.__param||function(d,_){return function(L,x){_(L,x,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const l=r(6114),g=r(456),S=r(511),v=r(8460),s=r(4725),e=r(2585),a=r(9806),f=r(9504),n=r(844),c=r(4841),m=String.fromCharCode(160),p=new RegExp(m,"g");let w=class extends n.Disposable{constructor(d,_,L,x,T,M,H,$,N){super(),this._element=d,this._screenElement=_,this._linkifier=L,this._bufferService=x,this._coreService=T,this._mouseService=M,this._optionsService=H,this._renderService=$,this._coreBrowserService=N,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new S.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=y=>this._handleMouseMove(y),this._mouseUpListener=y=>this._handleMouseUp(y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(y=>this._handleTrim(y)),this.register(this._bufferService.buffers.onBufferActivate(y=>this._handleBufferActivate(y))),this.enable(),this._model=new g.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const d=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;return!(!d||!_||d[0]===_[0]&&d[1]===_[1])}get selectionText(){const d=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;if(!d||!_)return"";const L=this._bufferService.buffer,x=[];if(this._activeSelectionMode===3){if(d[0]===_[0])return"";const T=d[0]<_[0]?d[0]:_[0],M=d[0]<_[0]?_[0]:d[0];for(let H=d[1];H<=_[1];H++){const $=L.translateBufferLineToString(H,!0,T,M);x.push($)}}else{const T=d[1]===_[1]?_[0]:void 0;x.push(L.translateBufferLineToString(d[1],!0,d[0],T));for(let M=d[1]+1;M<=_[1]-1;M++){const H=L.lines.get(M),$=L.translateBufferLineToString(M,!0);H!=null&&H.isWrapped?x[x.length-1]+=$:x.push($)}if(d[1]!==_[1]){const M=L.lines.get(_[1]),H=L.translateBufferLineToString(_[1],!0,0,_[0]);M&&M.isWrapped?x[x.length-1]+=H:x.push(H)}}return x.map(T=>T.replace(p," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(d){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(d){const _=this._getMouseBufferCoords(d),L=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!!(L&&x&&_)&&this._areCoordsInSelection(_,L,x)}isCellInSelection(d,_){const L=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!L||!x)&&this._areCoordsInSelection([d,_],L,x)}_areCoordsInSelection(d,_,L){return d[1]>_[1]&&d[1]<L[1]||_[1]===L[1]&&d[1]===_[1]&&d[0]>=_[0]&&d[0]<L[0]||_[1]<L[1]&&d[1]===L[1]&&d[0]<L[0]||_[1]<L[1]&&d[1]===_[1]&&d[0]>=_[0]}_selectWordAtCursor(d,_){var L,x;const T=(x=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||x===void 0?void 0:x.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(d);return!!M&&(this._selectWordAt(M,_),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(d,_){this._model.clearSelection(),d=Math.max(d,0),_=Math.min(_,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,_],this.refresh(),this._onSelectionChange.fire()}_handleTrim(d){this._model.handleTrim(d)&&this.refresh()}_getMouseBufferCoords(d){const _=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(_)return _[0]--,_[1]--,_[1]+=this._bufferService.buffer.ydisp,_}_getMouseEventScrollAmount(d){let _=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,d,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return _>=0&&_<=L?0:(_>L&&(_-=L),_=Math.min(Math.max(_,-50),50),_/=50,_/Math.abs(_)+Math.round(14*_))}shouldForceSelection(d){return l.isMac?d.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:d.shiftKey}handleMouseDown(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._handleIncrementalClick(d):d.detail===1?this._handleSingleClick(d):d.detail===2?this._handleDoubleClick(d):d.detail===3&&this._handleTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))}_handleSingleClick(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const _=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);_&&_.length!==this._model.selectionStart[0]&&_.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(d){this._selectWordAtCursor(d,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(d){const _=this._getMouseBufferCoords(d);_&&(this._activeSelectionMode=2,this._selectLineAt(_[1]))}shouldColumnSelect(d){return d.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(d){if(d.stopImmediatePropagation(),!this._model.selectionStart)return;const _=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const x=L.lines.get(this._model.selectionEnd[1]);x&&x.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}_&&_[0]===this._model.selectionEnd[0]&&_[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}}_handleMouseUp(d){const _=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&_<500&&d.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const x=(0,f.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(x,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const d=this._model.finalSelectionStart,_=this._model.finalSelectionEnd,L=!(!d||!_||d[0]===_[0]&&d[1]===_[1]);L?d&&_&&(this._oldSelectionStart&&this._oldSelectionEnd&&d[0]===this._oldSelectionStart[0]&&d[1]===this._oldSelectionStart[1]&&_[0]===this._oldSelectionEnd[0]&&_[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(d,_,L)):this._oldHasSelection&&this._fireOnSelectionChange(d,_,L)}_fireOnSelectionChange(d,_,L){this._oldSelectionStart=d,this._oldSelectionEnd=_,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(d){this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(_=>this._handleTrim(_))}_convertViewportColToCharacterIndex(d,_){let L=_;for(let x=0;_>=x;x++){const T=d.loadCell(x,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:T>1&&_!==x&&(L+=T-1)}return L}setSelection(d,_,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,_],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(d){this._isClickInSelection(d)||(this._selectWordAtCursor(d,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(d,_,L=!0,x=!0){if(d[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,M=T.lines.get(d[1]);if(!M)return;const H=T.translateBufferLineToString(d[1],!1);let $=this._convertViewportColToCharacterIndex(M,d[0]),N=$;const y=d[0]-$;let D=0,B=0,O=0,j=0;if(H.charAt($)===" "){for(;$>0&&H.charAt($-1)===" ";)$--;for(;N<H.length&&H.charAt(N+1)===" ";)N++}else{let Y=d[0],te=d[0];M.getWidth(Y)===0&&(D++,Y--),M.getWidth(te)===2&&(B++,te++);const P=M.getString(te).length;for(P>1&&(j+=P-1,N+=P-1);Y>0&&$>0&&!this._isCharWordSeparator(M.loadCell(Y-1,this._workCell));){M.loadCell(Y-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(D++,Y--):I>1&&(O+=I-1,$-=I-1),$--,Y--}for(;te<M.length&&N+1<H.length&&!this._isCharWordSeparator(M.loadCell(te+1,this._workCell));){M.loadCell(te+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,te++):I>1&&(j+=I-1,N+=I-1),N++,te++}}N++;let X=$+y-D+O,re=Math.min(this._bufferService.cols,N-$+D+B-O-j);if(_||H.slice($,N).trim()!==""){if(L&&X===0&&M.getCodePoint(0)!==32){const Y=T.lines.get(d[1]-1);if(Y&&M.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const te=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(te){const P=this._bufferService.cols-te.start;X-=P,re+=P}}}if(x&&X+re===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){const Y=T.lines.get(d[1]+1);if(Y!=null&&Y.isWrapped&&Y.getCodePoint(0)!==32){const te=this._getWordAt([0,d[1]+1],!1,!1,!0);te&&(re+=te.length)}}return{start:X,length:re}}}_selectWordAt(d,_){const L=this._getWordAt(d,_);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[L.start,d[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(d){const _=this._getWordAt(d,!0);if(_){let L=d[1];for(;_.start<0;)_.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;_.start+_.length>this._bufferService.cols;)_.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?_.start:_.start+_.length,L]}}_isCharWordSeparator(d){return d.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(d.getChars())>=0}_selectLineAt(d){const _=this._bufferService.buffer.getWrappedRangeForLine(d),L={start:{x:0,y:_.first},end:{x:this._bufferService.cols-1,y:_.last}};this._model.selectionStart=[0,_.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(L,this._bufferService.cols)}};w=h([u(3,e.IBufferService),u(4,e.ICoreService),u(5,s.IMouseService),u(6,e.IOptionsService),u(7,s.IRenderService),u(8,s.ICoreBrowserService)],w),i.SelectionService=w},4725:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=r(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(R,i,r){var h=this&&this.__decorate||function(w,d,_,L){var x,T=arguments.length,M=T<3?d:L===null?L=Object.getOwnPropertyDescriptor(d,_):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(w,d,_,L);else for(var H=w.length-1;H>=0;H--)(x=w[H])&&(M=(T<3?x(M):T>3?x(d,_,M):x(d,_))||M);return T>3&&M&&Object.defineProperty(d,_,M),M},u=this&&this.__param||function(w,d){return function(_,L){d(_,L,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=r(7239),g=r(8055),S=r(8460),v=r(844),s=r(2585),e=g.css.toColor("#ffffff"),a=g.css.toColor("#000000"),f=g.css.toColor("#ffffff"),n=g.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],d=[0,95,135,175,215,255];for(let _=0;_<216;_++){const L=d[_/36%6|0],x=d[_/6%6|0],T=d[_%6];w.push({css:g.channels.toCss(L,x,T),rgba:g.channels.toRgba(L,x,T)})}for(let _=0;_<24;_++){const L=8+10*_;w.push({css:g.channels.toCss(L,L,L),rgba:g.channels.toRgba(L,L,L)})}return w})());let m=class extends v.Disposable{constructor(w){super(),this._optionsService=w,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new l.ColorContrastCache,this._colors={foreground:e,background:a,cursor:f,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:c,selectionBackgroundOpaque:g.color.blend(a,c),selectionInactiveBackgroundTransparent:c,selectionInactiveBackgroundOpaque:g.color.blend(a,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(w={}){const d=this._colors;if(d.foreground=p(w.foreground,e),d.background=p(w.background,a),d.cursor=p(w.cursor,f),d.cursorAccent=p(w.cursorAccent,n),d.selectionBackgroundTransparent=p(w.selectionBackground,c),d.selectionBackgroundOpaque=g.color.blend(d.background,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundTransparent=p(w.selectionInactiveBackground,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundOpaque=g.color.blend(d.background,d.selectionInactiveBackgroundTransparent),d.selectionForeground=w.selectionForeground?p(w.selectionForeground,g.NULL_COLOR):void 0,d.selectionForeground===g.NULL_COLOR&&(d.selectionForeground=void 0),g.color.isOpaque(d.selectionBackgroundTransparent)&&(d.selectionBackgroundTransparent=g.color.opacity(d.selectionBackgroundTransparent,.3)),g.color.isOpaque(d.selectionInactiveBackgroundTransparent)&&(d.selectionInactiveBackgroundTransparent=g.color.opacity(d.selectionInactiveBackgroundTransparent,.3)),d.ansi=i.DEFAULT_ANSI_COLORS.slice(),d.ansi[0]=p(w.black,i.DEFAULT_ANSI_COLORS[0]),d.ansi[1]=p(w.red,i.DEFAULT_ANSI_COLORS[1]),d.ansi[2]=p(w.green,i.DEFAULT_ANSI_COLORS[2]),d.ansi[3]=p(w.yellow,i.DEFAULT_ANSI_COLORS[3]),d.ansi[4]=p(w.blue,i.DEFAULT_ANSI_COLORS[4]),d.ansi[5]=p(w.magenta,i.DEFAULT_ANSI_COLORS[5]),d.ansi[6]=p(w.cyan,i.DEFAULT_ANSI_COLORS[6]),d.ansi[7]=p(w.white,i.DEFAULT_ANSI_COLORS[7]),d.ansi[8]=p(w.brightBlack,i.DEFAULT_ANSI_COLORS[8]),d.ansi[9]=p(w.brightRed,i.DEFAULT_ANSI_COLORS[9]),d.ansi[10]=p(w.brightGreen,i.DEFAULT_ANSI_COLORS[10]),d.ansi[11]=p(w.brightYellow,i.DEFAULT_ANSI_COLORS[11]),d.ansi[12]=p(w.brightBlue,i.DEFAULT_ANSI_COLORS[12]),d.ansi[13]=p(w.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),d.ansi[14]=p(w.brightCyan,i.DEFAULT_ANSI_COLORS[14]),d.ansi[15]=p(w.brightWhite,i.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const _=Math.min(d.ansi.length-16,w.extendedAnsi.length);for(let L=0;L<_;L++)d.ansi[L+16]=p(w.extendedAnsi[L],i.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let d=0;d<this._restoreColors.ansi.length;++d)this._colors.ansi[d]=this._restoreColors.ansi[d]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function p(w,d){if(w!==void 0)try{return g.css.toColor(w)}catch{}return d}m=h([u(0,s.IOptionsService)],m),i.ThemeService=m},6349:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=r(8460),u=r(844);class l extends u.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const v=new Array(S);for(let s=0;s<Math.min(S,this.length);s++)v[s]=this._array[this._getCyclicIndex(s)];this._array=v,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let v=this._length;v<S;v++)this._array[v]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,v){this._array[this._getCyclicIndex(S)]=v}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,v,...s){if(v){for(let e=S;e<this._length-v;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+v)];this._length-=v,this.onDeleteEmitter.fire({index:S,amount:v})}for(let e=this._length-1;e>=S;e--)this._array[this._getCyclicIndex(e+s.length)]=this._array[this._getCyclicIndex(e)];for(let e=0;e<s.length;e++)this._array[this._getCyclicIndex(S+e)]=s[e];if(s.length&&this.onInsertEmitter.fire({index:S,amount:s.length}),this._length+s.length>this._maxLength){const e=this._length+s.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=s.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,v,s){if(!(v<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+s<0)throw new Error("Cannot shift elements in list beyond index 0");if(s>0){for(let a=v-1;a>=0;a--)this.set(S+a+s,this.get(S+a));const e=S+v+s-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let e=0;e<v;e++)this.set(S+e+s,this.get(S+e))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=l},1439:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function r(h,u=5){if(typeof h!="object")return h;const l=Array.isArray(h)?[]:{};for(const g in h)l[g]=u<=1?h[g]:h[g]&&r(h[g],u-1);return l}},8055:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=r(6114);let u=0,l=0,g=0,S=0;var v,s,e;function a(n){const c=n.toString(16);return c.length<2?"0"+c:c}function f(n,c){return n<c?(c+.05)/(n+.05):(n+.05)/(c+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(c,m,p,w){return w!==void 0?`#${a(c)}${a(m)}${a(p)}${a(w)}`:`#${a(c)}${a(m)}${a(p)}`},n.toRgba=function(c,m,p,w=255){return(c<<24|m<<16|p<<8|w)>>>0}}(v=i.channels||(i.channels={})),function(n){function c(m,p){return S=Math.round(255*p),[u,l,g]=e.toChannels(m.rgba),{css:v.toCss(u,l,g,S),rgba:v.toRgba(u,l,g,S)}}n.blend=function(m,p){if(S=(255&p.rgba)/255,S===1)return{css:p.css,rgba:p.rgba};const w=p.rgba>>24&255,d=p.rgba>>16&255,_=p.rgba>>8&255,L=m.rgba>>24&255,x=m.rgba>>16&255,T=m.rgba>>8&255;return u=L+Math.round((w-L)*S),l=x+Math.round((d-x)*S),g=T+Math.round((_-T)*S),{css:v.toCss(u,l,g),rgba:v.toRgba(u,l,g)}},n.isOpaque=function(m){return(255&m.rgba)==255},n.ensureContrastRatio=function(m,p,w){const d=e.ensureContrastRatio(m.rgba,p.rgba,w);if(d)return e.toColor(d>>24&255,d>>16&255,d>>8&255)},n.opaque=function(m){const p=(255|m.rgba)>>>0;return[u,l,g]=e.toChannels(p),{css:v.toCss(u,l,g),rgba:p}},n.opacity=c,n.multiplyOpacity=function(m,p){return S=255&m.rgba,c(m,S*p/255)},n.toColorRGB=function(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}}(i.color||(i.color={})),function(n){let c,m;if(!h.isNode){const p=document.createElement("canvas");p.width=1,p.height=1;const w=p.getContext("2d",{willReadFrequently:!0});w&&(c=w,c.globalCompositeOperation="copy",m=c.createLinearGradient(0,0,1,1))}n.toColor=function(p){if(p.match(/#[\da-f]{3,8}/i))switch(p.length){case 4:return u=parseInt(p.slice(1,2).repeat(2),16),l=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),e.toColor(u,l,g);case 5:return u=parseInt(p.slice(1,2).repeat(2),16),l=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),S=parseInt(p.slice(4,5).repeat(2),16),e.toColor(u,l,g,S);case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}const w=p.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),l=parseInt(w[2]),g=parseInt(w[3]),S=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),e.toColor(u,l,g,S);if(!c||!m)throw new Error("css.toColor: Unsupported css format");if(c.fillStyle=m,c.fillStyle=p,typeof c.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(c.fillRect(0,0,1,1),[u,l,g,S]=c.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,l,g,S),css:p}}}(i.css||(i.css={})),function(n){function c(m,p,w){const d=m/255,_=p/255,L=w/255;return .2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}n.relativeLuminance=function(m){return c(m>>16&255,m>>8&255,255&m)},n.relativeLuminance2=c}(s=i.rgb||(i.rgb={})),function(n){function c(p,w,d){const _=p>>24&255,L=p>>16&255,x=p>>8&255;let T=w>>24&255,M=w>>16&255,H=w>>8&255,$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));for(;$<d&&(T>0||M>0||H>0);)T-=Math.max(0,Math.ceil(.1*T)),M-=Math.max(0,Math.ceil(.1*M)),H-=Math.max(0,Math.ceil(.1*H)),$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));return(T<<24|M<<16|H<<8|255)>>>0}function m(p,w,d){const _=p>>24&255,L=p>>16&255,x=p>>8&255;let T=w>>24&255,M=w>>16&255,H=w>>8&255,$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));for(;$<d&&(T<255||M<255||H<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),M=Math.min(255,M+Math.ceil(.1*(255-M))),H=Math.min(255,H+Math.ceil(.1*(255-H))),$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));return(T<<24|M<<16|H<<8|255)>>>0}n.ensureContrastRatio=function(p,w,d){const _=s.relativeLuminance(p>>8),L=s.relativeLuminance(w>>8);if(f(_,L)<d){if(L<_){const M=c(p,w,d),H=f(_,s.relativeLuminance(M>>8));if(H<d){const $=m(p,w,d);return H>f(_,s.relativeLuminance($>>8))?M:$}return M}const x=m(p,w,d),T=f(_,s.relativeLuminance(x>>8));if(T<d){const M=c(p,w,d);return T>f(_,s.relativeLuminance(M>>8))?x:M}return x}},n.reduceLuminance=c,n.increaseLuminance=m,n.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},n.toColor=function(p,w,d,_){return{css:v.toCss(p,w,d,_),rgba:v.toRgba(p,w,d,_)}}}(e=i.rgba||(i.rgba={})),i.toPaddedHex=a,i.contrastRatio=f},8969:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=r(844),u=r(2585),l=r(4348),g=r(7866),S=r(744),v=r(7302),s=r(6975),e=r(8460),a=r(1753),f=r(1480),n=r(7994),c=r(9282),m=r(5435),p=r(5981),w=r(2660);let d=!1;class _ extends h.Disposable{constructor(x){super(),this._onBinary=this.register(new e.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new e.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new e.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new e.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new e.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new e.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new v.OptionsService(x)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(s.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new m.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,e.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,e.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,e.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,e.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",T=>this._handleWindowsModeOptionChange(T))),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new p.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,e.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,h.toDisposable)(()=>{var T;(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new e.EventEmitter),this._onScroll.event(x=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(x.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(x){for(const T in x)this.optionsService.options[T]=x[T]}write(x,T){this._writeBuffer.write(x,T)}writeSync(x,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!d&&(this._logService.warn("writeSync is unreliable and will be removed soon."),d=!0),this._writeBuffer.writeSync(x,T)}resize(x,T){isNaN(x)||isNaN(T)||(x=Math.max(x,S.MINIMUM_COLS),T=Math.max(T,S.MINIMUM_ROWS),this._bufferService.resize(x,T))}scroll(x,T=!1){this._bufferService.scroll(x,T)}scrollLines(x,T,M){this._bufferService.scrollLines(x,T,M)}scrollPages(x){this._bufferService.scrollPages(x)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(x){this._bufferService.scrollToLine(x)}registerEscHandler(x,T){return this._inputHandler.registerEscHandler(x,T)}registerDcsHandler(x,T){return this._inputHandler.registerDcsHandler(x,T)}registerCsiHandler(x,T){return this._inputHandler.registerCsiHandler(x,T)}registerOscHandler(x,T){return this._inputHandler.registerOscHandler(x,T)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(x){var T;x?this._enableWindowsMode():((T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){const x=[];x.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),x.push(this.registerCsiHandler({final:"H"},()=>((0,c.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(const T of x)T.dispose()}}}}}i.CoreTerminal=_},8460:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===r)return void this._listeners.splice(h,1)}}})),this._event}fire(r,h){const u=[];for(let l=0;l<this._listeners.length;l++)u.push(this._listeners[l]);for(let l=0;l<u.length;l++)u[l].call(void 0,r,h)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},i.forwardEvent=function(r,h){return r(u=>h.fire(u))}},5435:function(R,i,r){var h=this&&this.__decorate||function(N,y,D,B){var O,j=arguments.length,X=j<3?y:B===null?B=Object.getOwnPropertyDescriptor(y,D):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(N,y,D,B);else for(var re=N.length-1;re>=0;re--)(O=N[re])&&(X=(j<3?O(X):j>3?O(y,D,X):O(y,D))||X);return j>3&&X&&Object.defineProperty(y,D,X),X},u=this&&this.__param||function(N,y){return function(D,B){y(D,B,N)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const l=r(2584),g=r(7116),S=r(2015),v=r(844),s=r(482),e=r(8437),a=r(8460),f=r(643),n=r(511),c=r(3734),m=r(2585),p=r(6242),w=r(6351),d=r(5941),_={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function x(N,y){if(N>24)return y.setWinLines||!1;switch(N){case 1:return!!y.restoreWin;case 2:return!!y.minimizeWin;case 3:return!!y.setWinPosition;case 4:return!!y.setWinSizePixels;case 5:return!!y.raiseWin;case 6:return!!y.lowerWin;case 7:return!!y.refreshWin;case 8:return!!y.setWinSizeChars;case 9:return!!y.maximizeWin;case 10:return!!y.fullscreenWin;case 11:return!!y.getWinState;case 13:return!!y.getWinPosition;case 14:return!!y.getWinSizePixels;case 15:return!!y.getScreenSizePixels;case 16:return!!y.getCellSizePixels;case 18:return!!y.getWinSizeChars;case 19:return!!y.getScreenSizeChars;case 20:return!!y.getIconTitle;case 21:return!!y.getWinTitle;case 22:return!!y.pushTitle;case 23:return!!y.popTitle;case 24:return!!y.setWinLines}return!1}var T;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));let M=0;class H extends v.Disposable{constructor(y,D,B,O,j,X,re,Y,te=new S.EscapeSequenceParser){super(),this._bufferService=y,this._charsetService=D,this._coreService=B,this._logService=O,this._optionsService=j,this._oscLinkService=X,this._coreMouseService=re,this._unicodeService=Y,this._parser=te,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new s.StringToUtf32,this._utf8Decoder=new s.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(P=>this._activeBuffer=P.activeBuffer)),this._parser.setCsiHandlerFallback((P,I)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(P),params:I.toArray()})}),this._parser.setEscHandlerFallback(P=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(P)})}),this._parser.setExecuteHandlerFallback(P=>{this._logService.debug("Unknown EXECUTE code: ",{code:P})}),this._parser.setOscHandlerFallback((P,I,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:P,action:I,data:U})}),this._parser.setDcsHandlerFallback((P,I,U)=>{I==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(P),action:I,payload:U})}),this._parser.setPrintHandler((P,I,U)=>this.print(P,I,U)),this._parser.registerCsiHandler({final:"@"},P=>this.insertChars(P)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},P=>this.scrollLeft(P)),this._parser.registerCsiHandler({final:"A"},P=>this.cursorUp(P)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},P=>this.scrollRight(P)),this._parser.registerCsiHandler({final:"B"},P=>this.cursorDown(P)),this._parser.registerCsiHandler({final:"C"},P=>this.cursorForward(P)),this._parser.registerCsiHandler({final:"D"},P=>this.cursorBackward(P)),this._parser.registerCsiHandler({final:"E"},P=>this.cursorNextLine(P)),this._parser.registerCsiHandler({final:"F"},P=>this.cursorPrecedingLine(P)),this._parser.registerCsiHandler({final:"G"},P=>this.cursorCharAbsolute(P)),this._parser.registerCsiHandler({final:"H"},P=>this.cursorPosition(P)),this._parser.registerCsiHandler({final:"I"},P=>this.cursorForwardTab(P)),this._parser.registerCsiHandler({final:"J"},P=>this.eraseInDisplay(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},P=>this.eraseInDisplay(P,!0)),this._parser.registerCsiHandler({final:"K"},P=>this.eraseInLine(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},P=>this.eraseInLine(P,!0)),this._parser.registerCsiHandler({final:"L"},P=>this.insertLines(P)),this._parser.registerCsiHandler({final:"M"},P=>this.deleteLines(P)),this._parser.registerCsiHandler({final:"P"},P=>this.deleteChars(P)),this._parser.registerCsiHandler({final:"S"},P=>this.scrollUp(P)),this._parser.registerCsiHandler({final:"T"},P=>this.scrollDown(P)),this._parser.registerCsiHandler({final:"X"},P=>this.eraseChars(P)),this._parser.registerCsiHandler({final:"Z"},P=>this.cursorBackwardTab(P)),this._parser.registerCsiHandler({final:"`"},P=>this.charPosAbsolute(P)),this._parser.registerCsiHandler({final:"a"},P=>this.hPositionRelative(P)),this._parser.registerCsiHandler({final:"b"},P=>this.repeatPrecedingCharacter(P)),this._parser.registerCsiHandler({final:"c"},P=>this.sendDeviceAttributesPrimary(P)),this._parser.registerCsiHandler({prefix:">",final:"c"},P=>this.sendDeviceAttributesSecondary(P)),this._parser.registerCsiHandler({final:"d"},P=>this.linePosAbsolute(P)),this._parser.registerCsiHandler({final:"e"},P=>this.vPositionRelative(P)),this._parser.registerCsiHandler({final:"f"},P=>this.hVPosition(P)),this._parser.registerCsiHandler({final:"g"},P=>this.tabClear(P)),this._parser.registerCsiHandler({final:"h"},P=>this.setMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"h"},P=>this.setModePrivate(P)),this._parser.registerCsiHandler({final:"l"},P=>this.resetMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"l"},P=>this.resetModePrivate(P)),this._parser.registerCsiHandler({final:"m"},P=>this.charAttributes(P)),this._parser.registerCsiHandler({final:"n"},P=>this.deviceStatus(P)),this._parser.registerCsiHandler({prefix:"?",final:"n"},P=>this.deviceStatusPrivate(P)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},P=>this.softReset(P)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},P=>this.setCursorStyle(P)),this._parser.registerCsiHandler({final:"r"},P=>this.setScrollRegion(P)),this._parser.registerCsiHandler({final:"s"},P=>this.saveCursor(P)),this._parser.registerCsiHandler({final:"t"},P=>this.windowOptions(P)),this._parser.registerCsiHandler({final:"u"},P=>this.restoreCursor(P)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},P=>this.insertColumns(P)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},P=>this.deleteColumns(P)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},P=>this.selectProtected(P)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},P=>this.requestMode(P,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},P=>this.requestMode(P,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new p.OscHandler(P=>(this.setTitle(P),this.setIconName(P),!0))),this._parser.registerOscHandler(1,new p.OscHandler(P=>this.setIconName(P))),this._parser.registerOscHandler(2,new p.OscHandler(P=>this.setTitle(P))),this._parser.registerOscHandler(4,new p.OscHandler(P=>this.setOrReportIndexedColor(P))),this._parser.registerOscHandler(8,new p.OscHandler(P=>this.setHyperlink(P))),this._parser.registerOscHandler(10,new p.OscHandler(P=>this.setOrReportFgColor(P))),this._parser.registerOscHandler(11,new p.OscHandler(P=>this.setOrReportBgColor(P))),this._parser.registerOscHandler(12,new p.OscHandler(P=>this.setOrReportCursorColor(P))),this._parser.registerOscHandler(104,new p.OscHandler(P=>this.restoreIndexedColor(P))),this._parser.registerOscHandler(110,new p.OscHandler(P=>this.restoreFgColor(P))),this._parser.registerOscHandler(111,new p.OscHandler(P=>this.restoreBgColor(P))),this._parser.registerOscHandler(112,new p.OscHandler(P=>this.restoreCursorColor(P))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const P in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:P},()=>this.selectCharset("("+P)),this._parser.registerEscHandler({intermediates:")",final:P},()=>this.selectCharset(")"+P)),this._parser.registerEscHandler({intermediates:"*",final:P},()=>this.selectCharset("*"+P)),this._parser.registerEscHandler({intermediates:"+",final:P},()=>this.selectCharset("+"+P)),this._parser.registerEscHandler({intermediates:"-",final:P},()=>this.selectCharset("-"+P)),this._parser.registerEscHandler({intermediates:".",final:P},()=>this.selectCharset("."+P)),this._parser.registerEscHandler({intermediates:"/",final:P},()=>this.selectCharset("/"+P));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(P=>(this._logService.error("Parsing error: ",P),P)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((P,I)=>this.requestStatusString(P,I)))}getAttrData(){return this._curAttrData}_preserveStack(y,D,B,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=y,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=B,this._parseStack.position=O}_logSlowResolvingAsync(y){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([y,new Promise((D,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(y,D){let B,O=this._activeBuffer.x,j=this._activeBuffer.y,X=0;const re=this._parseStack.paused;if(re){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(B),B;O=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,y.length>L&&(X=this._parseStack.position+L)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof y=="string"?` "${y}"`:` "${Array.prototype.map.call(y,Y=>String.fromCharCode(Y)).join("")}"`),typeof y=="string"?y.split("").map(Y=>Y.charCodeAt(0)):y),this._parseBuffer.length<y.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(y.length,L))),re||this._dirtyRowTracker.clearRange(),y.length>L)for(let Y=X;Y<y.length;Y+=L){const te=Y+L<y.length?Y+L:y.length,P=typeof y=="string"?this._stringDecoder.decode(y.substring(Y,te),this._parseBuffer):this._utf8Decoder.decode(y.subarray(Y,te),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,P))return this._preserveStack(O,j,P,Y),this._logSlowResolvingAsync(B),B}else if(!re){const Y=typeof y=="string"?this._stringDecoder.decode(y,this._parseBuffer):this._utf8Decoder.decode(y,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(O,j,Y,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===O&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(y,D,B){let O,j;const X=this._charsetService.charset,re=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,te=this._coreService.decPrivateModes.wraparound,P=this._coreService.modes.insertMode,I=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-D>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,I.fg,I.bg,I.extended);for(let V=D;V<B;++V){if(O=y[V],j=this._unicodeService.wcwidth(O),O<127&&X){const Q=X[String.fromCharCode(O)];Q&&(O=Q.charCodeAt(0))}if(re&&this._onA11yChar.fire((0,s.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=Y){if(te){for(;this._activeBuffer.x<Y;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,I.fg,I.bg,I.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,j===2)continue}if(P&&(U.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(I),I),U.getWidth(Y-1)===2&&U.setCellFromCodePoint(Y-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,I.fg,I.bg,I.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,O,j,I.fg,I.bg,I.extended),j>0)for(;--j;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,I.fg,I.bg,I.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,O):U.addCodepointToCell(this._activeBuffer.x-2,O)}B-D>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&B-D>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,I.fg,I.bg,I.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(y,D){return y.final!=="t"||y.prefix||y.intermediates?this._parser.registerCsiHandler(y,D):this._parser.registerCsiHandler(y,B=>!x(B.params[0],this._optionsService.rawOptions.windowOptions)||D(B))}registerDcsHandler(y,D){return this._parser.registerDcsHandler(y,new w.DcsHandler(D))}registerEscHandler(y,D){return this._parser.registerEscHandler(y,D)}registerOscHandler(y,D){return this._parser.registerOscHandler(y,new p.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var y;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||y===void 0)&&y.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const y=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-y),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(y=this._bufferService.cols-1){this._activeBuffer.x=Math.min(y,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(y,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=y,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=y,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(y,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+y,this._activeBuffer.y+D)}cursorUp(y){const D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,y.params[0]||1)):this._moveCursor(0,-(y.params[0]||1)),!0}cursorDown(y){const D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,y.params[0]||1)):this._moveCursor(0,y.params[0]||1),!0}cursorForward(y){return this._moveCursor(y.params[0]||1,0),!0}cursorBackward(y){return this._moveCursor(-(y.params[0]||1),0),!0}cursorNextLine(y){return this.cursorDown(y),this._activeBuffer.x=0,!0}cursorPrecedingLine(y){return this.cursorUp(y),this._activeBuffer.x=0,!0}cursorCharAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(y){return this._setCursor(y.length>=2?(y.params[1]||1)-1:0,(y.params[0]||1)-1),!0}charPosAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(y){return this._moveCursor(y.params[0]||1,0),!0}linePosAbsolute(y){return this._setCursor(this._activeBuffer.x,(y.params[0]||1)-1),!0}vPositionRelative(y){return this._moveCursor(0,y.params[0]||1),!0}hVPosition(y){return this.cursorPosition(y),!0}tabClear(y){const D=y.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=y.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=y.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(y){const D=y.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(y,D,B,O=!1,j=!1){const X=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);X.replaceCells(D,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),j),O&&(X.isWrapped=!1)}_resetBufferLine(y,D=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+y),B.isWrapped=!1}eraseInDisplay(y,D=!1){let B;switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);B<this._bufferService.rows;B++)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(y,D=!1){switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(y){this._restrictCursor();let D=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;D--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(y){this._restrictCursor();let D=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;D--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(y){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(y){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(y){let D=y.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(y){let D=y.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(e.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=y.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);O.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=y.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);O.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=y.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);O.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=y.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);O.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(y){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(y.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(y){if(!this._parser.precedingCodepoint)return!0;const D=y.params[0]||1,B=new Uint32Array(D);for(let O=0;O<D;++O)B[O]=this._parser.precedingCodepoint;return this.print(B,0,B.length),!0}sendDeviceAttributesPrimary(y){return y.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(y){return y.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(y.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(y){return(this._optionsService.rawOptions.termName+"").indexOf(y)===0}setMode(y){for(let D=0;D<y.length;D++)switch(y.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(y){for(let D=0;D<y.length;D++)switch(y.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(y){for(let D=0;D<y.length;D++)switch(y.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(y){for(let D=0;D<y.length;D++)switch(y.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),y.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(y,D){const B=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:j}=this._coreMouseService,X=this._coreService,{buffers:re,cols:Y}=this._bufferService,{active:te,alt:P}=re,I=this._optionsService.rawOptions,U=k=>k?1:2,V=y.params[0];return Q=V,_e=D?V===2?3:V===4?U(X.modes.insertMode):V===12?4:V===20?U(I.convertEol):0:V===1?U(B.applicationCursorKeys):V===3?I.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:V===6?U(B.origin):V===7?U(B.wraparound):V===8?3:V===9?U(O==="X10"):V===12?U(I.cursorBlink):V===25?U(!X.isCursorHidden):V===45?U(B.reverseWraparound):V===66?U(B.applicationKeypad):V===1e3?U(O==="VT200"):V===1002?U(O==="DRAG"):V===1003?U(O==="ANY"):V===1004?U(B.sendFocus):V===1005?4:V===1006?U(j==="SGR"):V===1015?4:V===1016?U(j==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?U(te===P):V===2004?U(B.bracketedPasteMode):0,X.triggerDataEvent(`${l.C0.ESC}[${D?"":"?"}${Q};${_e}$y`),!0;var Q,_e}_updateAttrColor(y,D,B,O,j){return D===2?(y|=50331648,y&=-16777216,y|=c.AttributeData.fromColorRGB([B,O,j])):D===5&&(y&=-50331904,y|=33554432|255&B),y}_extractColor(y,D,B){const O=[0,0,-1,0,0,0];let j=0,X=0;do{if(O[X+j]=y.params[D+X],y.hasSubParams(D+X)){const re=y.getSubParams(D+X);let Y=0;do O[1]===5&&(j=1),O[X+Y+1+j]=re[Y];while(++Y<re.length&&Y+X+1+j<O.length);break}if(O[1]===5&&X+j>=2||O[1]===2&&X+j>=5)break;O[1]&&(j=1)}while(++X+D<y.length&&X+j<O.length);for(let re=2;re<O.length;++re)O[re]===-1&&(O[re]=0);switch(O[0]){case 38:B.fg=this._updateAttrColor(B.fg,O[1],O[3],O[4],O[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,O[1],O[3],O[4],O[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,O[1],O[3],O[4],O[5])}return X}_processUnderline(y,D){D.extended=D.extended.clone(),(!~y||y>5)&&(y=1),D.extended.underlineStyle=y,D.fg|=268435456,y===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(y){y.fg=e.DEFAULT_ATTR_DATA.fg,y.bg=e.DEFAULT_ATTR_DATA.bg,y.extended=y.extended.clone(),y.extended.underlineStyle=0,y.extended.underlineColor&=-67108864,y.updateExtended()}charAttributes(y){if(y.length===1&&y.params[0]===0)return this._processSGR0(this._curAttrData),!0;const D=y.length;let B;const O=this._curAttrData;for(let j=0;j<D;j++)B=y.params[j],B>=30&&B<=37?(O.fg&=-50331904,O.fg|=16777216|B-30):B>=40&&B<=47?(O.bg&=-50331904,O.bg|=16777216|B-40):B>=90&&B<=97?(O.fg&=-50331904,O.fg|=16777224|B-90):B>=100&&B<=107?(O.bg&=-50331904,O.bg|=16777224|B-100):B===0?this._processSGR0(O):B===1?O.fg|=134217728:B===3?O.bg|=67108864:B===4?(O.fg|=268435456,this._processUnderline(y.hasSubParams(j)?y.getSubParams(j)[0]:1,O)):B===5?O.fg|=536870912:B===7?O.fg|=67108864:B===8?O.fg|=1073741824:B===9?O.fg|=2147483648:B===2?O.bg|=134217728:B===21?this._processUnderline(2,O):B===22?(O.fg&=-134217729,O.bg&=-134217729):B===23?O.bg&=-67108865:B===24?(O.fg&=-268435457,this._processUnderline(0,O)):B===25?O.fg&=-536870913:B===27?O.fg&=-67108865:B===28?O.fg&=-1073741825:B===29?O.fg&=2147483647:B===39?(O.fg&=-67108864,O.fg|=16777215&e.DEFAULT_ATTR_DATA.fg):B===49?(O.bg&=-67108864,O.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?j+=this._extractColor(y,j,O):B===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):B===100?(O.fg&=-67108864,O.fg|=16777215&e.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(y){switch(y.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const D=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${D};${B}R`)}return!0}deviceStatusPrivate(y){if(y.params[0]===6){const D=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${D};${B}R`)}return!0}softReset(y){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(y){const D=y.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=D%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(y){const D=y.params[0]||1;let B;return(y.length<2||(B=y.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(y){if(!x(y.params[0],this._optionsService.rawOptions.windowOptions))return!0;const D=y.length>1?y.params[1]:0;switch(y.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(y){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(y){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(y){return this._windowTitle=y,this._onTitleChange.fire(y),!0}setIconName(y){return this._iconName=y,!0}setOrReportIndexedColor(y){const D=[],B=y.split(";");for(;B.length>1;){const O=B.shift(),j=B.shift();if(/^\d+$/.exec(O)){const X=parseInt(O);if(0<=X&&X<256)if(j==="?")D.push({type:0,index:X});else{const re=(0,d.parseColor)(j);re&&D.push({type:1,index:X,color:re})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(y){const D=y.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(y,D){this._getCurrentLinkId()&&this._finishHyperlink();const B=y.split(":");let O;const j=B.findIndex(X=>X.startsWith("id="));return j!==-1&&(O=B[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(y,D){const B=y.split(";");for(let O=0;O<B.length&&!(D>=this._specialColors.length);++O,++D)if(B[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{const j=(0,d.parseColor)(B[O]);j&&this._onColor.fire([{type:1,index:this._specialColors[D],color:j}])}return!0}setOrReportFgColor(y){return this._setOrReportSpecialColor(y,0)}setOrReportBgColor(y){return this._setOrReportSpecialColor(y,1)}setOrReportCursorColor(y){return this._setOrReportSpecialColor(y,2)}restoreIndexedColor(y){if(!y)return this._onColor.fire([{type:2}]),!0;const D=[],B=y.split(";");for(let O=0;O<B.length;++O)if(/^\d+$/.exec(B[O])){const j=parseInt(B[O]);0<=j&&j<256&&D.push({type:2,index:j})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(y){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(y){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(y){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(y){return y.length!==2?(this.selectDefaultCharset(),!0):(y[0]==="/"||this._charsetService.setgCharset(_[y[0]],g.CHARSETS[y[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const y=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,y,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(y){return this._charsetService.setgLevel(y),!0}screenAlignmentPattern(){const y=new n.CellData;y.content=4194304|"E".charCodeAt(0),y.fg=this._curAttrData.fg,y.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){const B=this._activeBuffer.ybase+this._activeBuffer.y+D,O=this._activeBuffer.lines.get(B);O&&(O.fill(y),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(y,D){const B=this._bufferService.buffer,O=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${j}${l.C0.ESC}\\`),!0))(y==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:y==='"p'?'P1$r61;1"p':y==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:y==="m"?"P1$r0m":y===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(y,D){this._dirtyRowTracker.markRangeDirty(y,D)}}i.InputHandler=H;let $=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,y){N>y&&(M=N,N=y,y=M),N<this.start&&(this.start=N),y>this.end&&(this.end=y)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};$=h([u(0,m.IBufferService)],$)},844:(R,i)=>{function r(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=r,i.getDisposeArrayDisposable=function(h){return{dispose:()=>r(h)}}},1505:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,l,g){this._data[u]||(this._data[u]={}),this._data[u][l]=g}get(u,l){return this._data[u]?this._data[u][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=r,i.FourKeyMap=class{constructor(){this._data=new r}set(h,u,l,g,S){this._data.get(h,u)||this._data.set(h,u,new r),this._data.get(h,u).set(l,g,S)}get(h,u,l,g){var S;return(S=this._data.get(h,u))===null||S===void 0?void 0:S.get(l,g)}clear(){this._data.clear()}}},6114:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const r=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isLegacyEdge=r.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.getSafariVersion=function(){if(!i.isSafari)return 0;const u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(r)},6106:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let r=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(r=this._search(this._getKey(h),0,this._array.length-1),this._array.splice(r,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const u=this._getKey(h);if(u===void 0||(r=this._search(u,0,this._array.length-1),r===-1)||this._getKey(this._array[r])!==u)return!1;do if(this._array[r]===h)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===u);return!1}*getKeyIterator(h){if(this._array.length!==0&&(r=this._search(h,0,this._array.length-1),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===h))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===h)}forEachByKey(h,u){if(this._array.length!==0&&(r=this._search(h,0,this._array.length-1),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===h))do u(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===h)}values(){return this._array.values()}_search(h,u,l){if(l<u)return u;let g=Math.floor((u+l)/2);const S=this._getKey(this._array[g]);if(S>h)return this._search(h,u,g-1);if(S<h)return this._search(h,g+1,l);for(;g>0&&this._getKey(this._array[g-1])===h;)g--;return g}}},7226:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=r(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let v=0,s=0,e=S.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),s=Math.max(v,s),a=S.timeRemaining(),1.5*s>a)return e-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-v))}ms`),void this._start();e=a}this.clear()}}class l extends u{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const v=Date.now()+S;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=r(643);i.updateWindowsModeWrappedState=function(u){const l=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),g=l==null?void 0:l.get(u.cols-1),S=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);S&&g&&(S.isWrapped=g[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&g[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new r;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=r;class h{constructor(l=0,g=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=g}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=r(6349),u=r(8437),l=r(511),g=r(643),S=r(4634),v=r(4863),s=r(7116),e=r(3734),a=r(7226);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(n,c,m){this._hasScrollback=n,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new a.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new e.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new e.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,c){return new u.BufferLine(this._bufferService.cols,this.getNullCell(n),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const c=n+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=u.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,c){const m=this.getNullCell(u.DEFAULT_ATTR_DATA);let p=0;const w=this._getCorrectBufferLength(c);if(w>this.lines.maxLength&&(this.lines.maxLength=w),this.lines.length>0){if(this._cols<n)for(let _=0;_<this.lines.length;_++)p+=+this.lines.get(_).resize(n,m);let d=0;if(this._rows<c)for(let _=this._rows;_<c;_++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new u.BufferLine(n,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+d+1?(this.ybase--,d++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(n,m)));else for(let _=this._rows;_>c;_--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(w<this.lines.maxLength){const _=this.lines.length-w;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=w}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,c-1),d&&(this.y+=d),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(n,c),this._cols>n))for(let d=0;d<this.lines.length;d++)p+=+this.lines.get(d).resize(n,m);this._cols=n,this._rows=c,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return n}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,c){this._cols!==n&&(n>this._cols?this._reflowLarger(n,c):this._reflowSmaller(n,c))}_reflowLarger(n,c){const m=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(m.length>0){const p=(0,S.reflowLargerCreateNewLayout)(this.lines,m);(0,S.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(n,c,p.countRemoved)}}_reflowLargerAdjustViewport(n,c,m){const p=this.getNullCell(u.DEFAULT_ATTR_DATA);let w=m;for(;w-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new u.BufferLine(n,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(n,c){const m=this.getNullCell(u.DEFAULT_ATTR_DATA),p=[];let w=0;for(let d=this.lines.length-1;d>=0;d--){let _=this.lines.get(d);if(!_||!_.isWrapped&&_.getTrimmedLength()<=n)continue;const L=[_];for(;_.isWrapped&&d>0;)_=this.lines.get(--d),L.unshift(_);const x=this.ybase+this.y;if(x>=d&&x<d+L.length)continue;const T=L[L.length-1].getTrimmedLength(),M=(0,S.reflowSmallerGetNewLineLengths)(L,this._cols,n),H=M.length-L.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+H):Math.max(0,this.lines.length-this.lines.maxLength+H);const N=[];for(let X=0;X<H;X++){const re=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);N.push(re)}N.length>0&&(p.push({start:d+L.length+w,newLines:N}),w+=N.length),L.push(...N);let y=M.length-1,D=M[y];D===0&&(y--,D=M[y]);let B=L.length-H-1,O=T;for(;B>=0;){const X=Math.min(O,D);if(L[y]===void 0)break;if(L[y].copyCellsFrom(L[B],O-X,D-X,X,!0),D-=X,D===0&&(y--,D=M[y]),O-=X,O===0){B--;const re=Math.max(B,0);O=(0,S.getWrappedLineTrimmedLength)(L,re,this._cols)}}for(let X=0;X<L.length;X++)M[X]<n&&L[X].setCell(M[X],m);let j=H-$;for(;j-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+w)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+H,this.ybase+c-1)}if(p.length>0){const d=[],_=[];for(let y=0;y<this.lines.length;y++)_.push(this.lines.get(y));const L=this.lines.length;let x=L-1,T=0,M=p[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+w);let H=0;for(let y=Math.min(this.lines.maxLength-1,L+w-1);y>=0;y--)if(M&&M.start>x+H){for(let D=M.newLines.length-1;D>=0;D--)this.lines.set(y--,M.newLines[D]);y++,d.push({index:x+1,amount:M.newLines.length}),H+=M.newLines.length,M=p[++T]}else this.lines.set(y,_[x--]);let $=0;for(let y=d.length-1;y>=0;y--)d[y].index+=$,this.lines.onInsertEmitter.fire(d[y]),$+=d[y].amount;const N=Math.max(0,L+w-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}stringIndexToBufferIndex(n,c,m=!1){for(;c;){const p=this.lines.get(n);if(!p)return[-1,-1];const w=m?p.getTrimmedLength():p.length;for(let d=0;d<w;++d)if(p.get(d)[g.CHAR_DATA_WIDTH_INDEX]&&(c-=p.get(d)[g.CHAR_DATA_CHAR_INDEX].length||1),c<0)return[n,d];n++}return[n,0]}translateBufferLineToString(n,c,m=0,p){const w=this.lines.get(n);return w?w.translateToString(c,m,p):""}getWrappedRangeForLine(n){let c=n,m=n;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===n&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const c=new v.Marker(n);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}iterator(n,c,m,p,w){return new f(this,n,c,m,p,w)}};class f{constructor(c,m,p=0,w=c.lines.length,d=0,_=0){this._buffer=c,this._trimRight=m,this._startIndex=p,this._endIndex=w,this._startOverscan=d,this._endOverscan=_,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){const c=this._buffer.getWrappedRangeForLine(this._current);c.first<this._startIndex-this._startOverscan&&(c.first=this._startIndex-this._startOverscan),c.last>this._endIndex+this._endOverscan&&(c.last=this._endIndex+this._endOverscan),c.first=Math.max(c.first,0),c.last=Math.min(c.last,this._buffer.lines.length);let m="";for(let p=c.first;p<=c.last;++p)m+=this._buffer.translateBufferLineToString(p,this._trimRight);return this._current=c.last+1,{range:c,content:m}}}i.BufferStringIterator=f},8437:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=r(482),u=r(643),l=r(511),g=r(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new g.AttributeData);let S=0;class v{constructor(e,a,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const n=a||l.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let c=0;c<e;++c)this.setCell(c,n);this.length=e}get(e){const a=this._data[3*e+0],f=2097151&a;return[this._data[3*e+1],2097152&a?this._combined[e]:f?(0,h.stringFromCodePoint)(f):"",a>>22,2097152&a?this._combined[e].charCodeAt(this._combined[e].length-1):f]}set(e,a){this._data[3*e+1]=a[u.CHAR_DATA_ATTR_INDEX],a[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=a[1],this._data[3*e+0]=2097152|e|a[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=a[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const a=this._data[3*e+0];return 2097152&a?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&a}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const a=this._data[3*e+0];return 2097152&a?this._combined[e]:2097151&a?(0,h.stringFromCodePoint)(2097151&a):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,a){return S=3*e,a.content=this._data[S+0],a.fg=this._data[S+1],a.bg=this._data[S+2],2097152&a.content&&(a.combinedData=this._combined[e]),268435456&a.bg&&(a.extended=this._extendedAttrs[e]),a}setCell(e,a){2097152&a.content&&(this._combined[e]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[e]=a.extended),this._data[3*e+0]=a.content,this._data[3*e+1]=a.fg,this._data[3*e+2]=a.bg}setCellFromCodePoint(e,a,f,n,c,m){268435456&c&&(this._extendedAttrs[e]=m),this._data[3*e+0]=a|f<<22,this._data[3*e+1]=n,this._data[3*e+2]=c}addCodepointToCell(e,a){let f=this._data[3*e+0];2097152&f?this._combined[e]+=(0,h.stringFromCodePoint)(a):(2097151&f?(this._combined[e]=(0,h.stringFromCodePoint)(2097151&f)+(0,h.stringFromCodePoint)(a),f&=-2097152,f|=2097152):f=a|4194304,this._data[3*e+0]=f)}insertCells(e,a,f,n){if((e%=this.length)&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs),a<this.length-e){const c=new l.CellData;for(let m=this.length-e-a-1;m>=0;--m)this.setCell(e+a+m,this.loadCell(e+m,c));for(let m=0;m<a;++m)this.setCell(e+m,f)}else for(let c=e;c<this.length;++c)this.setCell(c,f);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs)}deleteCells(e,a,f,n){if(e%=this.length,a<this.length-e){const c=new l.CellData;for(let m=0;m<this.length-e-a;++m)this.setCell(e+m,this.loadCell(e+a+m,c));for(let m=this.length-a;m<this.length;++m)this.setCell(m,f)}else for(let c=e;c<this.length;++c)this.setCell(c,f);e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs),this.getWidth(e)!==0||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs)}replaceCells(e,a,f,n,c=!1){if(c)for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodePoint(a,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs);e<a&&e<this.length;)this.isProtected(e)||this.setCell(e,f),e++;else for(e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new g.ExtendedAttrs);e<a&&e<this.length;)this.setCell(e++,f)}resize(e,a){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const f=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{const n=new Uint32Array(f);n.set(this._data),this._data=n}for(let n=this.length;n<e;++n)this.setCell(n,a)}else{this._data=this._data.subarray(0,f);const n=Object.keys(this._combined);for(let m=0;m<n.length;m++){const p=parseInt(n[m],10);p>=e&&delete this._combined[p]}const c=Object.keys(this._extendedAttrs);for(let m=0;m<c.length;m++){const p=parseInt(c[m],10);p>=e&&delete this._extendedAttrs[p]}}return this.length=e,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,a=!1){if(a)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,e);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const a in e._combined)this._combined[a]=e._combined[a];this._extendedAttrs={};for(const a in e._extendedAttrs)this._extendedAttrs[a]=e._extendedAttrs[a];this.isWrapped=e.isWrapped}clone(){const e=new v(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const a in this._combined)e._combined[a]=this._combined[a];for(const a in this._extendedAttrs)e._extendedAttrs[a]=this._extendedAttrs[a];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,a,f,n,c){const m=e._data;if(c)for(let w=n-1;w>=0;w--){for(let d=0;d<3;d++)this._data[3*(f+w)+d]=m[3*(a+w)+d];268435456&m[3*(a+w)+2]&&(this._extendedAttrs[f+w]=e._extendedAttrs[a+w])}else for(let w=0;w<n;w++){for(let d=0;d<3;d++)this._data[3*(f+w)+d]=m[3*(a+w)+d];268435456&m[3*(a+w)+2]&&(this._extendedAttrs[f+w]=e._extendedAttrs[a+w])}const p=Object.keys(e._combined);for(let w=0;w<p.length;w++){const d=parseInt(p[w],10);d>=a&&(this._combined[d-a+f]=e._combined[d])}}translateToString(e=!1,a=0,f=this.length){e&&(f=Math.min(f,this.getTrimmedLength()));let n="";for(;a<f;){const c=this._data[3*a+0],m=2097151&c;n+=2097152&c?this._combined[a]:m?(0,h.stringFromCodePoint)(m):u.WHITESPACE_CELL_CHAR,a+=c>>22||1}return n}}i.BufferLine=v},4841:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(r,h){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return h*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(R,i)=>{function r(h,u,l){if(u===h.length-1)return h[u].getTrimmedLength();const g=!h[u].hasContent(l-1)&&h[u].getWidth(l-1)===1,S=h[u+1].getWidth(0)===2;return g&&S?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,u,l,g,S){const v=[];for(let s=0;s<h.length-1;s++){let e=s,a=h.get(++e);if(!a.isWrapped)continue;const f=[h.get(s)];for(;e<h.length&&a.isWrapped;)f.push(a),a=h.get(++e);if(g>=s&&g<e){s+=f.length-1;continue}let n=0,c=r(f,n,u),m=1,p=0;for(;m<f.length;){const d=r(f,m,u),_=d-p,L=l-c,x=Math.min(_,L);f[n].copyCellsFrom(f[m],p,c,x,!1),c+=x,c===l&&(n++,c=0),p+=x,p===d&&(m++,p=0),c===0&&n!==0&&f[n-1].getWidth(l-1)===2&&(f[n].copyCellsFrom(f[n-1],l-1,c++,1,!1),f[n-1].setCell(l-1,S))}f[n].replaceCells(c,l,S);let w=0;for(let d=f.length-1;d>0&&(d>n||f[d].getTrimmedLength()===0);d--)w++;w>0&&(v.push(s+f.length-w),v.push(w)),s+=f.length-1}return v},i.reflowLargerCreateNewLayout=function(h,u){const l=[];let g=0,S=u[g],v=0;for(let s=0;s<h.length;s++)if(S===s){const e=u[++g];h.onDeleteEmitter.fire({index:s-v,amount:e}),s+=e-1,v+=e,S=u[++g]}else l.push(s);return{layout:l,countRemoved:v}},i.reflowLargerApplyNewLayout=function(h,u){const l=[];for(let g=0;g<u.length;g++)l.push(h.get(u[g]));for(let g=0;g<l.length;g++)h.set(g,l[g]);h.length=u.length},i.reflowSmallerGetNewLineLengths=function(h,u,l){const g=[],S=h.map((a,f)=>r(h,f,u)).reduce((a,f)=>a+f);let v=0,s=0,e=0;for(;e<S;){if(S-e<l){g.push(S-e);break}v+=l;const a=r(h,s,u);v>a&&(v-=a,s++);const f=h[s].getWidth(v-1)===2;f&&v--;const n=f?l-1:l;g.push(n),e+=n}return g},i.getWrappedLineTrimmedLength=r},5295:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=r(9092),u=r(8460),l=r(844);class g extends l.Disposable{constructor(v,s){super(),this._optionsService=v,this._bufferService=s,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(v,s){this._normal.resize(v,s),this._alt.resize(v,s),this.setupTabStops(v)}setupTabStops(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)}}i.BufferSet=g},511:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=r(482),u=r(643),l=r(3734);class g extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(v){const s=new g;return s.setFromCharData(v),s}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let s=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)s=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){const e=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){const a=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(e-55296)+a-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:s=!0}else s=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;s&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=r(8460),u=r(844);class l{constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=l,l._nextId=1},7116:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(R,i)=>{var r,h;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(r=i.C0||(i.C0={})),(h=i.C1||(i.C1={})).PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC="",(i.C1_ESCAPED||(i.C1_ESCAPED={})).ST=`${r.ESC}\\`},7399:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=r(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,g,S,v){const s={type:0,cancel:!1,key:void 0},e=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?s.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?s.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?s.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(s.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(l.altKey){s.key=h.C0.ESC+h.C0.DEL;break}s.key=h.C0.DEL;break;case 9:if(l.shiftKey){s.key=h.C0.ESC+"[Z";break}s.key=h.C0.HT,s.cancel=!0;break;case 13:s.key=l.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,s.cancel=!0;break;case 27:s.key=h.C0.ESC,l.altKey&&(s.key=h.C0.ESC+h.C0.ESC),s.cancel=!0;break;case 37:if(l.metaKey)break;e?(s.key=h.C0.ESC+"[1;"+(e+1)+"D",s.key===h.C0.ESC+"[1;3D"&&(s.key=h.C0.ESC+(S?"b":"[1;5D"))):s.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(l.metaKey)break;e?(s.key=h.C0.ESC+"[1;"+(e+1)+"C",s.key===h.C0.ESC+"[1;3C"&&(s.key=h.C0.ESC+(S?"f":"[1;5C"))):s.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(l.metaKey)break;e?(s.key=h.C0.ESC+"[1;"+(e+1)+"A",S||s.key!==h.C0.ESC+"[1;3A"||(s.key=h.C0.ESC+"[1;5A")):s.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(l.metaKey)break;e?(s.key=h.C0.ESC+"[1;"+(e+1)+"B",S||s.key!==h.C0.ESC+"[1;3B"||(s.key=h.C0.ESC+"[1;5B")):s.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(s.key=h.C0.ESC+"[2~");break;case 46:s.key=e?h.C0.ESC+"[3;"+(e+1)+"~":h.C0.ESC+"[3~";break;case 36:s.key=e?h.C0.ESC+"[1;"+(e+1)+"H":g?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:s.key=e?h.C0.ESC+"[1;"+(e+1)+"F":g?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:l.shiftKey?s.type=2:l.ctrlKey?s.key=h.C0.ESC+"[5;"+(e+1)+"~":s.key=h.C0.ESC+"[5~";break;case 34:l.shiftKey?s.type=3:l.ctrlKey?s.key=h.C0.ESC+"[6;"+(e+1)+"~":s.key=h.C0.ESC+"[6~";break;case 112:s.key=e?h.C0.ESC+"[1;"+(e+1)+"P":h.C0.ESC+"OP";break;case 113:s.key=e?h.C0.ESC+"[1;"+(e+1)+"Q":h.C0.ESC+"OQ";break;case 114:s.key=e?h.C0.ESC+"[1;"+(e+1)+"R":h.C0.ESC+"OR";break;case 115:s.key=e?h.C0.ESC+"[1;"+(e+1)+"S":h.C0.ESC+"OS";break;case 116:s.key=e?h.C0.ESC+"[15;"+(e+1)+"~":h.C0.ESC+"[15~";break;case 117:s.key=e?h.C0.ESC+"[17;"+(e+1)+"~":h.C0.ESC+"[17~";break;case 118:s.key=e?h.C0.ESC+"[18;"+(e+1)+"~":h.C0.ESC+"[18~";break;case 119:s.key=e?h.C0.ESC+"[19;"+(e+1)+"~":h.C0.ESC+"[19~";break;case 120:s.key=e?h.C0.ESC+"[20;"+(e+1)+"~":h.C0.ESC+"[20~";break;case 121:s.key=e?h.C0.ESC+"[21;"+(e+1)+"~":h.C0.ESC+"[21~";break;case 122:s.key=e?h.C0.ESC+"[23;"+(e+1)+"~":h.C0.ESC+"[23~";break;case 123:s.key=e?h.C0.ESC+"[24;"+(e+1)+"~":h.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(S&&!v||!l.altKey||l.metaKey)!S||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?s.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(s.key=h.C0.US),l.key==="@"&&(s.key=h.C0.NUL)):l.keyCode===65&&(s.type=1);else{const a=u[l.keyCode],f=a==null?void 0:a[l.shiftKey?1:0];if(f)s.key=h.C0.ESC+f;else if(l.keyCode>=65&&l.keyCode<=90){const n=l.ctrlKey?l.keyCode-64:l.keyCode+32;let c=String.fromCharCode(n);l.shiftKey&&(c=c.toUpperCase()),s.key=h.C0.ESC+c}else if(l.keyCode===32)s.key=h.C0.ESC+(l.ctrlKey?h.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let n=l.code.slice(3,4);l.shiftKey||(n=n.toLowerCase()),s.key=h.C0.ESC+n,s.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?s.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?s.key=h.C0.NUL:l.keyCode>=51&&l.keyCode<=55?s.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?s.key=h.C0.DEL:l.keyCode===219?s.key=h.C0.ESC:l.keyCode===220?s.key=h.C0.FS:l.keyCode===221&&(s.key=h.C0.GS)}return s}},482:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,h=0,u=r.length){let l="";for(let g=h;g<u;++g){let S=r[g];S>65535?(S-=65536,l+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):l+=String.fromCharCode(S)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,h){const u=r.length;if(!u)return 0;let l=0,g=0;if(this._interim){const S=r.charCodeAt(g++);56320<=S&&S<=57343?h[l++]=1024*(this._interim-55296)+S-56320+65536:(h[l++]=this._interim,h[l++]=S),this._interim=0}for(let S=g;S<u;++S){const v=r.charCodeAt(S);if(55296<=v&&v<=56319){if(++S>=u)return this._interim=v,l;const s=r.charCodeAt(S);56320<=s&&s<=57343?h[l++]=1024*(v-55296)+s-56320+65536:(h[l++]=v,h[l++]=s)}else v!==65279&&(h[l++]=v)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,h){const u=r.length;if(!u)return 0;let l,g,S,v,s=0,e=0,a=0;if(this.interim[0]){let c=!1,m=this.interim[0];m&=(224&m)==192?31:(240&m)==224?15:7;let p,w=0;for(;(p=63&this.interim[++w])&&w<4;)m<<=6,m|=p;const d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,_=d-w;for(;a<_;){if(a>=u)return 0;if(p=r[a++],(192&p)!=128){a--,c=!0;break}this.interim[w++]=p,m<<=6,m|=63&p}c||(d===2?m<128?a--:h[s++]=m:d===3?m<2048||m>=55296&&m<=57343||m===65279||(h[s++]=m):m<65536||m>1114111||(h[s++]=m)),this.interim.fill(0)}const f=u-4;let n=a;for(;n<u;){for(;!(!(n<f)||128&(l=r[n])||128&(g=r[n+1])||128&(S=r[n+2])||128&(v=r[n+3]));)h[s++]=l,h[s++]=g,h[s++]=S,h[s++]=v,n+=4;if(l=r[n++],l<128)h[s++]=l;else if((224&l)==192){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(e=(31&l)<<6|63&g,e<128){n--;continue}h[s++]=e}else if((240&l)==224){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,s;if(S=r[n++],(192&S)!=128){n--;continue}if(e=(15&l)<<12|(63&g)<<6|63&S,e<2048||e>=55296&&e<=57343||e===65279)continue;h[s++]=e}else if((248&l)==240){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,s;if(S=r[n++],(192&S)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,this.interim[2]=S,s;if(v=r[n++],(192&v)!=128){n--;continue}if(e=(7&l)<<18|(63&g)<<12|(63&S)<<6|63&v,e<65536||e>1114111)continue;h[s++]=e}}return s}}},225:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let u;i.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let l=0;l<r.length;++l)u.fill(0,r[l][0],r[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?u[l]:function(g,S){let v,s=0,e=S.length-1;if(g<S[0][0]||g>S[e][1])return!1;for(;e>=s;)if(v=s+e>>1,g>S[v][1])s=v+1;else{if(!(g<S[v][0]))return!0;e=v-1}return!1}(l,h)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=r(8460),u=r(844);class l extends u.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,v){if(v!==void 0&&this._syncCalls>v)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let s;for(this._isSyncWriting=!0;s=this._writeBuffer.shift();){this._action(s);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,v){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(v),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(v)}_innerWrite(S=0,v=!0){const s=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],a=this._action(e,v);if(a){const n=c=>Date.now()-s>=12?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(s,c);return void a.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(n)}const f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-s>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(l,g){const S=l.toString(16),v=S.length<2?"0"+S:S;switch(g){case 4:return S[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}i.parseColor=function(l){if(!l)return;let g=l.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const S=r.exec(g);if(S){const v=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/v*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/v*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/v*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),h.exec(g)&&[3,6,9,12].includes(g.length))){const S=g.length/3,v=[0,0,0];for(let s=0;s<3;++s){const e=parseInt(g.slice(S*s,S*s+S),16);v[s]=S===1?e<<4:S===2?e:S===3?e>>4:e>>8}return v}},i.toRgbString=function(l,g=16){const[S,v,s]=l;return`rgb:${u(S,g)}/${u(v,g)}/${u(s,g)}`}},5770:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=r(482),u=r(8742),l=r(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(v,s){this._handlers[v]===void 0&&(this._handlers[v]=[]);const e=this._handlers[v];return e.push(s),{dispose:()=>{const a=e.indexOf(s);a!==-1&&e.splice(a,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}reset(){if(this._active.length)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(v,s){if(this.reset(),this._ident=v,this._active=this._handlers[v]||g,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(s);else this._handlerFb(this._ident,"HOOK",s)}put(v,s,e){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(v,s,e);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(v,s,e))}unhook(v,s=!0){if(this._active.length){let e=!1,a=this._active.length-1,f=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,e=s,f=this._stack.fallThrough,this._stack.paused=!1),!f&&e===!1){for(;a>=0&&(e=this._active[a].unhook(v),e!==!0);a--)if(e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,e;a--}for(;a>=0;a--)if(e=this._active[a].unhook(!1),e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,e}else this._handlerFb(this._ident,"UNHOOK",v);this._active=g,this._ident=0}};const S=new u.Params;S.addParam(0),i.DcsHandler=class{constructor(v){this._handler=v,this._data="",this._params=S,this._hitLimit=!1}hook(v){this._params=v.length>1||v.params[0]?v.clone():S,this._data="",this._hitLimit=!1}put(v,s,e){this._hitLimit||(this._data+=(0,h.utf32ToString)(v,s,e),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(v){let s=!1;if(this._hitLimit)s=!1;else if(v&&(s=this._handler(this._data,this._params),s instanceof Promise))return s.then(e=>(this._params=S,this._data="",this._hitLimit=!1,e));return this._params=S,this._data="",this._hitLimit=!1,s}}},2015:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=r(844),u=r(8742),l=r(6242),g=r(6351);class S{constructor(a){this.table=new Uint8Array(a)}setDefault(a,f){this.table.fill(a<<4|f)}add(a,f,n,c){this.table[f<<8|a]=n<<4|c}addMany(a,f,n,c){for(let m=0;m<a.length;m++)this.table[f<<8|a[m]]=n<<4|c}}i.TransitionTable=S;const v=160;i.VT500_TRANSITION_TABLE=function(){const e=new S(4095),a=Array.apply(null,Array(256)).map((w,d)=>d),f=(w,d)=>a.slice(w,d),n=f(32,127),c=f(0,24);c.push(25),c.push.apply(c,f(28,32));const m=f(0,14);let p;for(p in e.setDefault(1,0),e.addMany(n,0,2,0),m)e.addMany([24,26,153,154],p,3,0),e.addMany(f(128,144),p,3,0),e.addMany(f(144,152),p,3,0),e.add(156,p,0,0),e.add(27,p,11,1),e.add(157,p,4,8),e.addMany([152,158,159],p,0,7),e.add(155,p,11,3),e.add(144,p,11,9);return e.addMany(c,0,3,0),e.addMany(c,1,3,1),e.add(127,1,0,1),e.addMany(c,8,0,8),e.addMany(c,3,3,3),e.add(127,3,0,3),e.addMany(c,4,3,4),e.add(127,4,0,4),e.addMany(c,6,3,6),e.addMany(c,5,3,5),e.add(127,5,0,5),e.addMany(c,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(f(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(c,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(f(64,127),3,7,0),e.addMany(f(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(f(48,60),4,8,4),e.addMany(f(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(f(32,64),6,0,6),e.add(127,6,0,6),e.addMany(f(64,127),6,0,0),e.addMany(f(32,48),3,9,5),e.addMany(f(32,48),5,9,5),e.addMany(f(48,64),5,0,6),e.addMany(f(64,127),5,7,0),e.addMany(f(32,48),4,9,5),e.addMany(f(32,48),1,9,2),e.addMany(f(32,48),2,9,2),e.addMany(f(48,127),2,10,0),e.addMany(f(48,80),1,10,0),e.addMany(f(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(f(96,127),1,10,0),e.add(80,1,11,9),e.addMany(c,9,0,9),e.add(127,9,0,9),e.addMany(f(28,32),9,0,9),e.addMany(f(32,48),9,9,12),e.addMany(f(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(c,11,0,11),e.addMany(f(32,128),11,0,11),e.addMany(f(28,32),11,0,11),e.addMany(c,10,0,10),e.add(127,10,0,10),e.addMany(f(28,32),10,0,10),e.addMany(f(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(f(32,48),10,9,12),e.addMany(c,12,0,12),e.add(127,12,0,12),e.addMany(f(28,32),12,0,12),e.addMany(f(32,48),12,9,12),e.addMany(f(48,64),12,0,11),e.addMany(f(64,127),12,12,13),e.addMany(f(64,127),10,12,13),e.addMany(f(64,127),9,12,13),e.addMany(c,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(v,0,2,0),e.add(v,8,5,8),e.add(v,6,0,6),e.add(v,11,0,11),e.add(v,13,13,13),e}();class s extends h.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(f,n,c)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,n)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,f=[64,126]){let n=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=a.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let m=0;m<a.intermediates.length;++m){const p=a.intermediates.charCodeAt(m);if(32>p||p>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=p}}if(a.final.length!==1)throw new Error("final must be a single byte");const c=a.final.charCodeAt(0);if(f[0]>c||c>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return n<<=8,n|=c,n}identToString(a){const f=[];for(;a;)f.push(String.fromCharCode(255&a)),a>>=8;return f.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,f){const n=this._identifier(a,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const c=this._escHandlers[n];return c.push(f),{dispose:()=>{const m=c.indexOf(f);m!==-1&&c.splice(m,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,f){this._executeHandlers[a.charCodeAt(0)]=f}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,f){const n=this._identifier(a);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const c=this._csiHandlers[n];return c.push(f),{dispose:()=>{const m=c.indexOf(f);m!==-1&&c.splice(m,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,f){return this._dcsParser.registerHandler(this._identifier(a),f)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,f){return this._oscParser.registerHandler(a,f)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,f,n,c,m){this._parseStack.state=a,this._parseStack.handlers=f,this._parseStack.handlerPos=n,this._parseStack.transition=c,this._parseStack.chunkPos=m}parse(a,f,n){let c,m=0,p=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const d=this._parseStack.handlers;let _=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&_>-1){for(;_>=0&&(c=d[_](this._params),c!==!0);_--)if(c instanceof Promise)return this._parseStack.handlerPos=_,c}this._parseStack.handlers=[];break;case 4:if(n===!1&&_>-1){for(;_>=0&&(c=d[_](),c!==!0);_--)if(c instanceof Promise)return this._parseStack.handlerPos=_,c}this._parseStack.handlers=[];break;case 6:if(m=a[this._parseStack.chunkPos],c=this._dcsParser.unhook(m!==24&&m!==26,n),c)return c;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(m=a[this._parseStack.chunkPos],c=this._oscParser.end(m!==24&&m!==26,n),c)return c;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let d=w;d<f;++d){switch(m=a[d],p=this._transitions.table[this.currentState<<8|(m<160?m:v)],p>>4){case 2:for(let M=d+1;;++M){if(M>=f||(m=a[M])<32||m>126&&m<v){this._printHandler(a,d,M),d=M-1;break}if(++M>=f||(m=a[M])<32||m>126&&m<v){this._printHandler(a,d,M),d=M-1;break}if(++M>=f||(m=a[M])<32||m>126&&m<v){this._printHandler(a,d,M),d=M-1;break}if(++M>=f||(m=a[M])<32||m>126&&m<v){this._printHandler(a,d,M),d=M-1;break}}break;case 3:this._executeHandlers[m]?this._executeHandlers[m]():this._executeHandlerFb(m),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:d,code:m,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const _=this._csiHandlers[this._collect<<8|m];let L=_?_.length-1:-1;for(;L>=0&&(c=_[L](this._params),c!==!0);L--)if(c instanceof Promise)return this._preserveStack(3,_,L,p,d),c;L<0&&this._csiHandlerFb(this._collect<<8|m,this._params),this.precedingCodepoint=0;break;case 8:do switch(m){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(m-48)}while(++d<f&&(m=a[d])>47&&m<60);d--;break;case 9:this._collect<<=8,this._collect|=m;break;case 10:const x=this._escHandlers[this._collect<<8|m];let T=x?x.length-1:-1;for(;T>=0&&(c=x[T](),c!==!0);T--)if(c instanceof Promise)return this._preserveStack(4,x,T,p,d),c;T<0&&this._escHandlerFb(this._collect<<8|m),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|m,this._params);break;case 13:for(let M=d+1;;++M)if(M>=f||(m=a[M])===24||m===26||m===27||m>127&&m<v){this._dcsParser.put(a,d,M),d=M-1;break}break;case 14:if(c=this._dcsParser.unhook(m!==24&&m!==26),c)return this._preserveStack(6,[],0,p,d),c;m===27&&(p|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=d+1;;M++)if(M>=f||(m=a[M])<32||m>127&&m<v){this._oscParser.put(a,d,M),d=M-1;break}break;case 6:if(c=this._oscParser.end(m!==24&&m!==26),c)return this._preserveStack(5,[],0,p,d),c;m===27&&(p|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&p}}}i.EscapeSequenceParser=s},6242:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=r(5770),u=r(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,S){this._handlers[g]===void 0&&(this._handlers[g]=[]);const v=this._handlers[g];return v.push(S),{dispose:()=>{const s=v.indexOf(S);s!==-1&&v.splice(s,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,S,v){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(g,S,v);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(g,S,v))}start(){this.reset(),this._state=1}put(g,S,v){if(this._state!==3){if(this._state===1)for(;S<v;){const s=g[S++];if(s===59){this._state=2,this._start();break}if(s<48||57<s)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+s-48}this._state===2&&v-S>0&&this._put(g,S,v)}}end(g,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let v=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,v=S,e=this._stack.fallThrough,this._stack.paused=!1),!e&&v===!1){for(;s>=0&&(v=this._active[s].end(g),v!==!0);s--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,v;s--}for(;s>=0;s--)if(v=this._active[s].end(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",g);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,S,v){this._hitLimit||(this._data+=(0,u.utf32ToString)(g,S,v),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let S=!1;if(this._hitLimit)S=!1;else if(g&&(S=this._handler(this._data),S instanceof Promise))return S.then(v=>(this._data="",this._hitLimit=!1,v));return this._data="",this._hitLimit=!1,S}}},8742:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const r=2147483647;class h{constructor(l=32,g=32){if(this.maxLength=l,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(l){const g=new h;if(!l.length)return g;for(let S=Array.isArray(l[0])?1:0;S<l.length;++S){const v=l[S];if(Array.isArray(v))for(let s=0;s<v.length;++s)g.addSubParam(v[s]);else g.addParam(v)}return g}clone(){const l=new h(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let g=0;g<this.length;++g){l.push(this.params[g]);const S=this._subParamsIdx[g]>>8,v=255&this._subParamsIdx[g];v-S>0&&l.push(Array.prototype.slice.call(this._subParams,S,v))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>r?r:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>r?r:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const g=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];return S-g>0?this._subParams.subarray(g,S):null}getSubParamsAll(){const l={};for(let g=0;g<this.length;++g){const S=this._subParamsIdx[g]>>8,v=255&this._subParamsIdx[g];v-S>0&&(l[g]=this._subParams.slice(S,v))}return l}addDigit(l){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,v=S[g-1];S[g-1]=~v?Math.min(10*v+l,r):l}}i.Params=h},5741:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,h){const u={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(u),h.dispose=()=>this._wrappedAddonDispose(u),h.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let h=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===r){h=u;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(h,1)}}},8771:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=r(3785),u=r(511);i.BufferApiView=class{constructor(l,g){this._buffer=l,this.type=g}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const g=this._buffer.lines.get(l);if(g)return new h.BufferLineApiView(g)}getNullCell(){return new u.CellData}}},3785:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=r(511);i.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,l){if(!(u<0||u>=this._line.length))return l?(this._line.loadCell(u,l),l):this._line.loadCell(u,new h.CellData)}translateToString(u,l,g){return this._line.translateToString(u,l,g)}}},8285:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=r(8771),u=r(8460);i.BufferNamespaceApi=class{constructor(l){this._core=l,this._onBufferChange=new u.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,h){return this._core.registerCsiHandler(r,u=>h(u.toArray()))}addCsiHandler(r,h){return this.registerCsiHandler(r,h)}registerDcsHandler(r,h){return this._core.registerDcsHandler(r,(u,l)=>h(u,l.toArray()))}addDcsHandler(r,h){return this.registerDcsHandler(r,h)}registerEscHandler(r,h){return this._core.registerEscHandler(r,h)}addEscHandler(r,h){return this.registerEscHandler(r,h)}registerOscHandler(r,h){return this._core.registerOscHandler(r,h)}addOscHandler(r,h){return this.registerOscHandler(r,h)}}},7090:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(R,i,r){var h=this&&this.__decorate||function(e,a,f,n){var c,m=arguments.length,p=m<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,f):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(e,a,f,n);else for(var w=e.length-1;w>=0;w--)(c=e[w])&&(p=(m<3?c(p):m>3?c(a,f,p):c(a,f))||p);return m>3&&p&&Object.defineProperty(a,f,p),p},u=this&&this.__param||function(e,a){return function(f,n){a(f,n,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const l=r(2585),g=r(5295),S=r(8460),v=r(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let s=class extends v.Disposable{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new S.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new S.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new g.BufferSet(e,this))}get buffer(){return this.buffers.active}resize(e,a){this.cols=e,this.rows=a,this.buffers.resize(e,a),this._onResize.fire({cols:e,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,a=!1){const f=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===e.fg&&n.getBg(0)===e.bg||(n=f.getBlankLine(e,a),this._cachedBlankLine=n),n.isWrapped=a;const c=f.ybase+f.scrollTop,m=f.ybase+f.scrollBottom;if(f.scrollTop===0){const p=f.lines.isFull;m===f.lines.length-1?p?f.lines.recycle().copyFrom(n):f.lines.push(n.clone()):f.lines.splice(m+1,0,n.clone()),p?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{const p=m-c+1;f.lines.shiftElements(c+1,p-1,-1),f.lines.set(m,n.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(e,a,f){const n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const c=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),c!==n.ydisp&&(a||this._onScroll.fire(n.ydisp))}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(e){const a=e-this.buffer.ydisp;a!==0&&this.scrollLines(a)}};s=h([u(0,l.IOptionsService)],s),i.BufferService=s},7994:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,h){this._charsets[r]=h,this.glevel===r&&(this.charset=h)}}},1753:function(R,i,r){var h=this&&this.__decorate||function(n,c,m,p){var w,d=arguments.length,_=d<3?c:p===null?p=Object.getOwnPropertyDescriptor(c,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(n,c,m,p);else for(var L=n.length-1;L>=0;L--)(w=n[L])&&(_=(d<3?w(_):d>3?w(c,m,_):w(c,m))||_);return d>3&&_&&Object.defineProperty(c,m,_),_},u=this&&this.__param||function(n,c){return function(m,p){c(m,p,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const l=r(2585),g=r(8460),S=r(844),v={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function s(n,c){let m=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(m|=64,m|=n.action):(m|=3&n.button,4&n.button&&(m|=64),8&n.button&&(m|=128),n.action===32?m|=32:n.action!==0||c||(m|=3)),m}const e=String.fromCharCode,a={DEFAULT:n=>{const c=[s(n,!1)+32,n.col+32,n.row+32];return c[0]>255||c[1]>255||c[2]>255?"":`\x1B[M${e(c[0])}${e(c[1])}${e(c[2])}`},SGR:n=>{const c=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${s(n,!0)};${n.col};${n.row}${c}`},SGR_PIXELS:n=>{const c=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${s(n,!0)};${n.x};${n.y}${c}`}};let f=class extends S.Disposable{constructor(n,c){super(),this._bufferService=n,this._coreService=c,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const m of Object.keys(v))this.addProtocol(m,v[m]);for(const m of Object.keys(a))this.addEncoding(m,a[m]);this.reset()}addProtocol(n,c){this._protocols[n]=c}addEncoding(n,c){this._encodings[n]=c}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const c=this._encodings[this._activeEncoding](n);return c&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(c):this._coreService.triggerDataEvent(c,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,c,m){if(m){if(n.x!==c.x||n.y!==c.y)return!1}else if(n.col!==c.col||n.row!==c.row)return!1;return n.button===c.button&&n.action===c.action&&n.ctrl===c.ctrl&&n.alt===c.alt&&n.shift===c.shift}};f=h([u(0,l.IBufferService),u(1,l.ICoreService)],f),i.CoreMouseService=f},6975:function(R,i,r){var h=this&&this.__decorate||function(f,n,c,m){var p,w=arguments.length,d=w<3?n:m===null?m=Object.getOwnPropertyDescriptor(n,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(f,n,c,m);else for(var _=f.length-1;_>=0;_--)(p=f[_])&&(d=(w<3?p(d):w>3?p(n,c,d):p(n,c))||d);return w>3&&d&&Object.defineProperty(n,c,d),d},u=this&&this.__param||function(f,n){return function(c,m){n(c,m,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const l=r(2585),g=r(8460),S=r(1439),v=r(844),s=Object.freeze({insertMode:!1}),e=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=class extends v.Disposable{constructor(f,n,c){super(),this._bufferService=f,this._logService=n,this._optionsService=c,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,S.clone)(s),this.decPrivateModes=(0,S.clone)(e)}reset(){this.modes=(0,S.clone)(s),this.decPrivateModes=(0,S.clone)(e)}triggerDataEvent(f,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const c=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&c.ybase!==c.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,()=>f.split("").map(m=>m.charCodeAt(0))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,()=>f.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(f))}};a=h([u(0,l.IBufferService),u(1,l.ILogService),u(2,l.IOptionsService)],a),i.CoreService=a},9074:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=r(8055),u=r(8460),l=r(844),g=r(6106);let S=0,v=0;class s extends l.Disposable{constructor(){super(),this._decorations=new g.SortedList(f=>f==null?void 0:f.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>{for(const f of this._decorations.values())this._onDecorationRemoved.fire(f);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(f){if(f.marker.isDisposed)return;const n=new e(f);if(n){const c=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),c.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,n,c){var m,p,w;let d=0,_=0;for(const L of this._decorations.getKeyIterator(n))d=(m=L.options.x)!==null&&m!==void 0?m:0,_=d+((p=L.options.width)!==null&&p!==void 0?p:1),f>=d&&f<_&&(!c||((w=L.options.layer)!==null&&w!==void 0?w:"bottom")===c)&&(yield L)}forEachDecorationAtCell(f,n,c,m){this._decorations.forEachByKey(n,p=>{var w,d,_;S=(w=p.options.x)!==null&&w!==void 0?w:0,v=S+((d=p.options.width)!==null&&d!==void 0?d:1),f>=S&&f<v&&(!c||((_=p.options.layer)!==null&&_!==void 0?_:"bottom")===c)&&m(p)})}dispose(){for(const f of this._decorations.values())this._onDecorationRemoved.fire(f);this.reset()}}i.DecorationService=s;class e extends l.Disposable{constructor(f){super(),this.options=f,this.isDisposed=!1,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=r(2585),u=r(8343);class l{constructor(...S){this._entries=new Map;for(const[v,s]of S)this.set(v,s)}set(S,v){const s=this._entries.get(S);return this._entries.set(S,v),s}forEach(S){for(const[v,s]of this._entries.entries())S(v,s)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(h.IInstantiationService,this)}setService(g,S){this._services.set(g,S)}getService(g){return this._services.get(g)}createInstance(g,...S){const v=(0,u.getServiceDependencies)(g).sort((a,f)=>a.index-f.index),s=[];for(const a of v){const f=this._services.get(a.id);if(!f)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${a.id}.`);s.push(f)}const e=v.length>0?v[0].index:S.length;if(S.length!==e)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${e+1} conflicts with ${S.length} static arguments`);return new g(...S,...s)}}},7866:function(R,i,r){var h=this&&this.__decorate||function(s,e,a,f){var n,c=arguments.length,m=c<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,a):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,e,a,f);else for(var p=s.length-1;p>=0;p--)(n=s[p])&&(m=(c<3?n(m):c>3?n(e,a,m):n(e,a))||m);return c>3&&m&&Object.defineProperty(e,a,m),m},u=this&&this.__param||function(s,e){return function(a,f){e(a,f,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LogService=void 0;const l=r(844),g=r(2585),S={debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let v=class extends l.Disposable{constructor(s){super(),this._optionsService=s,this.logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let e=0;e<s.length;e++)typeof s[e]=="function"&&(s[e]=s[e]())}_log(s,e,a){this._evalLazyOptionalParams(a),s.call(console,"xterm.js: "+e,...a)}debug(s,...e){this.logLevel<=g.LogLevelEnum.DEBUG&&this._log(console.log,s,e)}info(s,...e){this.logLevel<=g.LogLevelEnum.INFO&&this._log(console.info,s,e)}warn(s,...e){this.logLevel<=g.LogLevelEnum.WARN&&this._log(console.warn,s,e)}error(s,...e){this.logLevel<=g.LogLevelEnum.ERROR&&this._log(console.error,s,e)}};v=h([u(0,g.IOptionsService)],v),i.LogService=v},7302:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=r(8460),u=r(6114),l=r(844);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends l.Disposable{constructor(s){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const e=Object.assign({},i.DEFAULT_OPTIONS);for(const a in s)if(a in e)try{const f=s[a];e[a]=this._sanitizeAndValidateOption(a,f)}catch(f){console.error(f)}this.rawOptions=e,this.options=Object.assign({},e),this._setupOptions()}onSpecificOptionChange(s,e){return this.onOptionChange(a=>{a===s&&e(this.rawOptions[s])})}onMultipleOptionChange(s,e){return this.onOptionChange(a=>{s.indexOf(a)!==-1&&e()})}_setupOptions(){const s=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},e=(a,f)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);f=this._sanitizeAndValidateOption(a,f),this.rawOptions[a]!==f&&(this.rawOptions[a]=f,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const f={get:s.bind(this,a),set:e.bind(this,a)};Object.defineProperty(this.options,a,f)}}_sanitizeAndValidateOption(s,e){switch(s){case"cursorStyle":if(e||(e=i.DEFAULT_OPTIONS[s]),!function(a){return a==="block"||a==="underline"||a==="bar"}(e))throw new Error(`"${e}" is not a valid value for ${s}`);break;case"wordSeparator":e||(e=i.DEFAULT_OPTIONS[s]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=g.includes(e)?e:i.DEFAULT_OPTIONS[s];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${s} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(10*e)/10));break;case"scrollback":if((e=Math.min(e,4294967295))<0)throw new Error(`${s} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${s} cannot be less than or equal to 0, value: ${e}`);case"rows":case"cols":if(!e&&e!==0)throw new Error(`${s} must be numeric, value: ${e}`)}return e}}i.OptionsService=S},2660:function(R,i,r){var h=this&&this.__decorate||function(S,v,s,e){var a,f=arguments.length,n=f<3?v:e===null?e=Object.getOwnPropertyDescriptor(v,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(S,v,s,e);else for(var c=S.length-1;c>=0;c--)(a=S[c])&&(n=(f<3?a(n):f>3?a(v,s,n):a(v,s))||n);return f>3&&n&&Object.defineProperty(v,s,n),n},u=this&&this.__param||function(S,v){return function(s,e){v(s,e,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const l=r(2585);let g=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const v=this._bufferService.buffer;if(S.id===void 0){const c=v.addMarker(v.ybase+v.y),m={data:S,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(m,c)),this._dataByLinkId.set(m.id,m),m.id}const s=S,e=this._getEntryIdKey(s),a=this._entriesWithId.get(e);if(a)return this.addLineToLink(a.id,v.ybase+v.y),a.id;const f=v.addMarker(v.ybase+v.y),n={id:this._nextId++,key:this._getEntryIdKey(s),data:s,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(n,f)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(S,v){const s=this._dataByLinkId.get(S);if(s&&s.lines.every(e=>e.line!==v)){const e=this._bufferService.buffer.addMarker(v);s.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(s,e))}}getLinkData(S){var v;return(v=this._dataByLinkId.get(S))===null||v===void 0?void 0:v.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,v){const s=S.lines.indexOf(v);s!==-1&&(S.lines.splice(s,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};g=h([u(0,l.IBufferService)],g),i.OscLinkService=g},8343:(R,i)=>{function r(h,u,l){u.di$target===u?u.di$dependencies.push({id:h,index:l}):(u.di$dependencies=[{id:h,index:l}],u.di$target=u)}Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(h){return h.di$dependencies||[]},i.createDecorator=function(h){if(i.serviceRegistry.has(h))return i.serviceRegistry.get(h);const u=function(l,g,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");r(u,l,S)};return u.toString=()=>h,i.serviceRegistry.set(h,u),u}},2585:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=r(8343);var u;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(u=i.LogLevelEnum||(i.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=r(8460),u=r(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const l=new u.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let g=0;const S=l.length;for(let v=0;v<S;++v){let s=l.charCodeAt(v);if(55296<=s&&s<=56319){if(++v>=S)return g+this.wcwidth(s);const e=l.charCodeAt(v);56320<=e&&e<=57343?s=1024*(s-55296)+e-56320+65536:g+=this.wcwidth(e)}g+=this.wcwidth(s)}return g}}}},b={};function E(R){var i=b[R];if(i!==void 0)return i.exports;var r=b[R]={exports:{}};return C[R].call(r.exports,r,r.exports,E),r.exports}var A={};return(()=>{var R=A;Object.defineProperty(R,"__esModule",{value:!0}),R.Terminal=void 0;const i=E(3236),r=E(9042),h=E(7975),u=E(7090),l=E(5741),g=E(8285),S=["cols","rows"];R.Terminal=class{constructor(v){this._core=new i.Terminal(v),this._addonManager=new l.AddonManager,this._publicOptions=Object.assign({},this._core.options);const s=a=>this._core.options[a],e=(a,f)=>{this._checkReadonlyOptions(a),this._core.options[a]=f};for(const a in this._core.options){const f={get:s.bind(this,a),set:e.bind(this,a)};Object.defineProperty(this._publicOptions,a,f)}}_checkReadonlyOptions(v){if(S.includes(v))throw new Error(`Option "${v}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new g.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const v=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:v.applicationCursorKeys,applicationKeypadMode:v.applicationKeypad,bracketedPasteMode:v.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:v.origin,reverseWraparoundMode:v.reverseWraparound,sendFocusMode:v.sendFocus,wraparoundMode:v.wraparound}}get options(){return this._publicOptions}set options(v){for(const s in v)this._publicOptions[s]=v[s]}blur(){this._core.blur()}focus(){this._core.focus()}resize(v,s){this._verifyIntegers(v,s),this._core.resize(v,s)}open(v){this._core.open(v)}attachCustomKeyEventHandler(v){this._core.attachCustomKeyEventHandler(v)}registerLinkProvider(v){return this._core.registerLinkProvider(v)}registerCharacterJoiner(v){return this._checkProposedApi(),this._core.registerCharacterJoiner(v)}deregisterCharacterJoiner(v){this._checkProposedApi(),this._core.deregisterCharacterJoiner(v)}registerMarker(v=0){return this._verifyIntegers(v),this._core.addMarker(v)}registerDecoration(v){var s,e,a;return this._checkProposedApi(),this._verifyPositiveIntegers((s=v.x)!==null&&s!==void 0?s:0,(e=v.width)!==null&&e!==void 0?e:0,(a=v.height)!==null&&a!==void 0?a:0),this._core.registerDecoration(v)}hasSelection(){return this._core.hasSelection()}select(v,s,e){this._verifyIntegers(v,s,e),this._core.select(v,s,e)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(v,s){this._verifyIntegers(v,s),this._core.selectLines(v,s)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(v){this._verifyIntegers(v),this._core.scrollLines(v)}scrollPages(v){this._verifyIntegers(v),this._core.scrollPages(v)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(v){this._verifyIntegers(v),this._core.scrollToLine(v)}clear(){this._core.clear()}write(v,s){this._core.write(v,s)}writeln(v,s){this._core.write(v),this._core.write(`\r
`,s)}paste(v){this._core.paste(v)}refresh(v,s){this._verifyIntegers(v,s),this._core.refresh(v,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(v){return this._addonManager.loadAddon(this,v)}static get strings(){return r}_verifyIntegers(...v){for(const s of v)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...v){for(const s of v)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}})(),A})()})})(xr);var La=xr.exports,Ar={exports:{}};(function(t,o){(function(C,b){t.exports=b()})(self,function(){return(()=>{var C={};return(()=>{var b=C;Object.defineProperty(b,"__esModule",{value:!0}),b.FitAddon=void 0,b.FitAddon=class{constructor(){}activate(E){this._terminal=E}dispose(){}fit(){const E=this.proposeDimensions();if(!E||!this._terminal||isNaN(E.cols)||isNaN(E.rows))return;const A=this._terminal._core;this._terminal.rows===E.rows&&this._terminal.cols===E.cols||(A._renderService.clear(),this._terminal.resize(E.cols,E.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const E=this._terminal._core,A=E._renderService.dimensions;if(A.css.cell.width===0||A.css.cell.height===0)return;const R=this._terminal.options.scrollback===0?0:E.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(i.getPropertyValue("height")),h=Math.max(0,parseInt(i.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),l=r-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),g=h-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-R;return{cols:Math.max(2,Math.floor(g/A.css.cell.width)),rows:Math.max(1,Math.floor(l/A.css.cell.height))}}}})(),C})()})})(Ar);var xa=Ar.exports,Mr={exports:{}};(function(t,o){(function(C,b){t.exports=b()})(self,function(){return(()=>{var C={965:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const h=r(381),u=r(855),l=r(859),g=r(374),S=r(509),v=11,s=v*Float32Array.BYTES_PER_ELEMENT;let e,a=0,f=0,n=0;class c extends l.Disposable{constructor(p,w,d){super(),this._terminal=p,this._gl=w,this._dimensions=d,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const _=this._gl;S.TextureAtlas.maxAtlasPages===void 0&&(S.TextureAtlas.maxAtlasPages=Math.min(32,(0,g.throwIfFalsy)(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS))),S.TextureAtlas.maxTextureSize=(0,g.throwIfFalsy)(_.getParameter(_.MAX_TEXTURE_SIZE))),this._program=(0,g.throwIfFalsy)((0,h.createProgram)(_,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function($){let N="";for(let y=1;y<$;y++)N+=` else if (v_texpage == ${y}) { outColor = texture(u_texture[${y}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${$}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${N}
}`}(S.TextureAtlas.maxAtlasPages))),this.register((0,l.toDisposable)(()=>_.deleteProgram(this._program))),this._projectionLocation=(0,g.throwIfFalsy)(_.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,g.throwIfFalsy)(_.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,g.throwIfFalsy)(_.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=_.createVertexArray(),_.bindVertexArray(this._vertexArrayObject);const L=new Float32Array([0,0,1,0,0,1,1,1]),x=_.createBuffer();this.register((0,l.toDisposable)(()=>_.deleteBuffer(x))),_.bindBuffer(_.ARRAY_BUFFER,x),_.bufferData(_.ARRAY_BUFFER,L,_.STATIC_DRAW),_.enableVertexAttribArray(0),_.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const T=new Uint8Array([0,1,2,3]),M=_.createBuffer();this.register((0,l.toDisposable)(()=>_.deleteBuffer(M))),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,M),_.bufferData(_.ELEMENT_ARRAY_BUFFER,T,_.STATIC_DRAW),this._attributesBuffer=(0,g.throwIfFalsy)(_.createBuffer()),this.register((0,l.toDisposable)(()=>_.deleteBuffer(this._attributesBuffer))),_.bindBuffer(_.ARRAY_BUFFER,this._attributesBuffer),_.enableVertexAttribArray(2),_.vertexAttribPointer(2,2,_.FLOAT,!1,s,0),_.vertexAttribDivisor(2,1),_.enableVertexAttribArray(3),_.vertexAttribPointer(3,2,_.FLOAT,!1,s,2*Float32Array.BYTES_PER_ELEMENT),_.vertexAttribDivisor(3,1),_.enableVertexAttribArray(4),_.vertexAttribPointer(4,1,_.FLOAT,!1,s,4*Float32Array.BYTES_PER_ELEMENT),_.vertexAttribDivisor(4,1),_.enableVertexAttribArray(5),_.vertexAttribPointer(5,2,_.FLOAT,!1,s,5*Float32Array.BYTES_PER_ELEMENT),_.vertexAttribDivisor(5,1),_.enableVertexAttribArray(6),_.vertexAttribPointer(6,2,_.FLOAT,!1,s,7*Float32Array.BYTES_PER_ELEMENT),_.vertexAttribDivisor(6,1),_.enableVertexAttribArray(1),_.vertexAttribPointer(1,2,_.FLOAT,!1,s,9*Float32Array.BYTES_PER_ELEMENT),_.vertexAttribDivisor(1,1),_.useProgram(this._program);const H=new Int32Array(S.TextureAtlas.maxAtlasPages);for(let $=0;$<S.TextureAtlas.maxAtlasPages;$++)H[$]=$;_.uniform1iv(this._textureLocation,H),_.uniformMatrix4fv(this._projectionLocation,!1,h.PROJECTION_MATRIX),this._atlasTextures=[];for(let $=0;$<S.TextureAtlas.maxAtlasPages;$++){const N=new h.GLTexture((0,g.throwIfFalsy)(_.createTexture()));this.register((0,l.toDisposable)(()=>_.deleteTexture(N.texture))),_.activeTexture(_.TEXTURE0+$),_.bindTexture(_.TEXTURE_2D,N.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[$]=N}_.enable(_.BLEND),_.blendFunc(_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(p,w,d,_,L,x,T,M){this._updateCell(this._vertices.attributes,p,w,d,_,L,x,T,M)}_updateCell(p,w,d,_,L,x,T,M,H){a=(d*this._terminal.cols+w)*v,_!==u.NULL_CELL_CODE&&_!==void 0?this._atlas&&(e=M&&M.length>1?this._atlas.getRasterizedGlyphCombinedChar(M,L,x,T):this._atlas.getRasterizedGlyph(_,L,x,T),f=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),L!==H&&e.offset.x>f?(n=e.offset.x-f,p[a]=-(e.offset.x-n)+this._dimensions.device.char.left,p[a+1]=-e.offset.y+this._dimensions.device.char.top,p[a+2]=(e.size.x-n)/this._dimensions.device.canvas.width,p[a+3]=e.size.y/this._dimensions.device.canvas.height,p[a+4]=e.texturePage,p[a+5]=e.texturePositionClipSpace.x+n/this._atlas.pages[e.texturePage].canvas.width,p[a+6]=e.texturePositionClipSpace.y,p[a+7]=e.sizeClipSpace.x-n/this._atlas.pages[e.texturePage].canvas.width,p[a+8]=e.sizeClipSpace.y):(p[a]=-e.offset.x+this._dimensions.device.char.left,p[a+1]=-e.offset.y+this._dimensions.device.char.top,p[a+2]=e.size.x/this._dimensions.device.canvas.width,p[a+3]=e.size.y/this._dimensions.device.canvas.height,p[a+4]=e.texturePage,p[a+5]=e.texturePositionClipSpace.x,p[a+6]=e.texturePositionClipSpace.y,p[a+7]=e.sizeClipSpace.x,p[a+8]=e.sizeClipSpace.y)):p.fill(0,a,a+v-1-2)}clear(){const p=this._terminal,w=p.cols*p.rows*v;this._vertices.count!==w?this._vertices.attributes=new Float32Array(w):this._vertices.attributes.fill(0);let d=0;for(;d<this._vertices.attributesBuffers.length;d++)this._vertices.count!==w?this._vertices.attributesBuffers[d]=new Float32Array(w):this._vertices.attributesBuffers[d].fill(0);this._vertices.count=w,d=0;for(let _=0;_<p.rows;_++)for(let L=0;L<p.cols;L++)this._vertices.attributes[d+9]=L/p.cols,this._vertices.attributes[d+10]=_/p.rows,d+=v}handleResize(){const p=this._gl;p.viewport(0,0,p.canvas.width,p.canvas.height),p.uniform2f(this._resolutionLocation,p.canvas.width,p.canvas.height),this.clear()}render(p){if(!this._atlas)return;const w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const d=this._vertices.attributesBuffers[this._activeBuffer];let _=0;for(let L=0;L<p.lineLengths.length;L++){const x=L*this._terminal.cols*v,T=this._vertices.attributes.subarray(x,x+p.lineLengths[L]*v);d.set(T,_),_+=T.length}w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,d.subarray(0,_),w.STREAM_DRAW);for(let L=0;L<this._atlas.pages.length;L++)this._atlas.pages[L].version!==this._atlasTextures[L].version&&this._bindAtlasPageTexture(w,this._atlas,L);w.drawElementsInstanced(w.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,_/v)}setAtlas(p){this._atlas=p;for(const w of this._atlasTextures)w.version=-1}_bindAtlasPageTexture(p,w,d){p.activeTexture(p.TEXTURE0+d),p.bindTexture(p.TEXTURE_2D,this._atlasTextures[d].texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,w.pages[d].canvas),p.generateMipmap(p.TEXTURE_2D),this._atlasTextures[d].version=w.pages[d].version}setDimensions(p){this._dimensions=p}}i.GlyphRenderer=c},742:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const h=r(381),u=r(310),l=r(859),g=r(237),S=r(374),v=8*Float32Array.BYTES_PER_ELEMENT;let s=0,e=!1,a=0,f=0,n=0,c=0,m=0,p=0;class w extends l.Disposable{constructor(_,L,x,T){super(),this._terminal=_,this._gl=L,this._dimensions=x,this._themeService=T,this._vertices={count:0,attributes:new Float32Array(160)};const M=this._gl;this._program=(0,S.throwIfFalsy)((0,h.createProgram)(M,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,l.toDisposable)(()=>M.deleteProgram(this._program))),this._projectionLocation=(0,S.throwIfFalsy)(M.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=M.createVertexArray(),M.bindVertexArray(this._vertexArrayObject);const H=new Float32Array([0,0,1,0,0,1,1,1]),$=M.createBuffer();this.register((0,l.toDisposable)(()=>M.deleteBuffer($))),M.bindBuffer(M.ARRAY_BUFFER,$),M.bufferData(M.ARRAY_BUFFER,H,M.STATIC_DRAW),M.enableVertexAttribArray(3),M.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const N=new Uint8Array([0,1,2,3]),y=M.createBuffer();this.register((0,l.toDisposable)(()=>M.deleteBuffer(y))),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,y),M.bufferData(M.ELEMENT_ARRAY_BUFFER,N,M.STATIC_DRAW),this._attributesBuffer=(0,S.throwIfFalsy)(M.createBuffer()),this.register((0,l.toDisposable)(()=>M.deleteBuffer(this._attributesBuffer))),M.bindBuffer(M.ARRAY_BUFFER,this._attributesBuffer),M.enableVertexAttribArray(0),M.vertexAttribPointer(0,2,M.FLOAT,!1,v,0),M.vertexAttribDivisor(0,1),M.enableVertexAttribArray(1),M.vertexAttribPointer(1,2,M.FLOAT,!1,v,2*Float32Array.BYTES_PER_ELEMENT),M.vertexAttribDivisor(1,1),M.enableVertexAttribArray(2),M.vertexAttribPointer(2,4,M.FLOAT,!1,v,4*Float32Array.BYTES_PER_ELEMENT),M.vertexAttribDivisor(2,1),this._updateCachedColors(T.colors),this.register(this._themeService.onChangeColors(D=>{this._updateCachedColors(D),this._updateViewportRectangle()}))}render(){const _=this._gl;_.useProgram(this._program),_.bindVertexArray(this._vertexArrayObject),_.uniformMatrix4fv(this._projectionLocation,!1,h.PROJECTION_MATRIX),_.bindBuffer(_.ARRAY_BUFFER,this._attributesBuffer),_.bufferData(_.ARRAY_BUFFER,this._vertices.attributes,_.DYNAMIC_DRAW),_.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,_.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(_){this._dimensions=_}_updateCachedColors(_){this._bgFloat=this._colorToFloat32Array(_.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(_){const L=this._terminal,x=this._vertices;let T,M,H,$,N,y,D,B,O,j,X,re=1;for(T=0;T<L.rows;T++){for(H=-1,$=0,N=0,y=!1,M=0;M<L.cols;M++)D=(T*L.cols+M)*u.RENDER_MODEL_INDICIES_PER_CELL,B=_.cells[D+u.RENDER_MODEL_BG_OFFSET],O=_.cells[D+u.RENDER_MODEL_FG_OFFSET],j=!!(67108864&O),(B!==$||O!==N&&(y||j))&&(($!==0||y&&N!==0)&&(X=8*re++,this._updateRectangle(x,X,N,$,H,M,T)),H=M,$=B,N=O,y=j);($!==0||y&&N!==0)&&(X=8*re++,this._updateRectangle(x,X,N,$,H,L.cols,T))}x.count=re}_updateRectangle(_,L,x,T,M,H,$){if(e=!1,67108864&x)switch(50331648&x){case 16777216:case 33554432:s=this._themeService.colors.ansi[255&x].rgba;break;case 50331648:s=(16777215&x)<<8;break;default:s=this._themeService.colors.foreground.rgba}else switch(50331648&T){case 16777216:case 33554432:s=this._themeService.colors.ansi[255&T].rgba;break;case 50331648:s=(16777215&T)<<8;break;default:s=this._themeService.colors.background.rgba,e=!0}_.attributes.length<L+4&&(_.attributes=(0,h.expandFloat32Array)(_.attributes,this._terminal.rows*this._terminal.cols*8)),a=M*this._dimensions.device.cell.width,f=$*this._dimensions.device.cell.height,n=(s>>24&255)/255,c=(s>>16&255)/255,m=(s>>8&255)/255,p=!e&&134217728&T?g.DIM_OPACITY:1,this._addRectangle(_.attributes,L,a,f,(H-M)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,n,c,m,p)}_addRectangle(_,L,x,T,M,H,$,N,y,D){_[L]=x/this._dimensions.device.canvas.width,_[L+1]=T/this._dimensions.device.canvas.height,_[L+2]=M/this._dimensions.device.canvas.width,_[L+3]=H/this._dimensions.device.canvas.height,_[L+4]=$,_[L+5]=N,_[L+6]=y,_[L+7]=D}_addRectangleFloat(_,L,x,T,M,H,$){_[L]=x/this._dimensions.device.canvas.width,_[L+1]=T/this._dimensions.device.canvas.height,_[L+2]=M/this._dimensions.device.canvas.width,_[L+3]=H/this._dimensions.device.canvas.height,_[L+4]=$[0],_[L+5]=$[1],_[L+6]=$[2],_[L+7]=$[3]}_colorToFloat32Array(_){return new Float32Array([(_.rgba>>24&255)/255,(_.rgba>>16&255)/255,(_.rgba>>8&255)/255,(255&_.rgba)/255])}}i.RectangleRenderer=w},310:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const h=r(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,h.createSelectionRenderModel)()}resize(u,l){const g=u*l*i.RENDER_MODEL_INDICIES_PER_CELL;g!==this.cells.length&&(this.cells=new Uint32Array(g),this.lineLengths=new Uint32Array(l))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const h=r(820),u=r(274),l=r(627),g=r(56),S=r(374),v=r(147),s=r(782),e=r(855),a=r(345),f=r(859),n=r(965),c=r(742),m=r(461),p=r(733),w=r(310);class d extends f.Disposable{constructor(x,T,M,H,$,N,y,D,B){super(),this._terminal=x,this._characterJoinerService=T,this._charSizeService=M,this._coreBrowserService=H,this._decorationService=N,this._optionsService=y,this._themeService=D,this._model=new w.RenderModel,this._workCell=new s.CellData,this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new a.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new u.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new p.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,y,this._themeService),new m.CursorRenderLayer(x,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,$,y,this._themeService)],this.dimensions=(0,S.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(y.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const O={antialias:!1,depth:!1,preserveDrawingBuffer:B};if(this._gl=this._canvas.getContext("webgl2",O),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,h.addDisposableDomListener)(this._canvas,"webglcontextlost",j=>{console.log("webglcontextlost event received"),j.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(j)},3e3)})),this.register((0,h.addDisposableDomListener)(this._canvas,"webglcontextrestored",j=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,l.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,g.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(j,X)=>this._setCanvasDevicePixelDimensions(j,X))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,f.toDisposable)(()=>{var j;for(const X of this._renderLayers)X.dispose();(j=this._canvas.parentElement)===null||j===void 0||j.removeChild(this._canvas),(0,l.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var x;return(x=this._charAtlas)===null||x===void 0?void 0:x.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(x,T){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const M of this._renderLayers)M.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const x of this._renderLayers)x.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(const x of this._renderLayers)x.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(x,T,M){for(const H of this._renderLayers)H.handleSelectionChanged(this._terminal,x,T,M);this._model.selection.update(this._terminal,x,T,M),this._requestRedrawViewport()}handleCursorMove(){for(const x of this._renderLayers)x.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var x,T;return(x=this._rectangleRenderer)===null||x===void 0||x.dispose(),(T=this._glyphRenderer)===null||T===void 0||T.dispose(),this._rectangleRenderer=this.register(new c.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new n.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var x;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const T=(0,l.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==T&&((x=this._charAtlasDisposable)===null||x===void 0||x.dispose(),this._onChangeTextureAtlas.fire(T.pages[0].canvas),this._charAtlasDisposable=(0,f.getDisposeArrayDisposable)([(0,a.forwardEvent)(T.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,a.forwardEvent)(T.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=T,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(x){this._model.clear(),x&&this._glyphRenderer.clear()}clearTextureAtlas(){var x;(x=this._charAtlas)===null||x===void 0||x.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const x of this._renderLayers)x.reset(this._terminal)}registerCharacterJoiner(x){return-1}deregisterCharacterJoiner(x){return!1}renderRows(x,T){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const M of this._renderLayers)M.handleGridChanged(this._terminal,x,T);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(x,T),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(x,T){const M=this._core;let H,$,N,y,D,B,O,j,X,re,Y,te,P,I=this._workCell;for($=x;$<=T&&(N=$+M.buffer.ydisp,y=M.buffer.lines.get(N),y);$++)for(this._model.lineLengths[$]=0,D=this._characterJoinerService.getJoinedCharacters(N),te=0;te<M.cols;te++)if(H=this._cellColorResolver.result.bg,y.loadCell(te,I),te===0&&(H=this._cellColorResolver.result.bg),B=!1,O=te,D.length>0&&te===D[0][0]&&(B=!0,j=D.shift(),I=new _(I,y.translateToString(!0,j[0],j[1]),j[1]-j[0]),O=j[1]-1),X=I.getChars(),re=I.getCode(),Y=($*M.cols+te)*w.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(I,te,N),re!==e.NULL_CELL_CODE&&(this._model.lineLengths[$]=te+1),(this._model.cells[Y]!==re||this._model.cells[Y+w.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Y+w.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Y+w.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(X.length>1&&(re|=w.COMBINED_CHAR_BIT_MASK),this._model.cells[Y]=re,this._model.cells[Y+w.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Y+w.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Y+w.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(te,$,re,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,X,H),B))for(I=this._workCell,te++;te<O;te++)P=($*M.cols+te)*w.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(te,$,e.NULL_CELL_CODE,0,0,0,e.NULL_CELL_CHAR,0),this._model.cells[P]=e.NULL_CELL_CODE,this._model.cells[P+w.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[P+w.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[P+w.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(x,T){this._canvas.width===x&&this._canvas.height===T||(this._canvas.width=x,this._canvas.height=T,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}i.WebglRenderer=d;class _ extends v.AttributeData{constructor(x,T,M){super(),this.content=0,this.combinedData="",this.fg=x.fg,this.bg=x.bg,this.combinedData=T,this._width=M}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(x){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=_},381:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const h=r(374);function u(l,g,S){const v=(0,h.throwIfFalsy)(l.createShader(g));if(l.shaderSource(v,S),l.compileShader(v),l.getShaderParameter(v,l.COMPILE_STATUS))return v;console.error(l.getShaderInfoLog(v)),l.deleteShader(v)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(l,g,S){const v=(0,h.throwIfFalsy)(l.createProgram());if(l.attachShader(v,(0,h.throwIfFalsy)(u(l,l.VERTEX_SHADER,g))),l.attachShader(v,(0,h.throwIfFalsy)(u(l,l.FRAGMENT_SHADER,S))),l.linkProgram(v),l.getProgramParameter(v,l.LINK_STATUS))return v;console.error(l.getProgramInfoLog(v)),l.deleteProgram(v)},i.createShader=u,i.expandFloat32Array=function(l,g){const S=Math.min(2*l.length,g),v=new Float32Array(S);for(let s=0;s<l.length;s++)v[s]=l[s];return v},i.GLTexture=class{constructor(l){this.texture=l,this.version=-1}}},592:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const h=r(627),u=r(237),l=r(374),g=r(859);class S extends g.Disposable{constructor(s,e,a,f,n,c,m,p){super(),this._container=e,this._alpha=n,this._coreBrowserService=c,this._optionsService=m,this._themeService=p,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=f.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(w=>{this._refreshCharAtlas(s,w),this.reset(s)})),this.register((0,g.toDisposable)(()=>{var w;this._canvas.remove(),(w=this._charAtlas)===null||w===void 0||w.dispose()}))}_initCanvas(){this._ctx=(0,l.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(s){}handleFocus(s){}handleCursorMove(s){}handleGridChanged(s,e,a){}handleSelectionChanged(s,e,a,f=!1){}_setTransparency(s,e){if(e===this._alpha)return;const a=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(s,this._themeService.colors),this.handleGridChanged(s,0,s.rows-1)}_refreshCharAtlas(s,e){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,h.acquireTextureAtlas)(s,this._optionsService.rawOptions,e,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(s,e){this._deviceCellWidth=e.device.cell.width,this._deviceCellHeight=e.device.cell.height,this._deviceCharWidth=e.device.char.width,this._deviceCharHeight=e.device.char.height,this._deviceCharLeft=e.device.char.left,this._deviceCharTop=e.device.char.top,this._canvas.width=e.device.canvas.width,this._canvas.height=e.device.canvas.height,this._canvas.style.width=`${e.css.canvas.width}px`,this._canvas.style.height=`${e.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(s,this._themeService.colors)}_fillCells(s,e,a,f){this._ctx.fillRect(s*this._deviceCellWidth,e*this._deviceCellHeight,a*this._deviceCellWidth,f*this._deviceCellHeight)}_fillBottomLineAtCells(s,e,a=1){this._ctx.fillRect(s*this._deviceCellWidth,(e+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(s,e,a){this._ctx.fillRect(s*this._deviceCellWidth,e*this._deviceCellHeight,this._coreBrowserService.dpr*a,this._deviceCellHeight)}_strokeRectAtCell(s,e,a,f){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(s*this._deviceCellWidth+this._coreBrowserService.dpr/2,e*this._deviceCellHeight+this._coreBrowserService.dpr/2,a*this._deviceCellWidth-this._coreBrowserService.dpr,f*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(s,e,a,f){this._alpha?this._ctx.clearRect(s*this._deviceCellWidth,e*this._deviceCellHeight,a*this._deviceCellWidth,f*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(s*this._deviceCellWidth,e*this._deviceCellHeight,a*this._deviceCellWidth,f*this._deviceCellHeight))}_fillCharTrueColor(s,e,a,f){this._ctx.font=this._getFont(s,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(a,f,e.getWidth()),this._ctx.fillText(e.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,f*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(s,e,a){this._ctx.beginPath(),this._ctx.rect(s*this._deviceCellWidth,e*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(s,e,a){return`${a?"italic":""} ${e?s.options.fontWeightBold:s.options.fontWeight} ${s.options.fontSize*this._coreBrowserService.dpr}px ${s.options.fontFamily}`}}i.BaseRenderLayer=S},461:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const h=r(592),u=r(782),l=r(859);class g extends h.BaseRenderLayer{constructor(s,e,a,f,n,c,m,p){super(s,e,"cursor",a,!0,n,m,p),this._onRequestRefreshRowsEvent=f,this._coreService=c,this._cell=new u.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(s),this.register(m.onOptionChange(()=>this._handleOptionsChanged(s))),this.register((0,l.toDisposable)(()=>{var w;(w=this._cursorBlinkStateManager)===null||w===void 0||w.dispose(),this._cursorBlinkStateManager=void 0}))}resize(s,e){super.resize(s,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(s){var e;this._clearCursor(),(e=this._cursorBlinkStateManager)===null||e===void 0||e.restartBlinkAnimation(s),this._handleOptionsChanged(s)}handleBlur(s){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.pause(),this._onRequestRefreshRowsEvent.fire({start:s.buffer.active.cursorY,end:s.buffer.active.cursorY})}handleFocus(s){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.resume(s),this._onRequestRefreshRowsEvent.fire({start:s.buffer.active.cursorY,end:s.buffer.active.cursorY})}_handleOptionsChanged(s){var e;s.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new S(()=>{this._render(s,!0)},this._coreBrowserService)):((e=this._cursorBlinkStateManager)===null||e===void 0||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:s.buffer.active.cursorY,end:s.buffer.active.cursorY})}handleCursorMove(s){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.restartBlinkAnimation(s)}handleGridChanged(s,e,a){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(s,!1):this._cursorBlinkStateManager.restartBlinkAnimation(s)}_render(s,e){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=s.buffer.active.baseY+s.buffer.active.cursorY,f=a-s.buffer.active.viewportY,n=Math.min(s.buffer.active.cursorX,s.cols-1);if(f<0||f>=s.rows)this._clearCursor();else if(s._core.buffer.lines.get(a).loadCell(n,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const c=s.options.cursorStyle;return c&&c!=="block"?this._cursorRenderers[c](s,n,f,this._cell):this._renderBlurCursor(s,n,f,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=f,this._state.isFocused=!1,this._state.style=c,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===n&&this._state.y===f&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===s.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[s.options.cursorStyle||"block"](s,n,f,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=f,this._state.isFocused=!1,this._state.style=s.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(s,e,a,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(e,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(s,e,a,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(e,a,f.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(s,f,e,a),this._ctx.restore()}_renderUnderlineCursor(s,e,a,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(e,a),this._ctx.restore()}_renderBlurCursor(s,e,a,f){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(e,a,f.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=g;class S{constructor(s,e){this._renderCallback=s,this._coreBrowserService=e,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(s){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(s=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},s)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(s){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(s)}}},733:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const h=r(197),u=r(237),l=r(592);class g extends l.BaseRenderLayer{constructor(v,s,e,a,f,n,c){super(e,v,"link",s,!0,f,n,c),this.register(a.onShowLinkUnderline(m=>this._handleShowLinkUnderline(m))),this.register(a.onHideLinkUnderline(m=>this._handleHideLinkUnderline(m)))}resize(v,s){super.resize(v,s),this._state=void 0}reset(v){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const v=this._state.y2-this._state.y1-1;v>0&&this._clearCells(0,this._state.y1+1,this._state.cols,v),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(v){if(v.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:v.fg!==void 0&&(0,h.is256Color)(v.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[v.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,v.y1===v.y2)this._fillBottomLineAtCells(v.x1,v.y1,v.x2-v.x1);else{this._fillBottomLineAtCells(v.x1,v.y1,v.cols-v.x1);for(let s=v.y1+1;s<v.y2;s++)this._fillBottomLineAtCells(0,s,v.cols);this._fillBottomLineAtCells(0,v.y2,v.x2)}this._state=v}_handleHideLinkUnderline(v){this._clearCurrentLink()}}i.LinkRenderLayer=g},820:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(r,h,u,l){r.addEventListener(h,u,l);let g=!1;return{dispose:()=>{g||(g=!0,r.removeEventListener(h,u,l))}}}},274:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;let r,h=0,u=0,l=!1,g=!1,S=!1;i.CellColorResolver=class{constructor(v,s,e,a,f){this._terminal=v,this._selectionRenderModel=s,this._decorationService=e,this._coreBrowserService=a,this._themeService=f,this.result={fg:0,bg:0,ext:0}}resolve(v,s,e){this.result.bg=v.bg,this.result.fg=v.fg,this.result.ext=268435456&v.bg?v.extended.ext:0,u=0,h=0,g=!1,l=!1,S=!1,r=this._themeService.colors,this._decorationService.forEachDecorationAtCell(s,e,"bottom",a=>{a.backgroundColorRGB&&(u=a.backgroundColorRGB.rgba>>8&16777215,g=!0),a.foregroundColorRGB&&(h=a.foregroundColorRGB.rgba>>8&16777215,l=!0)}),S=this._selectionRenderModel.isCellSelected(this._terminal,s,e),S&&(u=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&16777215,g=!0,r.selectionForeground&&(h=r.selectionForeground.rgba>>8&16777215,l=!0)),this._decorationService.forEachDecorationAtCell(s,e,"top",a=>{a.backgroundColorRGB&&(u=a.backgroundColorRGB.rgba>>8&16777215,g=!0),a.foregroundColorRGB&&(h=a.foregroundColorRGB.rgba>>8&16777215,l=!0)}),g&&(u=S?-16777216&v.bg&-134217729|u|50331648:-16777216&v.bg|u|50331648),l&&(h=-16777216&v.fg&-67108865|h|50331648),67108864&this.result.fg&&(g&&!l&&(h=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&r.background.rgba>>8|50331648,l=!0),!g&&l&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&r.foreground.rgba>>8|50331648,g=!0)),r=void 0,this.result.bg=g?u:this.result.bg,this.result.fg=l?h:this.result.fg}}},627:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const h=r(509),u=r(197),l=[];i.acquireTextureAtlas=function(g,S,v,s,e,a,f,n){const c=(0,u.generateConfig)(s,e,a,f,S,v,n);for(let w=0;w<l.length;w++){const d=l[w],_=d.ownedBy.indexOf(g);if(_>=0){if((0,u.configEquals)(d.config,c))return d.atlas;d.ownedBy.length===1?(d.atlas.dispose(),l.splice(w,1)):d.ownedBy.splice(_,1);break}}for(let w=0;w<l.length;w++){const d=l[w];if((0,u.configEquals)(d.config,c))return d.ownedBy.push(g),d.atlas}const m=g._core,p={atlas:new h.TextureAtlas(document,c,m.unicodeService),config:c,ownedBy:[g]};return l.push(p),p.atlas},i.removeTerminalFromCache=function(g){for(let S=0;S<l.length;S++){const v=l[S].ownedBy.indexOf(g);if(v!==-1){l[S].ownedBy.length===1?(l[S].atlas.dispose(),l.splice(S,1)):l[S].ownedBy.splice(v,1);break}}}},197:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const h=r(160);i.generateConfig=function(u,l,g,S,v,s,e){const a={foreground:s.foreground,background:s.background,cursor:h.NULL_COLOR,cursorAccent:h.NULL_COLOR,selectionForeground:h.NULL_COLOR,selectionBackgroundTransparent:h.NULL_COLOR,selectionBackgroundOpaque:h.NULL_COLOR,selectionInactiveBackgroundTransparent:h.NULL_COLOR,selectionInactiveBackgroundOpaque:h.NULL_COLOR,ansi:s.ansi.slice(),contrastCache:s.contrastCache};return{customGlyphs:v.customGlyphs,devicePixelRatio:e,letterSpacing:v.letterSpacing,lineHeight:v.lineHeight,deviceCellWidth:u,deviceCellHeight:l,deviceCharWidth:g,deviceCharHeight:S,fontFamily:v.fontFamily,fontSize:v.fontSize,fontWeight:v.fontWeight,fontWeightBold:v.fontWeightBold,allowTransparency:v.allowTransparency,drawBoldTextInBrightColors:v.drawBoldTextInBrightColors,minimumContrastRatio:v.minimumContrastRatio,colors:a}},i.configEquals=function(u,l){for(let g=0;g<u.colors.ansi.length;g++)if(u.colors.ansi[g].rgba!==l.colors.ansi[g].rgba)return!1;return u.devicePixelRatio===l.devicePixelRatio&&u.customGlyphs===l.customGlyphs&&u.lineHeight===l.lineHeight&&u.letterSpacing===l.letterSpacing&&u.fontFamily===l.fontFamily&&u.fontSize===l.fontSize&&u.fontWeight===l.fontWeight&&u.fontWeightBold===l.fontWeightBold&&u.allowTransparency===l.allowTransparency&&u.deviceCharWidth===l.deviceCharWidth&&u.deviceCharHeight===l.deviceCharHeight&&u.drawBoldTextInBrightColors===l.drawBoldTextInBrightColors&&u.minimumContrastRatio===l.minimumContrastRatio&&u.colors.foreground.rgba===l.colors.foreground.rgba&&u.colors.background.rgba===l.colors.background.rgba},i.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=r(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},860:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const h=r(374);i.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const u={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(s,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"║":{1:(s,e)=>`M${.5-s},0 L${.5-s},1 M${.5+s},0 L${.5+s},1`},"╒":{1:(s,e)=>`M.5,1 L.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"╓":{1:(s,e)=>`M${.5-s},1 L${.5-s},.5 L1,.5 M${.5+s},.5 L${.5+s},1`},"╔":{1:(s,e)=>`M1,${.5-e} L${.5-s},${.5-e} L${.5-s},1 M1,${.5+e} L${.5+s},${.5+e} L${.5+s},1`},"╕":{1:(s,e)=>`M0,${.5-e} L.5,${.5-e} L.5,1 M0,${.5+e} L.5,${.5+e}`},"╖":{1:(s,e)=>`M${.5+s},1 L${.5+s},.5 L0,.5 M${.5-s},.5 L${.5-s},1`},"╗":{1:(s,e)=>`M0,${.5+e} L${.5-s},${.5+e} L${.5-s},1 M0,${.5-e} L${.5+s},${.5-e} L${.5+s},1`},"╘":{1:(s,e)=>`M.5,0 L.5,${.5+e} L1,${.5+e} M.5,${.5-e} L1,${.5-e}`},"╙":{1:(s,e)=>`M1,.5 L${.5-s},.5 L${.5-s},0 M${.5+s},.5 L${.5+s},0`},"╚":{1:(s,e)=>`M1,${.5-e} L${.5+s},${.5-e} L${.5+s},0 M1,${.5+e} L${.5-s},${.5+e} L${.5-s},0`},"╛":{1:(s,e)=>`M0,${.5+e} L.5,${.5+e} L.5,0 M0,${.5-e} L.5,${.5-e}`},"╜":{1:(s,e)=>`M0,.5 L${.5+s},.5 L${.5+s},0 M${.5-s},.5 L${.5-s},0`},"╝":{1:(s,e)=>`M0,${.5-e} L${.5-s},${.5-e} L${.5-s},0 M0,${.5+e} L${.5+s},${.5+e} L${.5+s},0`},"╞":{1:(s,e)=>`M.5,0 L.5,1 M.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"╟":{1:(s,e)=>`M${.5-s},0 L${.5-s},1 M${.5+s},0 L${.5+s},1 M${.5+s},.5 L1,.5`},"╠":{1:(s,e)=>`M${.5-s},0 L${.5-s},1 M1,${.5+e} L${.5+s},${.5+e} L${.5+s},1 M1,${.5-e} L${.5+s},${.5-e} L${.5+s},0`},"╡":{1:(s,e)=>`M.5,0 L.5,1 M0,${.5-e} L.5,${.5-e} M0,${.5+e} L.5,${.5+e}`},"╢":{1:(s,e)=>`M0,.5 L${.5-s},.5 M${.5-s},0 L${.5-s},1 M${.5+s},0 L${.5+s},1`},"╣":{1:(s,e)=>`M${.5+s},0 L${.5+s},1 M0,${.5+e} L${.5-s},${.5+e} L${.5-s},1 M0,${.5-e} L${.5-s},${.5-e} L${.5-s},0`},"╤":{1:(s,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e} M.5,${.5+e} L.5,1`},"╥":{1:(s,e)=>`M0,.5 L1,.5 M${.5-s},.5 L${.5-s},1 M${.5+s},.5 L${.5+s},1`},"╦":{1:(s,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L${.5-s},${.5+e} L${.5-s},1 M1,${.5+e} L${.5+s},${.5+e} L${.5+s},1`},"╧":{1:(s,e)=>`M.5,0 L.5,${.5-e} M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"╨":{1:(s,e)=>`M0,.5 L1,.5 M${.5-s},.5 L${.5-s},0 M${.5+s},.5 L${.5+s},0`},"╩":{1:(s,e)=>`M0,${.5+e} L1,${.5+e} M0,${.5-e} L${.5-s},${.5-e} L${.5-s},0 M1,${.5-e} L${.5+s},${.5-e} L${.5+s},0`},"╪":{1:(s,e)=>`M.5,0 L.5,1 M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"╫":{1:(s,e)=>`M0,.5 L1,.5 M${.5-s},0 L${.5-s},1 M${.5+s},0 L${.5+s},1`},"╬":{1:(s,e)=>`M0,${.5+e} L${.5-s},${.5+e} L${.5-s},1 M1,${.5+e} L${.5+s},${.5+e} L${.5+s},1 M0,${.5-e} L${.5-s},${.5-e} L${.5-s},0 M1,${.5-e} L${.5+s},${.5-e} L${.5+s},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(s,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,1,.5`},"╮":{1:(s,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,0,.5`},"╯":{1:(s,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,0,.5`},"╰":{1:(s,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(s,e,a,f,n,c,m,p){const w=i.blockElementDefinitions[e];if(w)return function(x,T,M,H,$,N){for(let y=0;y<T.length;y++){const D=T[y],B=$/8,O=N/8;x.fillRect(M+D.x*B,H+D.y*O,D.w*B,D.h*O)}}(s,w,a,f,n,c),!0;const d=u[e];if(d)return function(x,T,M,H,$,N){let y=l.get(T);y||(y=new Map,l.set(T,y));const D=x.fillStyle;if(typeof D!="string")throw new Error(`Unexpected fillStyle type "${D}"`);let B=y.get(D);if(!B){const O=T[0].length,j=T.length,X=document.createElement("canvas");X.width=O,X.height=j;const re=(0,h.throwIfFalsy)(X.getContext("2d")),Y=new ImageData(O,j);let te,P,I,U;if(D.startsWith("#"))te=parseInt(D.slice(1,3),16),P=parseInt(D.slice(3,5),16),I=parseInt(D.slice(5,7),16),U=D.length>7&&parseInt(D.slice(7,9),16)||1;else{if(!D.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${D}" when drawing pattern glyph`);[te,P,I,U]=D.substring(5,D.length-1).split(",").map(V=>parseFloat(V))}for(let V=0;V<j;V++)for(let Q=0;Q<O;Q++)Y.data[4*(V*O+Q)]=te,Y.data[4*(V*O+Q)+1]=P,Y.data[4*(V*O+Q)+2]=I,Y.data[4*(V*O+Q)+3]=T[V][Q]*(255*U);re.putImageData(Y,0,0),B=(0,h.throwIfFalsy)(x.createPattern(X,null)),y.set(D,B)}x.fillStyle=B,x.fillRect(M,H,$,N)}(s,d,a,f,n,c),!0;const _=i.boxDrawingDefinitions[e];if(_)return function(x,T,M,H,$,N,y){x.strokeStyle=x.fillStyle;for(const[D,B]of Object.entries(T)){let O;x.beginPath(),x.lineWidth=y*Number.parseInt(D),O=typeof B=="function"?B(.15,.15/N*$):B;for(const j of O.split(" ")){const X=j[0],re=S[X];if(!re){console.error(`Could not find drawing instructions for "${X}"`);continue}const Y=j.substring(1).split(",");Y[0]&&Y[1]&&re(x,v(Y,$,N,M,H,!0,y))}x.stroke(),x.closePath()}}(s,_,a,f,n,c,p),!0;const L=i.powerlineDefinitions[e];return!!L&&(function(x,T,M,H,$,N,y,D){var B,O;const j=new Path2D;j.rect(M,H,$,N),x.clip(j),x.beginPath();const X=y/12;x.lineWidth=D*X;for(const re of T.d.split(" ")){const Y=re[0],te=S[Y];if(!te){console.error(`Could not find drawing instructions for "${Y}"`);continue}const P=re.substring(1).split(",");P[0]&&P[1]&&te(x,v(P,$,N,M,H,!1,D,((B=T.leftPadding)!==null&&B!==void 0?B:0)*(X/2),((O=T.rightPadding)!==null&&O!==void 0?O:0)*(X/2)))}T.type===1?(x.strokeStyle=x.fillStyle,x.stroke()):x.fill(),x.closePath()}(s,L,a,f,n,c,m,p),!0)};const l=new Map;function g(s,e,a=0){return Math.max(Math.min(s,e),a)}const S={C:(s,e)=>s.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]),L:(s,e)=>s.lineTo(e[0],e[1]),M:(s,e)=>s.moveTo(e[0],e[1])};function v(s,e,a,f,n,c,m,p=0,w=0){const d=s.map(_=>parseFloat(_)||parseInt(_));if(d.length<2)throw new Error("Too few arguments for instruction");for(let _=0;_<d.length;_+=2)d[_]*=e-p*m-w*m,c&&d[_]!==0&&(d[_]=g(Math.round(d[_]+.5)-.5,e,0)),d[_]+=f+p*m;for(let _=1;_<d.length;_+=2)d[_]*=a,c&&d[_]!==0&&(d[_]=g(Math.round(d[_]+.5)-.5,a,0)),d[_]+=n;return d}},56:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const h=r(859);i.observeDevicePixelDimensions=function(u,l,g){let S=new l.ResizeObserver(v=>{const s=v.find(f=>f.target===u);if(!s)return;if(!("devicePixelContentBoxSize"in s))return S==null||S.disconnect(),void(S=void 0);const e=s.devicePixelContentBoxSize[0].inlineSize,a=s.devicePixelContentBoxSize[0].blockSize;e>0&&a>0&&g(e,a)});try{S.observe(u,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,h.toDisposable)(()=>S==null?void 0:S.disconnect())}},374:(R,i)=>{function r(h){return 57508<=h&&h<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},i.isPowerlineGlyph=r,i.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},i.excludeFromContrastRatioDemands=function(h){return r(h)||function(u){return 9472<=u&&u<=9631}(h)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,l,g,S=!1){if(this.selectionStart=l,this.selectionEnd=g,!l||!g||l[0]===g[0]&&l[1]===g[1])return void this.clear();const v=l[1]-u.buffer.active.viewportY,s=g[1]-u.buffer.active.viewportY,e=Math.max(v,0),a=Math.min(s,u.rows-1);e>=u.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=v,this.viewportEndRow=s,this.viewportCappedStartRow=e,this.viewportCappedEndRow=a,this.startCol=l[0],this.endCol=g[0])}isCellSelected(u,l,g){return!!this.hasSelection&&(g-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&g>=this.viewportCappedStartRow&&l<this.endCol&&g<=this.viewportCappedEndRow:l<this.startCol&&g>=this.viewportCappedStartRow&&l>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&l>=this.startCol)}}i.createSelectionRenderModel=function(){return new r}},509:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const h=r(237),u=r(855),l=r(147),g=r(160),S=r(860),v=r(374),s=r(485),e=r(385),a=r(345),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let n;class c{constructor(_,L,x){this._document=_,this._config=L,this._unicodeService=x,this._didWarmUp=!1,this._cacheMap=new s.FourKeyMap,this._cacheMapCombined=new s.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new l.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new a.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new a.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(_,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const _ of this.pages)_.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const _=new e.IdleTaskQueue;for(let L=33;L<126;L++)_.enqueue(()=>{if(!this._cacheMap.get(L,u.DEFAULT_COLOR,u.DEFAULT_COLOR,u.DEFAULT_EXT)){const x=this._drawToCache(L,u.DEFAULT_COLOR,u.DEFAULT_COLOR,u.DEFAULT_EXT);this._cacheMap.set(L,u.DEFAULT_COLOR,u.DEFAULT_COLOR,u.DEFAULT_EXT,x)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const _ of this._pages)_.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){c.maxAtlasPages&&this._pages.length>=Math.max(4,c.maxAtlasPages/2)&&queueMicrotask(()=>{const L=this._pages.filter(y=>2*y.canvas.width<=(c.maxTextureSize||4096)).sort((y,D)=>D.canvas.width!==y.canvas.width?D.canvas.width-y.canvas.width:D.percentageUsed-y.percentageUsed);let x=-1,T=0;for(let y=0;y<L.length;y++)if(L[y].canvas.width!==T)x=y,T=L[y].canvas.width;else if(y-x==3)break;const M=L.slice(x,x+4),H=M.map(y=>y.glyphs[0].texturePage).sort((y,D)=>y>D?1:-1),$=H[0],N=this._mergePages(M,$);N.version++,this._pages[$]=N;for(let y=H.length-1;y>=1;y--)this._deletePage(H[y]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(N.canvas)});const _=new m(this._document,this._textureSize);return this._pages.push(_),this._activePages.push(_),this._onAddTextureAtlasCanvas.fire(_.canvas),_}_mergePages(_,L){const x=2*_[0].canvas.width,T=new m(this._document,x,_);for(const[M,H]of _.entries()){const $=M*H.canvas.width%x,N=Math.floor(M/2)*H.canvas.height;T.ctx.drawImage(H.canvas,$,N);for(const D of H.glyphs)D.texturePage=L,D.sizeClipSpace.x=D.size.x/x,D.sizeClipSpace.y=D.size.y/x,D.texturePosition.x+=$,D.texturePosition.y+=N,D.texturePositionClipSpace.x=D.texturePosition.x/x,D.texturePositionClipSpace.y=D.texturePosition.y/x;this._onRemoveTextureAtlasCanvas.fire(H.canvas);const y=this._activePages.indexOf(H);y!==-1&&this._activePages.splice(y,1)}return T}_deletePage(_){this._pages.splice(_,1);for(let L=_;L<this._pages.length;L++){const x=this._pages[L];for(const T of x.glyphs)T.texturePage--;x.version++}}getRasterizedGlyphCombinedChar(_,L,x,T){return this._getFromCacheMap(this._cacheMapCombined,_,L,x,T)}getRasterizedGlyph(_,L,x,T){return this._getFromCacheMap(this._cacheMap,_,L,x,T)}_getFromCacheMap(_,L,x,T,M){return n=_.get(L,x,T,M),n||(n=this._drawToCache(L,x,T,M),_.set(L,x,T,M,n)),n}_getColorFromAnsiIndex(_){if(_>=this._config.colors.ansi.length)throw new Error("No color found for idx "+_);return this._config.colors.ansi[_]}_getBackgroundColor(_,L,x,T){if(this._config.allowTransparency)return g.NULL_COLOR;let M;switch(_){case 16777216:case 33554432:M=this._getColorFromAnsiIndex(L);break;case 50331648:const H=l.AttributeData.toColorRGB(L);M=g.rgba.toColor(H[0],H[1],H[2]);break;default:M=x?this._config.colors.foreground:this._config.colors.background}return T&&(M=g.color.blend(this._config.colors.background,g.color.multiplyOpacity(M,h.DIM_OPACITY))),M}_getForegroundColor(_,L,x,T,M,H,$,N,y,D){const B=this._getMinimumContrastColor(_,L,x,T,M,H,!1,y,D);if(B)return B;let O;switch(M){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&y&&H<8&&(H+=8),O=this._getColorFromAnsiIndex(H);break;case 50331648:const j=l.AttributeData.toColorRGB(H);O=g.rgba.toColor(j[0],j[1],j[2]);break;default:O=$?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(O=g.color.opaque(O)),N&&(O=g.color.multiplyOpacity(O,h.DIM_OPACITY)),O}_resolveBackgroundRgba(_,L,x){switch(_){case 16777216:case 33554432:return this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return x?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(_,L,x,T){switch(_){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return x?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(_,L,x,T,M,H,$,N,y){if(this._config.minimumContrastRatio===1||y)return;const D=this._config.colors.contrastCache.getColor(_,T);if(D!==void 0)return D||void 0;const B=this._resolveBackgroundRgba(L,x,$),O=this._resolveForegroundRgba(M,H,$,N),j=g.rgba.ensureContrastRatio(B,O,this._config.minimumContrastRatio);if(!j)return void this._config.colors.contrastCache.setColor(_,T,null);const X=g.rgba.toColor(j>>24&255,j>>16&255,j>>8&255);return this._config.colors.contrastCache.setColor(_,T,X),X}_drawToCache(_,L,x,T){const M=typeof _=="number"?String.fromCharCode(_):_,H=this._config.deviceCellWidth*Math.max(M.length,2)+4;this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const $=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<$&&(this._tmpCanvas.height=$),this._tmpCtx.save(),this._workAttributeData.fg=x,this._workAttributeData.bg=L,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return f;const N=!!this._workAttributeData.isBold(),y=!!this._workAttributeData.isInverse(),D=!!this._workAttributeData.isDim(),B=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),j=!!this._workAttributeData.isStrikethrough();let X=this._workAttributeData.getFgColor(),re=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),te=this._workAttributeData.getBgColorMode();if(y){const K=X;X=Y,Y=K;const ie=re;re=te,te=ie}const P=this._getBackgroundColor(te,Y,y,D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const I=N?this._config.fontWeightBold:this._config.fontWeight,U=B?"italic":"";this._tmpCtx.font=`${U} ${I} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=h.TEXT_BASELINE;const V=M.length===1&&(0,v.isPowerlineGlyph)(M.charCodeAt(0)),Q=M.length===1&&(0,v.isRestrictedPowerlineGlyph)(M.charCodeAt(0)),_e=this._getForegroundColor(L,te,Y,x,re,X,y,D,N,(0,v.excludeFromContrastRatioDemands)(M.charCodeAt(0)));this._tmpCtx.fillStyle=_e.css;const k=Q?0:4;let F=!1;this._config.customGlyphs!==!1&&(F=(0,S.tryDrawCustomChar)(this._tmpCtx,M,k,k,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let W,q=!V;if(W=typeof _=="number"?this._unicodeService.wcwidth(_):this._unicodeService.getStringCellWidth(_),O){this._tmpCtx.save();const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ie=K%2==1?.5:0;if(this._tmpCtx.lineWidth=K,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())q=!1,this._tmpCtx.strokeStyle=`rgb(${l.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{q=!1;let ce=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&ce<8&&(ce+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(ce).css}this._tmpCtx.beginPath();const se=k,ne=Math.ceil(k+this._config.deviceCharHeight)-ie,oe=k+this._config.deviceCharHeight+K-ie,le=Math.ceil(k+this._config.deviceCharHeight+2*K)-ie;for(let ce=0;ce<W;ce++){this._tmpCtx.save();const ae=se+ce*this._config.deviceCellWidth,fe=se+(ce+1)*this._config.deviceCellWidth,ye=ae+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ae,ne),this._tmpCtx.lineTo(fe,ne),this._tmpCtx.moveTo(ae,le),this._tmpCtx.lineTo(fe,le);break;case 3:const Te=K<=1?le:Math.ceil(k+this._config.deviceCharHeight-K/2)-ie,et=K<=1?ne:Math.ceil(k+this._config.deviceCharHeight+K/2)-ie,Ve=new Path2D;Ve.rect(ae,ne,this._config.deviceCellWidth,le-ne),this._tmpCtx.clip(Ve),this._tmpCtx.moveTo(ae-this._config.deviceCellWidth/2,oe),this._tmpCtx.bezierCurveTo(ae-this._config.deviceCellWidth/2,et,ae,et,ae,oe),this._tmpCtx.bezierCurveTo(ae,Te,ye,Te,ye,oe),this._tmpCtx.bezierCurveTo(ye,et,fe,et,fe,oe),this._tmpCtx.bezierCurveTo(fe,Te,fe+this._config.deviceCellWidth/2,Te,fe+this._config.deviceCellWidth/2,oe);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(ae,ne),this._tmpCtx.lineTo(fe,ne);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(ae,ne),this._tmpCtx.lineTo(fe,ne);break;default:this._tmpCtx.moveTo(ae,ne),this._tmpCtx.lineTo(fe,ne)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!F&&this._config.fontSize>=12&&!this._config.allowTransparency&&M!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const ce=this._tmpCtx.measureText(M);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in ce&&ce.actualBoundingBoxDescent>0){this._tmpCtx.save();const ae=new Path2D;ae.rect(se,ne-Math.ceil(K/2),this._config.deviceCellWidth,le-ne+Math.ceil(K/2)),this._tmpCtx.clip(ae),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(M,k,k+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(F||this._tmpCtx.fillText(M,k,k+this._config.deviceCharHeight),M==="_"&&!this._config.allowTransparency){let K=p(this._tmpCtx.getImageData(k,k,this._config.deviceCellWidth,this._config.deviceCellHeight),P,_e,q);if(K)for(let ie=1;ie<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(M,k,k+this._config.deviceCharHeight-ie),K=p(this._tmpCtx.getImageData(k,k,this._config.deviceCellWidth,this._config.deviceCellHeight),P,_e,q),K);ie++);}if(j){const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ie=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=K,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(k,k+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.lineTo(k+this._config.deviceCharWidth*W,k+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.stroke()}this._tmpCtx.restore();const z=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let ee;if(ee=this._config.allowTransparency?function(K){for(let ie=0;ie<K.data.length;ie+=4)if(K.data[ie+3]>0)return!1;return!0}(z):p(z,P,_e,q),ee)return f;const Z=this._findGlyphBoundingBox(z,this._workBoundingBox,H,Q,F,k);let G,J;for(;;){if(this._activePages.length===0){const K=this._createNewPage();G=K,J=K.currentRow,J.height=Z.size.y;break}G=this._activePages[this._activePages.length-1],J=G.currentRow;for(const K of this._activePages)Z.size.y<=K.currentRow.height&&(G=K,J=K.currentRow);for(let K=this._activePages.length-1;K>=0;K--)for(const ie of this._activePages[K].fixedRows)ie.height<=J.height&&Z.size.y<=ie.height&&(G=this._activePages[K],J=ie);if(J.y+Z.size.y>=G.canvas.height||J.height>Z.size.y+2){let K=!1;if(G.currentRow.y+G.currentRow.height+Z.size.y>=G.canvas.height){let ie;for(const se of this._activePages)if(se.currentRow.y+se.currentRow.height+Z.size.y<se.canvas.height){ie=se;break}if(ie)G=ie;else{const se=this._createNewPage();G=se,J=se.currentRow,J.height=Z.size.y,K=!0}}K||(G.currentRow.height>0&&G.fixedRows.push(G.currentRow),J={x:0,y:G.currentRow.y+G.currentRow.height,height:Z.size.y},G.fixedRows.push(J),G.currentRow={x:0,y:J.y+J.height,height:0})}if(J.x+Z.size.x<=G.canvas.width)break;J===G.currentRow?(J.x=0,J.y+=J.height,J.height=0):G.fixedRows.splice(G.fixedRows.indexOf(J),1)}return Z.texturePage=this._pages.indexOf(G),Z.texturePosition.x=J.x,Z.texturePosition.y=J.y,Z.texturePositionClipSpace.x=J.x/G.canvas.width,Z.texturePositionClipSpace.y=J.y/G.canvas.height,Z.sizeClipSpace.x/=G.canvas.width,Z.sizeClipSpace.y/=G.canvas.height,J.height=Math.max(J.height,Z.size.y),J.x+=Z.size.x,G.ctx.putImageData(z,Z.texturePosition.x-this._workBoundingBox.left,Z.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Z.size.x,Z.size.y),G.addGlyph(Z),G.version++,Z}_findGlyphBoundingBox(_,L,x,T,M,H){L.top=0;const $=T?this._config.deviceCellHeight:this._tmpCanvas.height,N=T?this._config.deviceCellWidth:x;let y=!1;for(let D=0;D<$;D++){for(let B=0;B<N;B++){const O=D*this._tmpCanvas.width*4+4*B+3;if(_.data[O]!==0){L.top=D,y=!0;break}}if(y)break}L.left=0,y=!1;for(let D=0;D<H+N;D++){for(let B=0;B<$;B++){const O=B*this._tmpCanvas.width*4+4*D+3;if(_.data[O]!==0){L.left=D,y=!0;break}}if(y)break}L.right=N,y=!1;for(let D=H+N-1;D>=H;D--){for(let B=0;B<$;B++){const O=B*this._tmpCanvas.width*4+4*D+3;if(_.data[O]!==0){L.right=D,y=!0;break}}if(y)break}L.bottom=$,y=!1;for(let D=$-1;D>=0;D--){for(let B=0;B<N;B++){const O=D*this._tmpCanvas.width*4+4*B+3;if(_.data[O]!==0){L.bottom=D,y=!0;break}}if(y)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:L.right-L.left+1,y:L.bottom-L.top+1},sizeClipSpace:{x:L.right-L.left+1,y:L.bottom-L.top+1},offset:{x:-L.left+H+(T||M?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-L.top+H+(T||M?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=c;class m{constructor(_,L,x){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],x)for(const T of x)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=w(_,L,L),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(_){this._glyphs.push(_),this._usedPixels+=_.size.x*_.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function p(d,_,L,x){const T=_.rgba>>>24,M=_.rgba>>>16&255,H=_.rgba>>>8&255,$=L.rgba>>>24,N=L.rgba>>>16&255,y=L.rgba>>>8&255,D=Math.floor((Math.abs(T-$)+Math.abs(M-N)+Math.abs(H-y))/12);let B=!0;for(let O=0;O<d.data.length;O+=4)d.data[O]===T&&d.data[O+1]===M&&d.data[O+2]===H||x&&Math.abs(d.data[O]-T)+Math.abs(d.data[O+1]-M)+Math.abs(d.data[O+2]-H)<D?d.data[O+3]=0:B=!1;return B}function w(d,_,L){const x=d.createElement("canvas");return x.width=_,x.height=L,x}},160:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=r(399);let u=0,l=0,g=0,S=0;var v,s,e;function a(n){const c=n.toString(16);return c.length<2?"0"+c:c}function f(n,c){return n<c?(c+.05)/(n+.05):(n+.05)/(c+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(c,m,p,w){return w!==void 0?`#${a(c)}${a(m)}${a(p)}${a(w)}`:`#${a(c)}${a(m)}${a(p)}`},n.toRgba=function(c,m,p,w=255){return(c<<24|m<<16|p<<8|w)>>>0}}(v=i.channels||(i.channels={})),function(n){function c(m,p){return S=Math.round(255*p),[u,l,g]=e.toChannels(m.rgba),{css:v.toCss(u,l,g,S),rgba:v.toRgba(u,l,g,S)}}n.blend=function(m,p){if(S=(255&p.rgba)/255,S===1)return{css:p.css,rgba:p.rgba};const w=p.rgba>>24&255,d=p.rgba>>16&255,_=p.rgba>>8&255,L=m.rgba>>24&255,x=m.rgba>>16&255,T=m.rgba>>8&255;return u=L+Math.round((w-L)*S),l=x+Math.round((d-x)*S),g=T+Math.round((_-T)*S),{css:v.toCss(u,l,g),rgba:v.toRgba(u,l,g)}},n.isOpaque=function(m){return(255&m.rgba)==255},n.ensureContrastRatio=function(m,p,w){const d=e.ensureContrastRatio(m.rgba,p.rgba,w);if(d)return e.toColor(d>>24&255,d>>16&255,d>>8&255)},n.opaque=function(m){const p=(255|m.rgba)>>>0;return[u,l,g]=e.toChannels(p),{css:v.toCss(u,l,g),rgba:p}},n.opacity=c,n.multiplyOpacity=function(m,p){return S=255&m.rgba,c(m,S*p/255)},n.toColorRGB=function(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}}(i.color||(i.color={})),function(n){let c,m;if(!h.isNode){const p=document.createElement("canvas");p.width=1,p.height=1;const w=p.getContext("2d",{willReadFrequently:!0});w&&(c=w,c.globalCompositeOperation="copy",m=c.createLinearGradient(0,0,1,1))}n.toColor=function(p){if(p.match(/#[\da-f]{3,8}/i))switch(p.length){case 4:return u=parseInt(p.slice(1,2).repeat(2),16),l=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),e.toColor(u,l,g);case 5:return u=parseInt(p.slice(1,2).repeat(2),16),l=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),S=parseInt(p.slice(4,5).repeat(2),16),e.toColor(u,l,g,S);case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}const w=p.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),l=parseInt(w[2]),g=parseInt(w[3]),S=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),e.toColor(u,l,g,S);if(!c||!m)throw new Error("css.toColor: Unsupported css format");if(c.fillStyle=m,c.fillStyle=p,typeof c.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(c.fillRect(0,0,1,1),[u,l,g,S]=c.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,l,g,S),css:p}}}(i.css||(i.css={})),function(n){function c(m,p,w){const d=m/255,_=p/255,L=w/255;return .2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}n.relativeLuminance=function(m){return c(m>>16&255,m>>8&255,255&m)},n.relativeLuminance2=c}(s=i.rgb||(i.rgb={})),function(n){function c(p,w,d){const _=p>>24&255,L=p>>16&255,x=p>>8&255;let T=w>>24&255,M=w>>16&255,H=w>>8&255,$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));for(;$<d&&(T>0||M>0||H>0);)T-=Math.max(0,Math.ceil(.1*T)),M-=Math.max(0,Math.ceil(.1*M)),H-=Math.max(0,Math.ceil(.1*H)),$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));return(T<<24|M<<16|H<<8|255)>>>0}function m(p,w,d){const _=p>>24&255,L=p>>16&255,x=p>>8&255;let T=w>>24&255,M=w>>16&255,H=w>>8&255,$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));for(;$<d&&(T<255||M<255||H<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),M=Math.min(255,M+Math.ceil(.1*(255-M))),H=Math.min(255,H+Math.ceil(.1*(255-H))),$=f(s.relativeLuminance2(T,M,H),s.relativeLuminance2(_,L,x));return(T<<24|M<<16|H<<8|255)>>>0}n.ensureContrastRatio=function(p,w,d){const _=s.relativeLuminance(p>>8),L=s.relativeLuminance(w>>8);if(f(_,L)<d){if(L<_){const M=c(p,w,d),H=f(_,s.relativeLuminance(M>>8));if(H<d){const $=m(p,w,d);return H>f(_,s.relativeLuminance($>>8))?M:$}return M}const x=m(p,w,d),T=f(_,s.relativeLuminance(x>>8));if(T<d){const M=c(p,w,d);return T>f(_,s.relativeLuminance(M>>8))?x:M}return x}},n.reduceLuminance=c,n.increaseLuminance=m,n.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},n.toColor=function(p,w,d,_){return{css:v.toCss(p,w,d,_),rgba:v.toRgba(p,w,d,_)}}}(e=i.rgba||(i.rgba={})),i.toPaddedHex=a,i.contrastRatio=f},345:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===r)return void this._listeners.splice(h,1)}}})),this._event}fire(r,h){const u=[];for(let l=0;l<this._listeners.length;l++)u.push(this._listeners[l]);for(let l=0;l<u.length;l++)u[l].call(void 0,r,h)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},i.forwardEvent=function(r,h){return r(u=>h.fire(u))}},859:(R,i)=>{function r(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=r,i.getDisposeArrayDisposable=function(h){return{dispose:()=>r(h)}}},485:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,l,g){this._data[u]||(this._data[u]={}),this._data[u][l]=g}get(u,l){return this._data[u]?this._data[u][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=r,i.FourKeyMap=class{constructor(){this._data=new r}set(h,u,l,g,S){this._data.get(h,u)||this._data.set(h,u,new r),this._data.get(h,u).set(l,g,S)}get(h,u,l,g){var S;return(S=this._data.get(h,u))===null||S===void 0?void 0:S.get(l,g)}clear(){this._data.clear()}}},399:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const r=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=r.includes("Firefox"),i.isLegacyEdge=r.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(r),i.getSafariVersion=function(){if(!i.isSafari)return 0;const u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(r)},385:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=r(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let v=0,s=0,e=S.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),s=Math.max(v,s),a=S.timeRemaining(),1.5*s>a)return e-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-v))}ms`),void this._start();e=a}this.clear()}}class l extends u{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const v=Date.now()+S;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},147:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new r;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=r;class h{constructor(l=0,g=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=g}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},782:(R,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=r(133),u=r(855),l=r(147);class g extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(v){const s=new g;return s.setFromCharData(v),s}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let s=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)s=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){const e=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){const a=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(e-55296)+a-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:s=!0}else s=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;s&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},855:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},i.utf32ToString=function(r,h=0,u=r.length){let l="";for(let g=h;g<u;++g){let S=r[g];S>65535?(S-=65536,l+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):l+=String.fromCharCode(S)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,h){const u=r.length;if(!u)return 0;let l=0,g=0;if(this._interim){const S=r.charCodeAt(g++);56320<=S&&S<=57343?h[l++]=1024*(this._interim-55296)+S-56320+65536:(h[l++]=this._interim,h[l++]=S),this._interim=0}for(let S=g;S<u;++S){const v=r.charCodeAt(S);if(55296<=v&&v<=56319){if(++S>=u)return this._interim=v,l;const s=r.charCodeAt(S);56320<=s&&s<=57343?h[l++]=1024*(v-55296)+s-56320+65536:(h[l++]=v,h[l++]=s)}else v!==65279&&(h[l++]=v)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,h){const u=r.length;if(!u)return 0;let l,g,S,v,s=0,e=0,a=0;if(this.interim[0]){let c=!1,m=this.interim[0];m&=(224&m)==192?31:(240&m)==224?15:7;let p,w=0;for(;(p=63&this.interim[++w])&&w<4;)m<<=6,m|=p;const d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,_=d-w;for(;a<_;){if(a>=u)return 0;if(p=r[a++],(192&p)!=128){a--,c=!0;break}this.interim[w++]=p,m<<=6,m|=63&p}c||(d===2?m<128?a--:h[s++]=m:d===3?m<2048||m>=55296&&m<=57343||m===65279||(h[s++]=m):m<65536||m>1114111||(h[s++]=m)),this.interim.fill(0)}const f=u-4;let n=a;for(;n<u;){for(;!(!(n<f)||128&(l=r[n])||128&(g=r[n+1])||128&(S=r[n+2])||128&(v=r[n+3]));)h[s++]=l,h[s++]=g,h[s++]=S,h[s++]=v,n+=4;if(l=r[n++],l<128)h[s++]=l;else if((224&l)==192){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(e=(31&l)<<6|63&g,e<128){n--;continue}h[s++]=e}else if((240&l)==224){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,s;if(S=r[n++],(192&S)!=128){n--;continue}if(e=(15&l)<<12|(63&g)<<6|63&S,e<2048||e>=55296&&e<=57343||e===65279)continue;h[s++]=e}else if((248&l)==240){if(n>=u)return this.interim[0]=l,s;if(g=r[n++],(192&g)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,s;if(S=r[n++],(192&S)!=128){n--;continue}if(n>=u)return this.interim[0]=l,this.interim[1]=g,this.interim[2]=S,s;if(v=r[n++],(192&v)!=128){n--;continue}if(e=(7&l)<<18|(63&g)<<12|(63&S)<<6|63&v,e<65536||e>1114111)continue;h[s++]=e}}return s}}}},b={};function E(R){var i=b[R];if(i!==void 0)return i.exports;var r=b[R]={exports:{}};return C[R](r,r.exports,E),r.exports}var A={};return(()=>{var R=A;Object.defineProperty(R,"__esModule",{value:!0}),R.WebglAddon=void 0;const i=E(345),r=E(859),h=E(399),u=E(666);class l extends r.Disposable{constructor(S){if(h.isSafari&&(0,h.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=S,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(S){const v=S._core;if(!S.element)return void this.register(v.onWillOpen(()=>this.activate(S)));this._terminal=S;const s=v.coreService,e=v.optionsService,a=v,f=a._renderService,n=a._characterJoinerService,c=a._charSizeService,m=a._coreBrowserService,p=a._decorationService,w=a._themeService;this._renderer=this.register(new u.WebglRenderer(S,n,c,m,s,p,e,w,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),f.setRenderer(this._renderer),this.register((0,r.toDisposable)(()=>{const d=this._terminal._core._renderService;d.setRenderer(this._terminal._core._createRenderer()),d.handleResize(S.cols,S.rows)}))}get textureAtlas(){var S;return(S=this._renderer)===null||S===void 0?void 0:S.textureAtlas}clearTextureAtlas(){var S;(S=this._renderer)===null||S===void 0||S.clearTextureAtlas()}}R.WebglAddon=l})(),A})()})})(Mr);var Ra=Mr.exports;const Aa=(t,o)=>{const C=t.__vccOpts||t;for(const[b,E]of o)C[b]=E;return C},Ma={id:"xterm-container"},Da={__name:"App",setup(t){let o;return Xi(()=>{const C=document.querySelector("#xterm-container"),b=new La.Terminal({disableStdin:!0,screenReaderMode:!0,smoothScrollDuration:0,cursorBlink:!0}),E=new xa.FitAddon;b.loadAddon(E);const A=new Ra.WebglAddon;A.onContextLoss(()=>{A.dispose()}),b.loadAddon(A),b.open(C),E.fit(),o=new WebSocket(`${document.location.origin.replace("http","ws")}/api/log`),o.addEventListener("open",()=>{b.writeln(Fs.green("connected"))}),o.addEventListener("message",R=>{b.writeln(R.data)}),o.addEventListener("close",()=>{b.writeln(Fs.red("connection lose"))})}),Yi(()=>{o.close()}),(C,b)=>(Eo(),Ro("div",Ma))}},Ta=Aa(Da,[["__scopeId","data-v-4b58e19d"]]);ua(Ta).mount("#app");
