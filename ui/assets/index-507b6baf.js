(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))v(C);new MutationObserver(C=>{for(const w of C)if(w.type==="childList")for(const L of w.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&v(L)}).observe(document,{childList:!0,subtree:!0});function d(C){const w={};return C.integrity&&(w.integrity=C.integrity),C.referrerPolicy&&(w.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?w.credentials="include":C.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function v(C){if(C.ep)return;C.ep=!0;const w=d(C);fetch(C.href,w)}})();function Di(e,s){const d=Object.create(null),v=e.split(",");for(let C=0;C<v.length;C++)d[v[C]]=!0;return s?C=>!!d[C.toLowerCase()]:C=>!!d[C]}function Ti(e){if(ae(e)){const s={};for(let d=0;d<e.length;d++){const v=e[d],C=Ce(v)?Br(v):Ti(v);if(C)for(const w in C)s[w]=C[w]}return s}else{if(Ce(e))return e;if(Se(e))return e}}const kr=/;(?![^(]*\))/g,Dr=/:([^]+)/,Tr=/\/\*.*?\*\//gs;function Br(e){const s={};return e.replace(Tr,"").split(kr).forEach(d=>{if(d){const v=d.split(Dr);v.length>1&&(s[v[0].trim()]=v[1].trim())}}),s}function Bi(e){let s="";if(Ce(e))s=e;else if(ae(e))for(let d=0;d<e.length;d++){const v=Bi(e[d]);v&&(s+=v+" ")}else if(Se(e))for(const d in e)e[d]&&(s+=d+" ");return s.trim()}const Mr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Or=Di(Mr);function Fs(e){return!!e||e===""}const ge={},ct=[],Ie=()=>{},Ir=()=>!1,Pr=/^on[^a-z]/,Vt=e=>Pr.test(e),Mi=e=>e.startsWith("onUpdate:"),ye=Object.assign,Oi=(e,s)=>{const d=e.indexOf(s);d>-1&&e.splice(d,1)},Hr=Object.prototype.hasOwnProperty,he=(e,s)=>Hr.call(e,s),ae=Array.isArray,bt=e=>Xt(e)==="[object Map]",Fr=e=>Xt(e)==="[object Set]",le=e=>typeof e=="function",Ce=e=>typeof e=="string",Ii=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",Us=e=>Se(e)&&le(e.then)&&le(e.catch),Ur=Object.prototype.toString,Xt=e=>Ur.call(e),Nr=e=>Xt(e).slice(8,-1),Wr=e=>Xt(e)==="[object Object]",Pi=e=>Ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ft=Di(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yt=e=>{const s=Object.create(null);return d=>s[d]||(s[d]=e(d))},jr=/-(\w)/g,ut=Yt(e=>e.replace(jr,(s,d)=>d?d.toUpperCase():"")),$r=/\B([A-Z])/g,gt=Yt(e=>e.replace($r,"-$1").toLowerCase()),Ns=Yt(e=>e.charAt(0).toUpperCase()+e.slice(1)),si=Yt(e=>e?`on${Ns(e)}`:""),jt=(e,s)=>!Object.is(e,s),ri=(e,s)=>{for(let d=0;d<e.length;d++)e[d](s)},$t=(e,s,d)=>{Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value:d})},Kr=e=>{const s=parseFloat(e);return isNaN(s)?e:s};let ss;const zr=()=>ss||(ss=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Te;class qr{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!s&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const d=Te;try{return Te=this,s()}finally{Te=d}}}on(){Te=this}off(){Te=this.parent}stop(s){if(this._active){let d,v;for(d=0,v=this.effects.length;d<v;d++)this.effects[d].stop();for(d=0,v=this.cleanups.length;d<v;d++)this.cleanups[d]();if(this.scopes)for(d=0,v=this.scopes.length;d<v;d++)this.scopes[d].stop(!0);if(!this.detached&&this.parent&&!s){const C=this.parent.scopes.pop();C&&C!==this&&(this.parent.scopes[this.index]=C,C.index=this.index)}this.parent=void 0,this._active=!1}}}function Vr(e,s=Te){s&&s.active&&s.effects.push(e)}function Xr(){return Te}const Hi=e=>{const s=new Set(e);return s.w=0,s.n=0,s},Ws=e=>(e.w&Ge)>0,js=e=>(e.n&Ge)>0,Yr=({deps:e})=>{if(e.length)for(let s=0;s<e.length;s++)e[s].w|=Ge},Gr=e=>{const{deps:s}=e;if(s.length){let d=0;for(let v=0;v<s.length;v++){const C=s[v];Ws(C)&&!js(C)?C.delete(e):s[d++]=C,C.w&=~Ge,C.n&=~Ge}s.length=d}},fi=new WeakMap;let Ct=0,Ge=1;const _i=30;let Be;const rt=Symbol(""),pi=Symbol("");class Fi{constructor(s,d=null,v){this.fn=s,this.scheduler=d,this.active=!0,this.deps=[],this.parent=void 0,Vr(this,v)}run(){if(!this.active)return this.fn();let s=Be,d=Xe;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=Be,Be=this,Xe=!0,Ge=1<<++Ct,Ct<=_i?Yr(this):rs(this),this.fn()}finally{Ct<=_i&&Gr(this),Ge=1<<--Ct,Be=this.parent,Xe=d,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Be===this?this.deferStop=!0:this.active&&(rs(this),this.onStop&&this.onStop(),this.active=!1)}}function rs(e){const{deps:s}=e;if(s.length){for(let d=0;d<s.length;d++)s[d].delete(e);s.length=0}}let Xe=!0;const $s=[];function vt(){$s.push(Xe),Xe=!1}function mt(){const e=$s.pop();Xe=e===void 0?!0:e}function xe(e,s,d){if(Xe&&Be){let v=fi.get(e);v||fi.set(e,v=new Map);let C=v.get(d);C||v.set(d,C=Hi()),Ks(C)}}function Ks(e,s){let d=!1;Ct<=_i?js(e)||(e.n|=Ge,d=!Ws(e)):d=!e.has(Be),d&&(e.add(Be),Be.deps.push(e))}function Ke(e,s,d,v,C,w){const L=fi.get(e);if(!L)return;let i=[];if(s==="clear")i=[...L.values()];else if(d==="length"&&ae(e)){const n=Number(v);L.forEach((l,_)=>{(_==="length"||_>=n)&&i.push(l)})}else switch(d!==void 0&&i.push(L.get(d)),s){case"add":ae(e)?Pi(d)&&i.push(L.get("length")):(i.push(L.get(rt)),bt(e)&&i.push(L.get(pi)));break;case"delete":ae(e)||(i.push(L.get(rt)),bt(e)&&i.push(L.get(pi)));break;case"set":bt(e)&&i.push(L.get(rt));break}if(i.length===1)i[0]&&gi(i[0]);else{const n=[];for(const l of i)l&&n.push(...l);gi(Hi(n))}}function gi(e,s){const d=ae(e)?e:[...e];for(const v of d)v.computed&&ns(v);for(const v of d)v.computed||ns(v)}function ns(e,s){(e!==Be||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Jr=Di("__proto__,__v_isRef,__isVue"),zs=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ii)),Zr=Ui(),Qr=Ui(!1,!0),en=Ui(!0),os=tn();function tn(){const e={};return["includes","indexOf","lastIndexOf"].forEach(s=>{e[s]=function(...d){const v=de(this);for(let w=0,L=this.length;w<L;w++)xe(v,"get",w+"");const C=v[s](...d);return C===-1||C===!1?v[s](...d.map(de)):C}}),["push","pop","shift","unshift","splice"].forEach(s=>{e[s]=function(...d){vt();const v=de(this)[s].apply(this,d);return mt(),v}}),e}function sn(e){const s=de(this);return xe(s,"has",e),s.hasOwnProperty(e)}function Ui(e=!1,s=!1){return function(v,C,w){if(C==="__v_isReactive")return!e;if(C==="__v_isReadonly")return e;if(C==="__v_isShallow")return s;if(C==="__v_raw"&&w===(e?s?Sn:Gs:s?Ys:Xs).get(v))return v;const L=ae(v);if(!e){if(L&&he(os,C))return Reflect.get(os,C,w);if(C==="hasOwnProperty")return sn}const i=Reflect.get(v,C,w);return(Ii(C)?zs.has(C):Jr(C))||(e||xe(v,"get",C),s)?i:Ee(i)?L&&Pi(C)?i:i.value:Se(i)?e?Js(i):ji(i):i}}const rn=qs(),nn=qs(!0);function qs(e=!1){return function(d,v,C,w){let L=d[v];if(Et(L)&&Ee(L)&&!Ee(C))return!1;if(!e&&(!vi(C)&&!Et(C)&&(L=de(L),C=de(C)),!ae(d)&&Ee(L)&&!Ee(C)))return L.value=C,!0;const i=ae(d)&&Pi(v)?Number(v)<d.length:he(d,v),n=Reflect.set(d,v,C,w);return d===de(w)&&(i?jt(C,L)&&Ke(d,"set",v,C):Ke(d,"add",v,C)),n}}function on(e,s){const d=he(e,s);e[s];const v=Reflect.deleteProperty(e,s);return v&&d&&Ke(e,"delete",s,void 0),v}function an(e,s){const d=Reflect.has(e,s);return(!Ii(s)||!zs.has(s))&&xe(e,"has",s),d}function ln(e){return xe(e,"iterate",ae(e)?"length":rt),Reflect.ownKeys(e)}const Vs={get:Zr,set:rn,deleteProperty:on,has:an,ownKeys:ln},cn={get:en,set(e,s){return!0},deleteProperty(e,s){return!0}},hn=ye({},Vs,{get:Qr,set:nn}),Ni=e=>e,Gt=e=>Reflect.getPrototypeOf(e);function Tt(e,s,d=!1,v=!1){e=e.__v_raw;const C=de(e),w=de(s);d||(s!==w&&xe(C,"get",s),xe(C,"get",w));const{has:L}=Gt(C),i=v?Ni:d?zi:Ki;if(L.call(C,s))return i(e.get(s));if(L.call(C,w))return i(e.get(w));e!==C&&e.get(s)}function Bt(e,s=!1){const d=this.__v_raw,v=de(d),C=de(e);return s||(e!==C&&xe(v,"has",e),xe(v,"has",C)),e===C?d.has(e):d.has(e)||d.has(C)}function Mt(e,s=!1){return e=e.__v_raw,!s&&xe(de(e),"iterate",rt),Reflect.get(e,"size",e)}function as(e){e=de(e);const s=de(this);return Gt(s).has.call(s,e)||(s.add(e),Ke(s,"add",e,e)),this}function ls(e,s){s=de(s);const d=de(this),{has:v,get:C}=Gt(d);let w=v.call(d,e);w||(e=de(e),w=v.call(d,e));const L=C.call(d,e);return d.set(e,s),w?jt(s,L)&&Ke(d,"set",e,s):Ke(d,"add",e,s),this}function cs(e){const s=de(this),{has:d,get:v}=Gt(s);let C=d.call(s,e);C||(e=de(e),C=d.call(s,e)),v&&v.call(s,e);const w=s.delete(e);return C&&Ke(s,"delete",e,void 0),w}function hs(){const e=de(this),s=e.size!==0,d=e.clear();return s&&Ke(e,"clear",void 0,void 0),d}function Ot(e,s){return function(v,C){const w=this,L=w.__v_raw,i=de(L),n=s?Ni:e?zi:Ki;return!e&&xe(i,"iterate",rt),L.forEach((l,_)=>v.call(C,n(l),n(_),w))}}function It(e,s,d){return function(...v){const C=this.__v_raw,w=de(C),L=bt(w),i=e==="entries"||e===Symbol.iterator&&L,n=e==="keys"&&L,l=C[e](...v),_=d?Ni:s?zi:Ki;return!s&&xe(w,"iterate",n?pi:rt),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:i?[_(f[0]),_(f[1])]:_(f),done:p}},[Symbol.iterator](){return this}}}}function qe(e){return function(...s){return e==="delete"?!1:this}}function dn(){const e={get(w){return Tt(this,w)},get size(){return Mt(this)},has:Bt,add:as,set:ls,delete:cs,clear:hs,forEach:Ot(!1,!1)},s={get(w){return Tt(this,w,!1,!0)},get size(){return Mt(this)},has:Bt,add:as,set:ls,delete:cs,clear:hs,forEach:Ot(!1,!0)},d={get(w){return Tt(this,w,!0)},get size(){return Mt(this,!0)},has(w){return Bt.call(this,w,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:Ot(!0,!1)},v={get(w){return Tt(this,w,!0,!0)},get size(){return Mt(this,!0)},has(w){return Bt.call(this,w,!0)},add:qe("add"),set:qe("set"),delete:qe("delete"),clear:qe("clear"),forEach:Ot(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{e[w]=It(w,!1,!1),d[w]=It(w,!0,!1),s[w]=It(w,!1,!0),v[w]=It(w,!0,!0)}),[e,d,s,v]}const[un,fn,_n,pn]=dn();function Wi(e,s){const d=s?e?pn:_n:e?fn:un;return(v,C,w)=>C==="__v_isReactive"?!e:C==="__v_isReadonly"?e:C==="__v_raw"?v:Reflect.get(he(d,C)&&C in v?d:v,C,w)}const gn={get:Wi(!1,!1)},vn={get:Wi(!1,!0)},mn={get:Wi(!0,!1)},Xs=new WeakMap,Ys=new WeakMap,Gs=new WeakMap,Sn=new WeakMap;function Cn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bn(e){return e.__v_skip||!Object.isExtensible(e)?0:Cn(Nr(e))}function ji(e){return Et(e)?e:$i(e,!1,Vs,gn,Xs)}function yn(e){return $i(e,!1,hn,vn,Ys)}function Js(e){return $i(e,!0,cn,mn,Gs)}function $i(e,s,d,v,C){if(!Se(e)||e.__v_raw&&!(s&&e.__v_isReactive))return e;const w=C.get(e);if(w)return w;const L=bn(e);if(L===0)return e;const i=new Proxy(e,L===2?v:d);return C.set(e,i),i}function ht(e){return Et(e)?ht(e.__v_raw):!!(e&&e.__v_isReactive)}function Et(e){return!!(e&&e.__v_isReadonly)}function vi(e){return!!(e&&e.__v_isShallow)}function Zs(e){return ht(e)||Et(e)}function de(e){const s=e&&e.__v_raw;return s?de(s):e}function Qs(e){return $t(e,"__v_skip",!0),e}const Ki=e=>Se(e)?ji(e):e,zi=e=>Se(e)?Js(e):e;function wn(e){Xe&&Be&&(e=de(e),Ks(e.dep||(e.dep=Hi())))}function En(e,s){e=de(e);const d=e.dep;d&&gi(d)}function Ee(e){return!!(e&&e.__v_isRef===!0)}function Ln(e){return Ee(e)?e.value:e}const xn={get:(e,s,d)=>Ln(Reflect.get(e,s,d)),set:(e,s,d,v)=>{const C=e[s];return Ee(C)&&!Ee(d)?(C.value=d,!0):Reflect.set(e,s,d,v)}};function er(e){return ht(e)?e:new Proxy(e,xn)}var tr;class Rn{constructor(s,d,v,C){this._setter=d,this.dep=void 0,this.__v_isRef=!0,this[tr]=!1,this._dirty=!0,this.effect=new Fi(s,()=>{this._dirty||(this._dirty=!0,En(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!C,this.__v_isReadonly=v}get value(){const s=de(this);return wn(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}tr="__v_isReadonly";function An(e,s,d=!1){let v,C;const w=le(e);return w?(v=e,C=Ie):(v=e.get,C=e.set),new Rn(v,C,w||!C,d)}function Ye(e,s,d,v){let C;try{C=v?e(...v):e()}catch(w){Jt(w,s,d)}return C}function ke(e,s,d,v){if(le(e)){const w=Ye(e,s,d,v);return w&&Us(w)&&w.catch(L=>{Jt(L,s,d)}),w}const C=[];for(let w=0;w<e.length;w++)C.push(ke(e[w],s,d,v));return C}function Jt(e,s,d,v=!0){const C=s?s.vnode:null;if(s){let w=s.parent;const L=s.proxy,i=d;for(;w;){const l=w.ec;if(l){for(let _=0;_<l.length;_++)if(l[_](e,L,i)===!1)return}w=w.parent}const n=s.appContext.config.errorHandler;if(n){Ye(n,null,10,[e,L,i]);return}}kn(e,d,C,v)}function kn(e,s,d,v=!0){console.error(e)}let Lt=!1,mi=!1;const be=[];let We=0;const dt=[];let je=null,tt=0;const ir=Promise.resolve();let qi=null;function Dn(e){const s=qi||ir;return e?s.then(this?e.bind(this):e):s}function Tn(e){let s=We+1,d=be.length;for(;s<d;){const v=s+d>>>1;xt(be[v])<e?s=v+1:d=v}return s}function Vi(e){(!be.length||!be.includes(e,Lt&&e.allowRecurse?We+1:We))&&(e.id==null?be.push(e):be.splice(Tn(e.id),0,e),sr())}function sr(){!Lt&&!mi&&(mi=!0,qi=ir.then(nr))}function Bn(e){const s=be.indexOf(e);s>We&&be.splice(s,1)}function Mn(e){ae(e)?dt.push(...e):(!je||!je.includes(e,e.allowRecurse?tt+1:tt))&&dt.push(e),sr()}function ds(e,s=Lt?We+1:0){for(;s<be.length;s++){const d=be[s];d&&d.pre&&(be.splice(s,1),s--,d())}}function rr(e){if(dt.length){const s=[...new Set(dt)];if(dt.length=0,je){je.push(...s);return}for(je=s,je.sort((d,v)=>xt(d)-xt(v)),tt=0;tt<je.length;tt++)je[tt]();je=null,tt=0}}const xt=e=>e.id==null?1/0:e.id,On=(e,s)=>{const d=xt(e)-xt(s);if(d===0){if(e.pre&&!s.pre)return-1;if(s.pre&&!e.pre)return 1}return d};function nr(e){mi=!1,Lt=!0,be.sort(On);const s=Ie;try{for(We=0;We<be.length;We++){const d=be[We];d&&d.active!==!1&&Ye(d,null,14)}}finally{We=0,be.length=0,rr(),Lt=!1,qi=null,(be.length||dt.length)&&nr()}}function In(e,s,...d){if(e.isUnmounted)return;const v=e.vnode.props||ge;let C=d;const w=s.startsWith("update:"),L=w&&s.slice(7);if(L&&L in v){const _=`${L==="modelValue"?"model":L}Modifiers`,{number:f,trim:p}=v[_]||ge;p&&(C=d.map(S=>Ce(S)?S.trim():S)),f&&(C=d.map(Kr))}let i,n=v[i=si(s)]||v[i=si(ut(s))];!n&&w&&(n=v[i=si(gt(s))]),n&&ke(n,e,6,C);const l=v[i+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,ke(l,e,6,C)}}function or(e,s,d=!1){const v=s.emitsCache,C=v.get(e);if(C!==void 0)return C;const w=e.emits;let L={},i=!1;if(!le(e)){const n=l=>{const _=or(l,s,!0);_&&(i=!0,ye(L,_))};!d&&s.mixins.length&&s.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!w&&!i?(Se(e)&&v.set(e,null),null):(ae(w)?w.forEach(n=>L[n]=null):ye(L,w),Se(e)&&v.set(e,L),L)}function Zt(e,s){return!e||!Vt(s)?!1:(s=s.slice(2).replace(/Once$/,""),he(e,s[0].toLowerCase()+s.slice(1))||he(e,gt(s))||he(e,s))}let Me=null,ar=null;function Kt(e){const s=Me;return Me=e,ar=e&&e.type.__scopeId||null,s}function Pn(e,s=Me,d){if(!s||e._n)return e;const v=(...C)=>{v._d&&Cs(-1);const w=Kt(s);let L;try{L=e(...C)}finally{Kt(w),v._d&&Cs(1)}return L};return v._n=!0,v._c=!0,v._d=!0,v}function ni(e){const{type:s,vnode:d,proxy:v,withProxy:C,props:w,propsOptions:[L],slots:i,attrs:n,emit:l,render:_,renderCache:f,data:p,setupState:S,ctx:m,inheritAttrs:u}=e;let t,o;const c=Kt(e);try{if(d.shapeFlag&4){const a=C||v;t=Ne(_.call(a,a,f,w,S,p,m)),o=n}else{const a=s;t=Ne(a.length>1?a(w,{attrs:n,slots:i,emit:l}):a(w,null)),o=s.props?n:Hn(n)}}catch(a){wt.length=0,Jt(a,e,1),t=nt($e)}let r=t;if(o&&u!==!1){const a=Object.keys(o),{shapeFlag:g}=r;a.length&&g&7&&(L&&a.some(Mi)&&(o=Fn(o,L)),r=Je(r,o))}return d.dirs&&(r=Je(r),r.dirs=r.dirs?r.dirs.concat(d.dirs):d.dirs),d.transition&&(r.transition=d.transition),t=r,Kt(c),t}const Hn=e=>{let s;for(const d in e)(d==="class"||d==="style"||Vt(d))&&((s||(s={}))[d]=e[d]);return s},Fn=(e,s)=>{const d={};for(const v in e)(!Mi(v)||!(v.slice(9)in s))&&(d[v]=e[v]);return d};function Un(e,s,d){const{props:v,children:C,component:w}=e,{props:L,children:i,patchFlag:n}=s,l=w.emitsOptions;if(s.dirs||s.transition)return!0;if(d&&n>=0){if(n&1024)return!0;if(n&16)return v?us(v,L,l):!!L;if(n&8){const _=s.dynamicProps;for(let f=0;f<_.length;f++){const p=_[f];if(L[p]!==v[p]&&!Zt(l,p))return!0}}}else return(C||i)&&(!i||!i.$stable)?!0:v===L?!1:v?L?us(v,L,l):!0:!!L;return!1}function us(e,s,d){const v=Object.keys(s);if(v.length!==Object.keys(e).length)return!0;for(let C=0;C<v.length;C++){const w=v[C];if(s[w]!==e[w]&&!Zt(d,w))return!0}return!1}function Nn({vnode:e,parent:s},d){for(;s&&s.subTree===e;)(e=s.vnode).el=d,s=s.parent}const Wn=e=>e.__isSuspense;function jn(e,s){s&&s.pendingBranch?ae(e)?s.effects.push(...e):s.effects.push(e):Mn(e)}function $n(e,s){if(me){let d=me.provides;const v=me.parent&&me.parent.provides;v===d&&(d=me.provides=Object.create(v)),d[e]=s}}function Ut(e,s,d=!1){const v=me||Me;if(v){const C=v.parent==null?v.vnode.appContext&&v.vnode.appContext.provides:v.parent.provides;if(C&&e in C)return C[e];if(arguments.length>1)return d&&le(s)?s.call(v.proxy):s}}const Pt={};function oi(e,s,d){return lr(e,s,d)}function lr(e,s,{immediate:d,deep:v,flush:C,onTrack:w,onTrigger:L}=ge){const i=Xr()===(me==null?void 0:me.scope)?me:null;let n,l=!1,_=!1;if(Ee(e)?(n=()=>e.value,l=vi(e)):ht(e)?(n=()=>e,v=!0):ae(e)?(_=!0,l=e.some(r=>ht(r)||vi(r)),n=()=>e.map(r=>{if(Ee(r))return r.value;if(ht(r))return lt(r);if(le(r))return Ye(r,i,2)})):le(e)?s?n=()=>Ye(e,i,2):n=()=>{if(!(i&&i.isUnmounted))return f&&f(),ke(e,i,3,[p])}:n=Ie,s&&v){const r=n;n=()=>lt(r())}let f,p=r=>{f=o.onStop=()=>{Ye(r,i,4)}},S;if(At)if(p=Ie,s?d&&ke(s,i,3,[n(),_?[]:void 0,p]):n(),C==="sync"){const r=$o();S=r.__watcherHandles||(r.__watcherHandles=[])}else return Ie;let m=_?new Array(e.length).fill(Pt):Pt;const u=()=>{if(o.active)if(s){const r=o.run();(v||l||(_?r.some((a,g)=>jt(a,m[g])):jt(r,m)))&&(f&&f(),ke(s,i,3,[r,m===Pt?void 0:_&&m[0]===Pt?[]:m,p]),m=r)}else o.run()};u.allowRecurse=!!s;let t;C==="sync"?t=u:C==="post"?t=()=>Le(u,i&&i.suspense):(u.pre=!0,i&&(u.id=i.uid),t=()=>Vi(u));const o=new Fi(n,t);s?d?u():m=o.run():C==="post"?Le(o.run.bind(o),i&&i.suspense):o.run();const c=()=>{o.stop(),i&&i.scope&&Oi(i.scope.effects,o)};return S&&S.push(c),c}function Kn(e,s,d){const v=this.proxy,C=Ce(e)?e.includes(".")?cr(v,e):()=>v[e]:e.bind(v,v);let w;le(s)?w=s:(w=s.handler,d=s);const L=me;ft(this);const i=lr(C,w.bind(v),d);return L?ft(L):ot(),i}function cr(e,s){const d=s.split(".");return()=>{let v=e;for(let C=0;C<d.length&&v;C++)v=v[d[C]];return v}}function lt(e,s){if(!Se(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),Ee(e))lt(e.value,s);else if(ae(e))for(let d=0;d<e.length;d++)lt(e[d],s);else if(Fr(e)||bt(e))e.forEach(d=>{lt(d,s)});else if(Wr(e))for(const d in e)lt(e[d],s);return e}function zn(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xi(()=>{e.isMounted=!0}),fr(()=>{e.isUnmounting=!0}),e}const Ae=[Function,Array],qn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ae,onEnter:Ae,onAfterEnter:Ae,onEnterCancelled:Ae,onBeforeLeave:Ae,onLeave:Ae,onAfterLeave:Ae,onLeaveCancelled:Ae,onBeforeAppear:Ae,onAppear:Ae,onAfterAppear:Ae,onAppearCancelled:Ae},setup(e,{slots:s}){const d=Io(),v=zn();let C;return()=>{const w=s.default&&dr(s.default(),!0);if(!w||!w.length)return;let L=w[0];if(w.length>1){for(const u of w)if(u.type!==$e){L=u;break}}const i=de(e),{mode:n}=i;if(v.isLeaving)return ai(L);const l=fs(L);if(!l)return ai(L);const _=Si(l,i,v,d);Ci(l,_);const f=d.subTree,p=f&&fs(f);let S=!1;const{getTransitionKey:m}=l.type;if(m){const u=m();C===void 0?C=u:u!==C&&(C=u,S=!0)}if(p&&p.type!==$e&&(!it(l,p)||S)){const u=Si(p,i,v,d);if(Ci(p,u),n==="out-in")return v.isLeaving=!0,u.afterLeave=()=>{v.isLeaving=!1,d.update.active!==!1&&d.update()},ai(L);n==="in-out"&&l.type!==$e&&(u.delayLeave=(t,o,c)=>{const r=hr(v,p);r[String(p.key)]=p,t._leaveCb=()=>{o(),t._leaveCb=void 0,delete _.delayedLeave},_.delayedLeave=c})}return L}}},Vn=qn;function hr(e,s){const{leavingVNodes:d}=e;let v=d.get(s.type);return v||(v=Object.create(null),d.set(s.type,v)),v}function Si(e,s,d,v){const{appear:C,mode:w,persisted:L=!1,onBeforeEnter:i,onEnter:n,onAfterEnter:l,onEnterCancelled:_,onBeforeLeave:f,onLeave:p,onAfterLeave:S,onLeaveCancelled:m,onBeforeAppear:u,onAppear:t,onAfterAppear:o,onAppearCancelled:c}=s,r=String(e.key),a=hr(d,e),g=(h,y)=>{h&&ke(h,v,9,y)},b=(h,y)=>{const R=y[1];g(h,y),ae(h)?h.every(D=>D.length<=1)&&R():h.length<=1&&R()},x={mode:w,persisted:L,beforeEnter(h){let y=i;if(!d.isMounted)if(C)y=u||i;else return;h._leaveCb&&h._leaveCb(!0);const R=a[r];R&&it(e,R)&&R.el._leaveCb&&R.el._leaveCb(),g(y,[h])},enter(h){let y=n,R=l,D=_;if(!d.isMounted)if(C)y=t||n,R=o||l,D=c||_;else return;let T=!1;const P=h._enterCb=j=>{T||(T=!0,j?g(D,[h]):g(R,[h]),x.delayedLeave&&x.delayedLeave(),h._enterCb=void 0)};y?b(y,[h,P]):P()},leave(h,y){const R=String(e.key);if(h._enterCb&&h._enterCb(!0),d.isUnmounting)return y();g(f,[h]);let D=!1;const T=h._leaveCb=P=>{D||(D=!0,y(),P?g(m,[h]):g(S,[h]),h._leaveCb=void 0,a[R]===e&&delete a[R])};a[R]=e,p?b(p,[h,T]):T()},clone(h){return Si(h,s,d,v)}};return x}function ai(e){if(Qt(e))return e=Je(e),e.children=null,e}function fs(e){return Qt(e)?e.children?e.children[0]:void 0:e}function Ci(e,s){e.shapeFlag&6&&e.component?Ci(e.component.subTree,s):e.shapeFlag&128?(e.ssContent.transition=s.clone(e.ssContent),e.ssFallback.transition=s.clone(e.ssFallback)):e.transition=s}function dr(e,s=!1,d){let v=[],C=0;for(let w=0;w<e.length;w++){let L=e[w];const i=d==null?L.key:String(d)+String(L.key!=null?L.key:w);L.type===Ue?(L.patchFlag&128&&C++,v=v.concat(dr(L.children,s,i))):(s||L.type!==$e)&&v.push(i!=null?Je(L,{key:i}):L)}if(C>1)for(let w=0;w<v.length;w++)v[w].patchFlag=-2;return v}const Nt=e=>!!e.type.__asyncLoader,Qt=e=>e.type.__isKeepAlive;function Xn(e,s){ur(e,"a",s)}function Yn(e,s){ur(e,"da",s)}function ur(e,s,d=me){const v=e.__wdc||(e.__wdc=()=>{let C=d;for(;C;){if(C.isDeactivated)return;C=C.parent}return e()});if(ei(s,v,d),d){let C=d.parent;for(;C&&C.parent;)Qt(C.parent.vnode)&&Gn(v,s,d,C),C=C.parent}}function Gn(e,s,d,v){const C=ei(s,e,v,!0);Yi(()=>{Oi(v[s],C)},d)}function ei(e,s,d=me,v=!1){if(d){const C=d[e]||(d[e]=[]),w=s.__weh||(s.__weh=(...L)=>{if(d.isUnmounted)return;vt(),ft(d);const i=ke(s,d,e,L);return ot(),mt(),i});return v?C.unshift(w):C.push(w),w}}const ze=e=>(s,d=me)=>(!At||e==="sp")&&ei(e,(...v)=>s(...v),d),Jn=ze("bm"),Xi=ze("m"),Zn=ze("bu"),Qn=ze("u"),fr=ze("bum"),Yi=ze("um"),eo=ze("sp"),to=ze("rtg"),io=ze("rtc");function so(e,s=me){ei("ec",e,s)}function Ze(e,s,d,v){const C=e.dirs,w=s&&s.dirs;for(let L=0;L<C.length;L++){const i=C[L];w&&(i.oldValue=w[L].value);let n=i.dir[v];n&&(vt(),ke(n,d,8,[e.el,i,e,s]),mt())}}const ro=Symbol(),bi=e=>e?Er(e)?Qi(e)||e.proxy:bi(e.parent):null,yt=ye(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>bi(e.parent),$root:e=>bi(e.root),$emit:e=>e.emit,$options:e=>Gi(e),$forceUpdate:e=>e.f||(e.f=()=>Vi(e.update)),$nextTick:e=>e.n||(e.n=Dn.bind(e.proxy)),$watch:e=>Kn.bind(e)}),li=(e,s)=>e!==ge&&!e.__isScriptSetup&&he(e,s),no={get({_:e},s){const{ctx:d,setupState:v,data:C,props:w,accessCache:L,type:i,appContext:n}=e;let l;if(s[0]!=="$"){const S=L[s];if(S!==void 0)switch(S){case 1:return v[s];case 2:return C[s];case 4:return d[s];case 3:return w[s]}else{if(li(v,s))return L[s]=1,v[s];if(C!==ge&&he(C,s))return L[s]=2,C[s];if((l=e.propsOptions[0])&&he(l,s))return L[s]=3,w[s];if(d!==ge&&he(d,s))return L[s]=4,d[s];yi&&(L[s]=0)}}const _=yt[s];let f,p;if(_)return s==="$attrs"&&xe(e,"get",s),_(e);if((f=i.__cssModules)&&(f=f[s]))return f;if(d!==ge&&he(d,s))return L[s]=4,d[s];if(p=n.config.globalProperties,he(p,s))return p[s]},set({_:e},s,d){const{data:v,setupState:C,ctx:w}=e;return li(C,s)?(C[s]=d,!0):v!==ge&&he(v,s)?(v[s]=d,!0):he(e.props,s)||s[0]==="$"&&s.slice(1)in e?!1:(w[s]=d,!0)},has({_:{data:e,setupState:s,accessCache:d,ctx:v,appContext:C,propsOptions:w}},L){let i;return!!d[L]||e!==ge&&he(e,L)||li(s,L)||(i=w[0])&&he(i,L)||he(v,L)||he(yt,L)||he(C.config.globalProperties,L)},defineProperty(e,s,d){return d.get!=null?e._.accessCache[s]=0:he(d,"value")&&this.set(e,s,d.value,null),Reflect.defineProperty(e,s,d)}};let yi=!0;function oo(e){const s=Gi(e),d=e.proxy,v=e.ctx;yi=!1,s.beforeCreate&&_s(s.beforeCreate,e,"bc");const{data:C,computed:w,methods:L,watch:i,provide:n,inject:l,created:_,beforeMount:f,mounted:p,beforeUpdate:S,updated:m,activated:u,deactivated:t,beforeDestroy:o,beforeUnmount:c,destroyed:r,unmounted:a,render:g,renderTracked:b,renderTriggered:x,errorCaptured:h,serverPrefetch:y,expose:R,inheritAttrs:D,components:T,directives:P,filters:j}=s;if(l&&ao(l,v,null,e.appContext.config.unwrapInjectedRef),L)for(const E in L){const k=L[E];le(k)&&(v[E]=k.bind(d))}if(C){const E=C.call(d,d);Se(E)&&(e.data=ji(E))}if(yi=!0,w)for(const E in w){const k=w[E],O=le(k)?k.bind(d,d):le(k.get)?k.get.bind(d,d):Ie,H=!le(k)&&le(k.set)?k.set.bind(d):Ie,q=Wo({get:O,set:H});Object.defineProperty(v,E,{enumerable:!0,configurable:!0,get:()=>q.value,set:Z=>q.value=Z})}if(i)for(const E in i)_r(i[E],v,d,E);if(n){const E=le(n)?n.call(d):n;Reflect.ownKeys(E).forEach(k=>{$n(k,E[k])})}_&&_s(_,e,"c");function z(E,k){ae(k)?k.forEach(O=>E(O.bind(d))):k&&E(k.bind(d))}if(z(Jn,f),z(Xi,p),z(Zn,S),z(Qn,m),z(Xn,u),z(Yn,t),z(so,h),z(io,b),z(to,x),z(fr,c),z(Yi,a),z(eo,y),ae(R))if(R.length){const E=e.exposed||(e.exposed={});R.forEach(k=>{Object.defineProperty(E,k,{get:()=>d[k],set:O=>d[k]=O})})}else e.exposed||(e.exposed={});g&&e.render===Ie&&(e.render=g),D!=null&&(e.inheritAttrs=D),T&&(e.components=T),P&&(e.directives=P)}function ao(e,s,d=Ie,v=!1){ae(e)&&(e=wi(e));for(const C in e){const w=e[C];let L;Se(w)?"default"in w?L=Ut(w.from||C,w.default,!0):L=Ut(w.from||C):L=Ut(w),Ee(L)&&v?Object.defineProperty(s,C,{enumerable:!0,configurable:!0,get:()=>L.value,set:i=>L.value=i}):s[C]=L}}function _s(e,s,d){ke(ae(e)?e.map(v=>v.bind(s.proxy)):e.bind(s.proxy),s,d)}function _r(e,s,d,v){const C=v.includes(".")?cr(d,v):()=>d[v];if(Ce(e)){const w=s[e];le(w)&&oi(C,w)}else if(le(e))oi(C,e.bind(d));else if(Se(e))if(ae(e))e.forEach(w=>_r(w,s,d,v));else{const w=le(e.handler)?e.handler.bind(d):s[e.handler];le(w)&&oi(C,w,e)}}function Gi(e){const s=e.type,{mixins:d,extends:v}=s,{mixins:C,optionsCache:w,config:{optionMergeStrategies:L}}=e.appContext,i=w.get(s);let n;return i?n=i:!C.length&&!d&&!v?n=s:(n={},C.length&&C.forEach(l=>zt(n,l,L,!0)),zt(n,s,L)),Se(s)&&w.set(s,n),n}function zt(e,s,d,v=!1){const{mixins:C,extends:w}=s;w&&zt(e,w,d,!0),C&&C.forEach(L=>zt(e,L,d,!0));for(const L in s)if(!(v&&L==="expose")){const i=lo[L]||d&&d[L];e[L]=i?i(e[L],s[L]):s[L]}return e}const lo={data:ps,props:et,emits:et,methods:et,computed:et,beforeCreate:we,created:we,beforeMount:we,mounted:we,beforeUpdate:we,updated:we,beforeDestroy:we,beforeUnmount:we,destroyed:we,unmounted:we,activated:we,deactivated:we,errorCaptured:we,serverPrefetch:we,components:et,directives:et,watch:ho,provide:ps,inject:co};function ps(e,s){return s?e?function(){return ye(le(e)?e.call(this,this):e,le(s)?s.call(this,this):s)}:s:e}function co(e,s){return et(wi(e),wi(s))}function wi(e){if(ae(e)){const s={};for(let d=0;d<e.length;d++)s[e[d]]=e[d];return s}return e}function we(e,s){return e?[...new Set([].concat(e,s))]:s}function et(e,s){return e?ye(ye(Object.create(null),e),s):s}function ho(e,s){if(!e)return s;if(!s)return e;const d=ye(Object.create(null),e);for(const v in s)d[v]=we(e[v],s[v]);return d}function uo(e,s,d,v=!1){const C={},w={};$t(w,ii,1),e.propsDefaults=Object.create(null),pr(e,s,C,w);for(const L in e.propsOptions[0])L in C||(C[L]=void 0);d?e.props=v?C:yn(C):e.type.props?e.props=C:e.props=w,e.attrs=w}function fo(e,s,d,v){const{props:C,attrs:w,vnode:{patchFlag:L}}=e,i=de(C),[n]=e.propsOptions;let l=!1;if((v||L>0)&&!(L&16)){if(L&8){const _=e.vnode.dynamicProps;for(let f=0;f<_.length;f++){let p=_[f];if(Zt(e.emitsOptions,p))continue;const S=s[p];if(n)if(he(w,p))S!==w[p]&&(w[p]=S,l=!0);else{const m=ut(p);C[m]=Ei(n,i,m,S,e,!1)}else S!==w[p]&&(w[p]=S,l=!0)}}}else{pr(e,s,C,w)&&(l=!0);let _;for(const f in i)(!s||!he(s,f)&&((_=gt(f))===f||!he(s,_)))&&(n?d&&(d[f]!==void 0||d[_]!==void 0)&&(C[f]=Ei(n,i,f,void 0,e,!0)):delete C[f]);if(w!==i)for(const f in w)(!s||!he(s,f))&&(delete w[f],l=!0)}l&&Ke(e,"set","$attrs")}function pr(e,s,d,v){const[C,w]=e.propsOptions;let L=!1,i;if(s)for(let n in s){if(Ft(n))continue;const l=s[n];let _;C&&he(C,_=ut(n))?!w||!w.includes(_)?d[_]=l:(i||(i={}))[_]=l:Zt(e.emitsOptions,n)||(!(n in v)||l!==v[n])&&(v[n]=l,L=!0)}if(w){const n=de(d),l=i||ge;for(let _=0;_<w.length;_++){const f=w[_];d[f]=Ei(C,n,f,l[f],e,!he(l,f))}}return L}function Ei(e,s,d,v,C,w){const L=e[d];if(L!=null){const i=he(L,"default");if(i&&v===void 0){const n=L.default;if(L.type!==Function&&le(n)){const{propsDefaults:l}=C;d in l?v=l[d]:(ft(C),v=l[d]=n.call(null,s),ot())}else v=n}L[0]&&(w&&!i?v=!1:L[1]&&(v===""||v===gt(d))&&(v=!0))}return v}function gr(e,s,d=!1){const v=s.propsCache,C=v.get(e);if(C)return C;const w=e.props,L={},i=[];let n=!1;if(!le(e)){const _=f=>{n=!0;const[p,S]=gr(f,s,!0);ye(L,p),S&&i.push(...S)};!d&&s.mixins.length&&s.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!w&&!n)return Se(e)&&v.set(e,ct),ct;if(ae(w))for(let _=0;_<w.length;_++){const f=ut(w[_]);gs(f)&&(L[f]=ge)}else if(w)for(const _ in w){const f=ut(_);if(gs(f)){const p=w[_],S=L[f]=ae(p)||le(p)?{type:p}:Object.assign({},p);if(S){const m=Ss(Boolean,S.type),u=Ss(String,S.type);S[0]=m>-1,S[1]=u<0||m<u,(m>-1||he(S,"default"))&&i.push(f)}}}const l=[L,i];return Se(e)&&v.set(e,l),l}function gs(e){return e[0]!=="$"}function vs(e){const s=e&&e.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:e===null?"null":""}function ms(e,s){return vs(e)===vs(s)}function Ss(e,s){return ae(s)?s.findIndex(d=>ms(d,e)):le(s)&&ms(s,e)?0:-1}const vr=e=>e[0]==="_"||e==="$stable",Ji=e=>ae(e)?e.map(Ne):[Ne(e)],_o=(e,s,d)=>{if(s._n)return s;const v=Pn((...C)=>Ji(s(...C)),d);return v._c=!1,v},mr=(e,s,d)=>{const v=e._ctx;for(const C in e){if(vr(C))continue;const w=e[C];if(le(w))s[C]=_o(C,w,v);else if(w!=null){const L=Ji(w);s[C]=()=>L}}},Sr=(e,s)=>{const d=Ji(s);e.slots.default=()=>d},po=(e,s)=>{if(e.vnode.shapeFlag&32){const d=s._;d?(e.slots=de(s),$t(s,"_",d)):mr(s,e.slots={})}else e.slots={},s&&Sr(e,s);$t(e.slots,ii,1)},go=(e,s,d)=>{const{vnode:v,slots:C}=e;let w=!0,L=ge;if(v.shapeFlag&32){const i=s._;i?d&&i===1?w=!1:(ye(C,s),!d&&i===1&&delete C._):(w=!s.$stable,mr(s,C)),L=s}else s&&(Sr(e,s),L={default:1});if(w)for(const i in C)!vr(i)&&!(i in L)&&delete C[i]};function Cr(){return{app:null,config:{isNativeTag:Ir,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vo=0;function mo(e,s){return function(v,C=null){le(v)||(v=Object.assign({},v)),C!=null&&!Se(C)&&(C=null);const w=Cr(),L=new Set;let i=!1;const n=w.app={_uid:vo++,_component:v,_props:C,_container:null,_context:w,_instance:null,version:Ko,get config(){return w.config},set config(l){},use(l,..._){return L.has(l)||(l&&le(l.install)?(L.add(l),l.install(n,..._)):le(l)&&(L.add(l),l(n,..._))),n},mixin(l){return w.mixins.includes(l)||w.mixins.push(l),n},component(l,_){return _?(w.components[l]=_,n):w.components[l]},directive(l,_){return _?(w.directives[l]=_,n):w.directives[l]},mount(l,_,f){if(!i){const p=nt(v,C);return p.appContext=w,_&&s?s(p,l):e(p,l,f),i=!0,n._container=l,l.__vue_app__=n,Qi(p.component)||p.component.proxy}},unmount(){i&&(e(null,n._container),delete n._container.__vue_app__)},provide(l,_){return w.provides[l]=_,n}};return n}}function Li(e,s,d,v,C=!1){if(ae(e)){e.forEach((p,S)=>Li(p,s&&(ae(s)?s[S]:s),d,v,C));return}if(Nt(v)&&!C)return;const w=v.shapeFlag&4?Qi(v.component)||v.component.proxy:v.el,L=C?null:w,{i,r:n}=e,l=s&&s.r,_=i.refs===ge?i.refs={}:i.refs,f=i.setupState;if(l!=null&&l!==n&&(Ce(l)?(_[l]=null,he(f,l)&&(f[l]=null)):Ee(l)&&(l.value=null)),le(n))Ye(n,i,12,[L,_]);else{const p=Ce(n),S=Ee(n);if(p||S){const m=()=>{if(e.f){const u=p?he(f,n)?f[n]:_[n]:n.value;C?ae(u)&&Oi(u,w):ae(u)?u.includes(w)||u.push(w):p?(_[n]=[w],he(f,n)&&(f[n]=_[n])):(n.value=[w],e.k&&(_[e.k]=n.value))}else p?(_[n]=L,he(f,n)&&(f[n]=L)):S&&(n.value=L,e.k&&(_[e.k]=L))};L?(m.id=-1,Le(m,d)):m()}}}const Le=jn;function So(e){return Co(e)}function Co(e,s){const d=zr();d.__VUE__=!0;const{insert:v,remove:C,patchProp:w,createElement:L,createText:i,createComment:n,setText:l,setElementText:_,parentNode:f,nextSibling:p,setScopeId:S=Ie,insertStaticContent:m}=e,u=(A,M,U,W=null,N=null,V=null,ee=!1,X=null,Q=!!M.dynamicChildren)=>{if(A===M)return;A&&!it(A,M)&&(W=B(A),Z(A,N,V,!0),A=null),M.patchFlag===-2&&(Q=!1,M.dynamicChildren=null);const{type:K,ref:se,shapeFlag:te}=M;switch(K){case ti:t(A,M,U,W);break;case $e:o(A,M,U,W);break;case ci:A==null&&c(M,U,W,ee);break;case Ue:T(A,M,U,W,N,V,ee,X,Q);break;default:te&1?g(A,M,U,W,N,V,ee,X,Q):te&6?P(A,M,U,W,N,V,ee,X,Q):(te&64||te&128)&&K.process(A,M,U,W,N,V,ee,X,Q,$)}se!=null&&N&&Li(se,A&&A.ref,V,M||A,!M)},t=(A,M,U,W)=>{if(A==null)v(M.el=i(M.children),U,W);else{const N=M.el=A.el;M.children!==A.children&&l(N,M.children)}},o=(A,M,U,W)=>{A==null?v(M.el=n(M.children||""),U,W):M.el=A.el},c=(A,M,U,W)=>{[A.el,A.anchor]=m(A.children,M,U,W,A.el,A.anchor)},r=({el:A,anchor:M},U,W)=>{let N;for(;A&&A!==M;)N=p(A),v(A,U,W),A=N;v(M,U,W)},a=({el:A,anchor:M})=>{let U;for(;A&&A!==M;)U=p(A),C(A),A=U;C(M)},g=(A,M,U,W,N,V,ee,X,Q)=>{ee=ee||M.type==="svg",A==null?b(M,U,W,N,V,ee,X,Q):y(A,M,N,V,ee,X,Q)},b=(A,M,U,W,N,V,ee,X)=>{let Q,K;const{type:se,props:te,shapeFlag:re,transition:oe,dirs:ce}=A;if(Q=A.el=L(A.type,V,te&&te.is,te),re&8?_(Q,A.children):re&16&&h(A.children,Q,null,W,N,V&&se!=="foreignObject",ee,X),ce&&Ze(A,null,W,"created"),x(Q,A,A.scopeId,ee,W),te){for(const ue in te)ue!=="value"&&!Ft(ue)&&w(Q,ue,null,te[ue],V,A.children,W,N,I);"value"in te&&w(Q,"value",null,te.value),(K=te.onVnodeBeforeMount)&&He(K,W,A)}ce&&Ze(A,null,W,"beforeMount");const _e=(!N||N&&!N.pendingBranch)&&oe&&!oe.persisted;_e&&oe.beforeEnter(Q),v(Q,M,U),((K=te&&te.onVnodeMounted)||_e||ce)&&Le(()=>{K&&He(K,W,A),_e&&oe.enter(Q),ce&&Ze(A,null,W,"mounted")},N)},x=(A,M,U,W,N)=>{if(U&&S(A,U),W)for(let V=0;V<W.length;V++)S(A,W[V]);if(N){let V=N.subTree;if(M===V){const ee=N.vnode;x(A,ee,ee.scopeId,ee.slotScopeIds,N.parent)}}},h=(A,M,U,W,N,V,ee,X,Q=0)=>{for(let K=Q;K<A.length;K++){const se=A[K]=X?Ve(A[K]):Ne(A[K]);u(null,se,M,U,W,N,V,ee,X)}},y=(A,M,U,W,N,V,ee)=>{const X=M.el=A.el;let{patchFlag:Q,dynamicChildren:K,dirs:se}=M;Q|=A.patchFlag&16;const te=A.props||ge,re=M.props||ge;let oe;U&&Qe(U,!1),(oe=re.onVnodeBeforeUpdate)&&He(oe,U,M,A),se&&Ze(M,A,U,"beforeUpdate"),U&&Qe(U,!0);const ce=N&&M.type!=="foreignObject";if(K?R(A.dynamicChildren,K,X,U,W,ce,V):ee||k(A,M,X,null,U,W,ce,V,!1),Q>0){if(Q&16)D(X,M,te,re,U,W,N);else if(Q&2&&te.class!==re.class&&w(X,"class",null,re.class,N),Q&4&&w(X,"style",te.style,re.style,N),Q&8){const _e=M.dynamicProps;for(let ue=0;ue<_e.length;ue++){const ve=_e[ue],De=te[ve],at=re[ve];(at!==De||ve==="value")&&w(X,ve,De,at,N,A.children,U,W,I)}}Q&1&&A.children!==M.children&&_(X,M.children)}else!ee&&K==null&&D(X,M,te,re,U,W,N);((oe=re.onVnodeUpdated)||se)&&Le(()=>{oe&&He(oe,U,M,A),se&&Ze(M,A,U,"updated")},W)},R=(A,M,U,W,N,V,ee)=>{for(let X=0;X<M.length;X++){const Q=A[X],K=M[X],se=Q.el&&(Q.type===Ue||!it(Q,K)||Q.shapeFlag&70)?f(Q.el):U;u(Q,K,se,null,W,N,V,ee,!0)}},D=(A,M,U,W,N,V,ee)=>{if(U!==W){if(U!==ge)for(const X in U)!Ft(X)&&!(X in W)&&w(A,X,U[X],null,ee,M.children,N,V,I);for(const X in W){if(Ft(X))continue;const Q=W[X],K=U[X];Q!==K&&X!=="value"&&w(A,X,K,Q,ee,M.children,N,V,I)}"value"in W&&w(A,"value",U.value,W.value)}},T=(A,M,U,W,N,V,ee,X,Q)=>{const K=M.el=A?A.el:i(""),se=M.anchor=A?A.anchor:i("");let{patchFlag:te,dynamicChildren:re,slotScopeIds:oe}=M;oe&&(X=X?X.concat(oe):oe),A==null?(v(K,U,W),v(se,U,W),h(M.children,U,se,N,V,ee,X,Q)):te>0&&te&64&&re&&A.dynamicChildren?(R(A.dynamicChildren,re,U,N,V,ee,X),(M.key!=null||N&&M===N.subTree)&&br(A,M,!0)):k(A,M,U,se,N,V,ee,X,Q)},P=(A,M,U,W,N,V,ee,X,Q)=>{M.slotScopeIds=X,A==null?M.shapeFlag&512?N.ctx.activate(M,U,W,ee,Q):j(M,U,W,N,V,ee,Q):J(A,M,Q)},j=(A,M,U,W,N,V,ee)=>{const X=A.component=Oo(A,W,N);if(Qt(A)&&(X.ctx.renderer=$),Po(X),X.asyncDep){if(N&&N.registerDep(X,z),!A.el){const Q=X.subTree=nt($e);o(null,Q,M,U)}return}z(X,A,M,U,N,V,ee)},J=(A,M,U)=>{const W=M.component=A.component;if(Un(A,M,U))if(W.asyncDep&&!W.asyncResolved){E(W,M,U);return}else W.next=M,Bn(W.update),W.update();else M.el=A.el,W.vnode=M},z=(A,M,U,W,N,V,ee)=>{const X=()=>{if(A.isMounted){let{next:se,bu:te,u:re,parent:oe,vnode:ce}=A,_e=se,ue;Qe(A,!1),se?(se.el=ce.el,E(A,se,ee)):se=ce,te&&ri(te),(ue=se.props&&se.props.onVnodeBeforeUpdate)&&He(ue,oe,se,ce),Qe(A,!0);const ve=ni(A),De=A.subTree;A.subTree=ve,u(De,ve,f(De.el),B(De),A,N,V),se.el=ve.el,_e===null&&Nn(A,ve.el),re&&Le(re,N),(ue=se.props&&se.props.onVnodeUpdated)&&Le(()=>He(ue,oe,se,ce),N)}else{let se;const{el:te,props:re}=M,{bm:oe,m:ce,parent:_e}=A,ue=Nt(M);if(Qe(A,!1),oe&&ri(oe),!ue&&(se=re&&re.onVnodeBeforeMount)&&He(se,_e,M),Qe(A,!0),te&&fe){const ve=()=>{A.subTree=ni(A),fe(te,A.subTree,A,N,null)};ue?M.type.__asyncLoader().then(()=>!A.isUnmounted&&ve()):ve()}else{const ve=A.subTree=ni(A);u(null,ve,U,W,A,N,V),M.el=ve.el}if(ce&&Le(ce,N),!ue&&(se=re&&re.onVnodeMounted)){const ve=M;Le(()=>He(se,_e,ve),N)}(M.shapeFlag&256||_e&&Nt(_e.vnode)&&_e.vnode.shapeFlag&256)&&A.a&&Le(A.a,N),A.isMounted=!0,M=U=W=null}},Q=A.effect=new Fi(X,()=>Vi(K),A.scope),K=A.update=()=>Q.run();K.id=A.uid,Qe(A,!0),K()},E=(A,M,U)=>{M.component=A;const W=A.vnode.props;A.vnode=M,A.next=null,fo(A,M.props,W,U),go(A,M.children,U),vt(),ds(),mt()},k=(A,M,U,W,N,V,ee,X,Q=!1)=>{const K=A&&A.children,se=A?A.shapeFlag:0,te=M.children,{patchFlag:re,shapeFlag:oe}=M;if(re>0){if(re&128){H(K,te,U,W,N,V,ee,X,Q);return}else if(re&256){O(K,te,U,W,N,V,ee,X,Q);return}}oe&8?(se&16&&I(K,N,V),te!==K&&_(U,te)):se&16?oe&16?H(K,te,U,W,N,V,ee,X,Q):I(K,N,V,!0):(se&8&&_(U,""),oe&16&&h(te,U,W,N,V,ee,X,Q))},O=(A,M,U,W,N,V,ee,X,Q)=>{A=A||ct,M=M||ct;const K=A.length,se=M.length,te=Math.min(K,se);let re;for(re=0;re<te;re++){const oe=M[re]=Q?Ve(M[re]):Ne(M[re]);u(A[re],oe,U,null,N,V,ee,X,Q)}K>se?I(A,N,V,!0,!1,te):h(M,U,W,N,V,ee,X,Q,te)},H=(A,M,U,W,N,V,ee,X,Q)=>{let K=0;const se=M.length;let te=A.length-1,re=se-1;for(;K<=te&&K<=re;){const oe=A[K],ce=M[K]=Q?Ve(M[K]):Ne(M[K]);if(it(oe,ce))u(oe,ce,U,null,N,V,ee,X,Q);else break;K++}for(;K<=te&&K<=re;){const oe=A[te],ce=M[re]=Q?Ve(M[re]):Ne(M[re]);if(it(oe,ce))u(oe,ce,U,null,N,V,ee,X,Q);else break;te--,re--}if(K>te){if(K<=re){const oe=re+1,ce=oe<se?M[oe].el:W;for(;K<=re;)u(null,M[K]=Q?Ve(M[K]):Ne(M[K]),U,ce,N,V,ee,X,Q),K++}}else if(K>re)for(;K<=te;)Z(A[K],N,V,!0),K++;else{const oe=K,ce=K,_e=new Map;for(K=ce;K<=re;K++){const Re=M[K]=Q?Ve(M[K]):Ne(M[K]);Re.key!=null&&_e.set(Re.key,K)}let ue,ve=0;const De=re-ce+1;let at=!1,es=0;const St=new Array(De);for(K=0;K<De;K++)St[K]=0;for(K=oe;K<=te;K++){const Re=A[K];if(ve>=De){Z(Re,N,V,!0);continue}let Pe;if(Re.key!=null)Pe=_e.get(Re.key);else for(ue=ce;ue<=re;ue++)if(St[ue-ce]===0&&it(Re,M[ue])){Pe=ue;break}Pe===void 0?Z(Re,N,V,!0):(St[Pe-ce]=K+1,Pe>=es?es=Pe:at=!0,u(Re,M[Pe],U,null,N,V,ee,X,Q),ve++)}const ts=at?bo(St):ct;for(ue=ts.length-1,K=De-1;K>=0;K--){const Re=ce+K,Pe=M[Re],is=Re+1<se?M[Re+1].el:W;St[K]===0?u(null,Pe,U,is,N,V,ee,X,Q):at&&(ue<0||K!==ts[ue]?q(Pe,U,is,2):ue--)}}},q=(A,M,U,W,N=null)=>{const{el:V,type:ee,transition:X,children:Q,shapeFlag:K}=A;if(K&6){q(A.component.subTree,M,U,W);return}if(K&128){A.suspense.move(M,U,W);return}if(K&64){ee.move(A,M,U,$);return}if(ee===Ue){v(V,M,U);for(let te=0;te<Q.length;te++)q(Q[te],M,U,W);v(A.anchor,M,U);return}if(ee===ci){r(A,M,U);return}if(W!==2&&K&1&&X)if(W===0)X.beforeEnter(V),v(V,M,U),Le(()=>X.enter(V),N);else{const{leave:te,delayLeave:re,afterLeave:oe}=X,ce=()=>v(V,M,U),_e=()=>{te(V,()=>{ce(),oe&&oe()})};re?re(V,ce,_e):_e()}else v(V,M,U)},Z=(A,M,U,W=!1,N=!1)=>{const{type:V,props:ee,ref:X,children:Q,dynamicChildren:K,shapeFlag:se,patchFlag:te,dirs:re}=A;if(X!=null&&Li(X,null,U,A,!0),se&256){M.ctx.deactivate(A);return}const oe=se&1&&re,ce=!Nt(A);let _e;if(ce&&(_e=ee&&ee.onVnodeBeforeUnmount)&&He(_e,M,A),se&6)ie(A.component,U,W);else{if(se&128){A.suspense.unmount(U,W);return}oe&&Ze(A,null,M,"beforeUnmount"),se&64?A.type.remove(A,M,U,N,$,W):K&&(V!==Ue||te>0&&te&64)?I(K,M,U,!1,!0):(V===Ue&&te&384||!N&&se&16)&&I(Q,M,U),W&&ne(A)}(ce&&(_e=ee&&ee.onVnodeUnmounted)||oe)&&Le(()=>{_e&&He(_e,M,A),oe&&Ze(A,null,M,"unmounted")},U)},ne=A=>{const{type:M,el:U,anchor:W,transition:N}=A;if(M===Ue){Y(U,W);return}if(M===ci){a(A);return}const V=()=>{C(U),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(A.shapeFlag&1&&N&&!N.persisted){const{leave:ee,delayLeave:X}=N,Q=()=>ee(U,V);X?X(A.el,V,Q):Q()}else V()},Y=(A,M)=>{let U;for(;A!==M;)U=p(A),C(A),A=U;C(M)},ie=(A,M,U)=>{const{bum:W,scope:N,update:V,subTree:ee,um:X}=A;W&&ri(W),N.stop(),V&&(V.active=!1,Z(ee,A,M,U)),X&&Le(X,M),Le(()=>{A.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},I=(A,M,U,W=!1,N=!1,V=0)=>{for(let ee=V;ee<A.length;ee++)Z(A[ee],M,U,W,N)},B=A=>A.shapeFlag&6?B(A.component.subTree):A.shapeFlag&128?A.suspense.next():p(A.anchor||A.el),F=(A,M,U)=>{A==null?M._vnode&&Z(M._vnode,null,null,!0):u(M._vnode||null,A,M,null,null,null,U),ds(),rr(),M._vnode=A},$={p:u,um:Z,m:q,r:ne,mt:j,mc:h,pc:k,pbc:R,n:B,o:e};let G,fe;return s&&([G,fe]=s($)),{render:F,hydrate:G,createApp:mo(F,G)}}function Qe({effect:e,update:s},d){e.allowRecurse=s.allowRecurse=d}function br(e,s,d=!1){const v=e.children,C=s.children;if(ae(v)&&ae(C))for(let w=0;w<v.length;w++){const L=v[w];let i=C[w];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=C[w]=Ve(C[w]),i.el=L.el),d||br(L,i)),i.type===ti&&(i.el=L.el)}}function bo(e){const s=e.slice(),d=[0];let v,C,w,L,i;const n=e.length;for(v=0;v<n;v++){const l=e[v];if(l!==0){if(C=d[d.length-1],e[C]<l){s[v]=C,d.push(v);continue}for(w=0,L=d.length-1;w<L;)i=w+L>>1,e[d[i]]<l?w=i+1:L=i;l<e[d[w]]&&(w>0&&(s[v]=d[w-1]),d[w]=v)}}for(w=d.length,L=d[w-1];w-- >0;)d[w]=L,L=s[L];return d}const yo=e=>e.__isTeleport,Ue=Symbol(void 0),ti=Symbol(void 0),$e=Symbol(void 0),ci=Symbol(void 0),wt=[];let Oe=null;function wo(e=!1){wt.push(Oe=e?null:[])}function Eo(){wt.pop(),Oe=wt[wt.length-1]||null}let Rt=1;function Cs(e){Rt+=e}function Lo(e){return e.dynamicChildren=Rt>0?Oe||ct:null,Eo(),Rt>0&&Oe&&Oe.push(e),e}function xo(e,s,d,v,C,w){return Lo(wr(e,s,d,v,C,w,!0))}function Ro(e){return e?e.__v_isVNode===!0:!1}function it(e,s){return e.type===s.type&&e.key===s.key}const ii="__vInternal",yr=({key:e})=>e??null,Wt=({ref:e,ref_key:s,ref_for:d})=>e!=null?Ce(e)||Ee(e)||le(e)?{i:Me,r:e,k:s,f:!!d}:e:null;function wr(e,s=null,d=null,v=0,C=null,w=e===Ue?0:1,L=!1,i=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:s,key:s&&yr(s),ref:s&&Wt(s),scopeId:ar,slotScopeIds:null,children:d,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:v,dynamicProps:C,dynamicChildren:null,appContext:null,ctx:Me};return i?(Zi(n,d),w&128&&e.normalize(n)):d&&(n.shapeFlag|=Ce(d)?8:16),Rt>0&&!L&&Oe&&(n.patchFlag>0||w&6)&&n.patchFlag!==32&&Oe.push(n),n}const nt=Ao;function Ao(e,s=null,d=null,v=0,C=null,w=!1){if((!e||e===ro)&&(e=$e),Ro(e)){const i=Je(e,s,!0);return d&&Zi(i,d),Rt>0&&!w&&Oe&&(i.shapeFlag&6?Oe[Oe.indexOf(e)]=i:Oe.push(i)),i.patchFlag|=-2,i}if(No(e)&&(e=e.__vccOpts),s){s=ko(s);let{class:i,style:n}=s;i&&!Ce(i)&&(s.class=Bi(i)),Se(n)&&(Zs(n)&&!ae(n)&&(n=ye({},n)),s.style=Ti(n))}const L=Ce(e)?1:Wn(e)?128:yo(e)?64:Se(e)?4:le(e)?2:0;return wr(e,s,d,v,C,L,w,!0)}function ko(e){return e?Zs(e)||ii in e?ye({},e):e:null}function Je(e,s,d=!1){const{props:v,ref:C,patchFlag:w,children:L}=e,i=s?To(v||{},s):v;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&yr(i),ref:s&&s.ref?d&&C?ae(C)?C.concat(Wt(s)):[C,Wt(s)]:Wt(s):C,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:L,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:s&&e.type!==Ue?w===-1?16:w|16:w,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Je(e.ssContent),ssFallback:e.ssFallback&&Je(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Do(e=" ",s=0){return nt(ti,null,e,s)}function Ne(e){return e==null||typeof e=="boolean"?nt($e):ae(e)?nt(Ue,null,e.slice()):typeof e=="object"?Ve(e):nt(ti,null,String(e))}function Ve(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Je(e)}function Zi(e,s){let d=0;const{shapeFlag:v}=e;if(s==null)s=null;else if(ae(s))d=16;else if(typeof s=="object")if(v&65){const C=s.default;C&&(C._c&&(C._d=!1),Zi(e,C()),C._c&&(C._d=!0));return}else{d=32;const C=s._;!C&&!(ii in s)?s._ctx=Me:C===3&&Me&&(Me.slots._===1?s._=1:(s._=2,e.patchFlag|=1024))}else le(s)?(s={default:s,_ctx:Me},d=32):(s=String(s),v&64?(d=16,s=[Do(s)]):d=8);e.children=s,e.shapeFlag|=d}function To(...e){const s={};for(let d=0;d<e.length;d++){const v=e[d];for(const C in v)if(C==="class")s.class!==v.class&&(s.class=Bi([s.class,v.class]));else if(C==="style")s.style=Ti([s.style,v.style]);else if(Vt(C)){const w=s[C],L=v[C];L&&w!==L&&!(ae(w)&&w.includes(L))&&(s[C]=w?[].concat(w,L):L)}else C!==""&&(s[C]=v[C])}return s}function He(e,s,d,v=null){ke(e,s,7,[d,v])}const Bo=Cr();let Mo=0;function Oo(e,s,d){const v=e.type,C=(s?s.appContext:e.appContext)||Bo,w={uid:Mo++,vnode:e,type:v,parent:s,appContext:C,root:null,next:null,subTree:null,effect:null,update:null,scope:new qr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(C.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gr(v,C),emitsOptions:or(v,C),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:v.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:d,suspenseId:d?d.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=s?s.root:w,w.emit=In.bind(null,w),e.ce&&e.ce(w),w}let me=null;const Io=()=>me||Me,ft=e=>{me=e,e.scope.on()},ot=()=>{me&&me.scope.off(),me=null};function Er(e){return e.vnode.shapeFlag&4}let At=!1;function Po(e,s=!1){At=s;const{props:d,children:v}=e.vnode,C=Er(e);uo(e,d,C,s),po(e,v);const w=C?Ho(e,s):void 0;return At=!1,w}function Ho(e,s){const d=e.type;e.accessCache=Object.create(null),e.proxy=Qs(new Proxy(e.ctx,no));const{setup:v}=d;if(v){const C=e.setupContext=v.length>1?Uo(e):null;ft(e),vt();const w=Ye(v,e,0,[e.props,C]);if(mt(),ot(),Us(w)){if(w.then(ot,ot),s)return w.then(L=>{bs(e,L,s)}).catch(L=>{Jt(L,e,0)});e.asyncDep=w}else bs(e,w,s)}else Lr(e,s)}function bs(e,s,d){le(s)?e.type.__ssrInlineRender?e.ssrRender=s:e.render=s:Se(s)&&(e.setupState=er(s)),Lr(e,d)}let ys;function Lr(e,s,d){const v=e.type;if(!e.render){if(!s&&ys&&!v.render){const C=v.template||Gi(e).template;if(C){const{isCustomElement:w,compilerOptions:L}=e.appContext.config,{delimiters:i,compilerOptions:n}=v,l=ye(ye({isCustomElement:w,delimiters:i},L),n);v.render=ys(C,l)}}e.render=v.render||Ie}ft(e),vt(),oo(e),mt(),ot()}function Fo(e){return new Proxy(e.attrs,{get(s,d){return xe(e,"get","$attrs"),s[d]}})}function Uo(e){const s=v=>{e.exposed=v||{}};let d;return{get attrs(){return d||(d=Fo(e))},slots:e.slots,emit:e.emit,expose:s}}function Qi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(er(Qs(e.exposed)),{get(s,d){if(d in s)return s[d];if(d in yt)return yt[d](e)},has(s,d){return d in s||d in yt}}))}function No(e){return le(e)&&"__vccOpts"in e}const Wo=(e,s)=>An(e,s,At),jo=Symbol(""),$o=()=>Ut(jo),Ko="3.2.47",zo="http://www.w3.org/2000/svg",st=typeof document<"u"?document:null,ws=st&&st.createElement("template"),qo={insert:(e,s,d)=>{s.insertBefore(e,d||null)},remove:e=>{const s=e.parentNode;s&&s.removeChild(e)},createElement:(e,s,d,v)=>{const C=s?st.createElementNS(zo,e):st.createElement(e,d?{is:d}:void 0);return e==="select"&&v&&v.multiple!=null&&C.setAttribute("multiple",v.multiple),C},createText:e=>st.createTextNode(e),createComment:e=>st.createComment(e),setText:(e,s)=>{e.nodeValue=s},setElementText:(e,s)=>{e.textContent=s},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>st.querySelector(e),setScopeId(e,s){e.setAttribute(s,"")},insertStaticContent(e,s,d,v,C,w){const L=d?d.previousSibling:s.lastChild;if(C&&(C===w||C.nextSibling))for(;s.insertBefore(C.cloneNode(!0),d),!(C===w||!(C=C.nextSibling)););else{ws.innerHTML=v?`<svg>${e}</svg>`:e;const i=ws.content;if(v){const n=i.firstChild;for(;n.firstChild;)i.appendChild(n.firstChild);i.removeChild(n)}s.insertBefore(i,d)}return[L?L.nextSibling:s.firstChild,d?d.previousSibling:s.lastChild]}};function Vo(e,s,d){const v=e._vtc;v&&(s=(s?[s,...v]:[...v]).join(" ")),s==null?e.removeAttribute("class"):d?e.setAttribute("class",s):e.className=s}function Xo(e,s,d){const v=e.style,C=Ce(d);if(d&&!C){if(s&&!Ce(s))for(const w in s)d[w]==null&&xi(v,w,"");for(const w in d)xi(v,w,d[w])}else{const w=v.display;C?s!==d&&(v.cssText=d):s&&e.removeAttribute("style"),"_vod"in e&&(v.display=w)}}const Es=/\s*!important$/;function xi(e,s,d){if(ae(d))d.forEach(v=>xi(e,s,v));else if(d==null&&(d=""),s.startsWith("--"))e.setProperty(s,d);else{const v=Yo(e,s);Es.test(d)?e.setProperty(gt(v),d.replace(Es,""),"important"):e[v]=d}}const Ls=["Webkit","Moz","ms"],hi={};function Yo(e,s){const d=hi[s];if(d)return d;let v=ut(s);if(v!=="filter"&&v in e)return hi[s]=v;v=Ns(v);for(let C=0;C<Ls.length;C++){const w=Ls[C]+v;if(w in e)return hi[s]=w}return s}const xs="http://www.w3.org/1999/xlink";function Go(e,s,d,v,C){if(v&&s.startsWith("xlink:"))d==null?e.removeAttributeNS(xs,s.slice(6,s.length)):e.setAttributeNS(xs,s,d);else{const w=Or(s);d==null||w&&!Fs(d)?e.removeAttribute(s):e.setAttribute(s,w?"":d)}}function Jo(e,s,d,v,C,w,L){if(s==="innerHTML"||s==="textContent"){v&&L(v,C,w),e[s]=d??"";return}if(s==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=d;const n=d??"";(e.value!==n||e.tagName==="OPTION")&&(e.value=n),d==null&&e.removeAttribute(s);return}let i=!1;if(d===""||d==null){const n=typeof e[s];n==="boolean"?d=Fs(d):d==null&&n==="string"?(d="",i=!0):n==="number"&&(d=0,i=!0)}try{e[s]=d}catch{}i&&e.removeAttribute(s)}function Zo(e,s,d,v){e.addEventListener(s,d,v)}function Qo(e,s,d,v){e.removeEventListener(s,d,v)}function ea(e,s,d,v,C=null){const w=e._vei||(e._vei={}),L=w[s];if(v&&L)L.value=v;else{const[i,n]=ta(s);if(v){const l=w[s]=ra(v,C);Zo(e,i,l,n)}else L&&(Qo(e,i,L,n),w[s]=void 0)}}const Rs=/(?:Once|Passive|Capture)$/;function ta(e){let s;if(Rs.test(e)){s={};let v;for(;v=e.match(Rs);)e=e.slice(0,e.length-v[0].length),s[v[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gt(e.slice(2)),s]}let di=0;const ia=Promise.resolve(),sa=()=>di||(ia.then(()=>di=0),di=Date.now());function ra(e,s){const d=v=>{if(!v._vts)v._vts=Date.now();else if(v._vts<=d.attached)return;ke(na(v,d.value),s,5,[v])};return d.value=e,d.attached=sa(),d}function na(e,s){if(ae(s)){const d=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{d.call(e),e._stopped=!0},s.map(v=>C=>!C._stopped&&v&&v(C))}else return s}const As=/^on[a-z]/,oa=(e,s,d,v,C=!1,w,L,i,n)=>{s==="class"?Vo(e,v,C):s==="style"?Xo(e,d,v):Vt(s)?Mi(s)||ea(e,s,d,v,L):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):aa(e,s,v,C))?Jo(e,s,v,w,L,i,n):(s==="true-value"?e._trueValue=v:s==="false-value"&&(e._falseValue=v),Go(e,s,v,C))};function aa(e,s,d,v){return v?!!(s==="innerHTML"||s==="textContent"||s in e&&As.test(s)&&le(d)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&e.tagName==="INPUT"||s==="type"&&e.tagName==="TEXTAREA"||As.test(s)&&Ce(d)?!1:s in e}const la={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Vn.props;const ca=ye({patchProp:oa},qo);let ks;function ha(){return ks||(ks=So(ca))}const da=(...e)=>{const s=ha().createApp(...e),{mount:d}=s;return s.mount=v=>{const C=ua(v);if(!C)return;const w=s._component;!le(w)&&!w.render&&!w.template&&(w.template=C.innerHTML),C.innerHTML="";const L=d(C,!1,C instanceof SVGElement);return C instanceof Element&&(C.removeAttribute("v-cloak"),C.setAttribute("data-v-app","")),L},s};function ua(e){return Ce(e)?document.querySelector(e):e}const ui=10,Ds=(e=0)=>s=>`\x1B[${s+e}m`,Ts=(e=0)=>s=>`\x1B[${38+e};5;${s}m`,Bs=(e=0)=>(s,d,v)=>`\x1B[${38+e};2;${s};${d};${v}m`,pe={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(pe.modifier);const fa=Object.keys(pe.color),_a=Object.keys(pe.bgColor);[...fa,..._a];function pa(){const e=new Map;for(const[s,d]of Object.entries(pe)){for(const[v,C]of Object.entries(d))pe[v]={open:`\x1B[${C[0]}m`,close:`\x1B[${C[1]}m`},d[v]=pe[v],e.set(C[0],C[1]);Object.defineProperty(pe,s,{value:d,enumerable:!1})}return Object.defineProperty(pe,"codes",{value:e,enumerable:!1}),pe.color.close="\x1B[39m",pe.bgColor.close="\x1B[49m",pe.color.ansi=Ds(),pe.color.ansi256=Ts(),pe.color.ansi16m=Bs(),pe.bgColor.ansi=Ds(ui),pe.bgColor.ansi256=Ts(ui),pe.bgColor.ansi16m=Bs(ui),Object.defineProperties(pe,{rgbToAnsi256:{value(s,d,v){return s===d&&d===v?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(d/255*5)+Math.round(v/255*5)},enumerable:!1},hexToRgb:{value(s){const d=/[a-f\d]{6}|[a-f\d]{3}/i.exec(s.toString(16));if(!d)return[0,0,0];let[v]=d;v.length===3&&(v=[...v].map(w=>w+w).join(""));const C=Number.parseInt(v,16);return[C>>16&255,C>>8&255,C&255]},enumerable:!1},hexToAnsi256:{value:s=>pe.rgbToAnsi256(...pe.hexToRgb(s)),enumerable:!1},ansi256ToAnsi:{value(s){if(s<8)return 30+s;if(s<16)return 90+(s-8);let d,v,C;if(s>=232)d=((s-232)*10+8)/255,v=d,C=d;else{s-=16;const i=s%36;d=Math.floor(s/36)/5,v=Math.floor(i/6)/5,C=i%6/5}const w=Math.max(d,v,C)*2;if(w===0)return 30;let L=30+(Math.round(C)<<2|Math.round(v)<<1|Math.round(d));return w===2&&(L+=60),L},enumerable:!1},rgbToAnsi:{value:(s,d,v)=>pe.ansi256ToAnsi(pe.rgbToAnsi256(s,d,v)),enumerable:!1},hexToAnsi:{value:s=>pe.ansi256ToAnsi(pe.hexToAnsi256(s)),enumerable:!1}}),pe}const Fe=pa(),Ht=(()=>{if(navigator.userAgentData){const e=navigator.userAgentData.brands.find(({brand:s})=>s==="Chromium");if(e&&e.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),Ms=Ht!==0&&{level:Ht,hasBasic:!0,has256:Ht>=2,has16m:Ht>=3},ga={stdout:Ms,stderr:Ms};function va(e,s,d){let v=e.indexOf(s);if(v===-1)return e;const C=s.length;let w=0,L="";do L+=e.slice(w,v)+s+d,w=v+C,v=e.indexOf(s,w);while(v!==-1);return L+=e.slice(w),L}function ma(e,s,d,v){let C=0,w="";do{const L=e[v-1]==="\r";w+=e.slice(C,L?v-1:v)+s+(L?`\r
`:`
`)+d,C=v+1,v=e.indexOf(`
`,C)}while(v!==-1);return w+=e.slice(C),w}const{stdout:Os,stderr:Is}=ga,Ri=Symbol("GENERATOR"),_t=Symbol("STYLER"),kt=Symbol("IS_EMPTY"),Ps=["ansi","ansi","ansi256","ansi16m"],pt=Object.create(null),Sa=(e,s={})=>{if(s.level&&!(Number.isInteger(s.level)&&s.level>=0&&s.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const d=Os?Os.level:0;e.level=s.level===void 0?d:s.level},Ca=e=>{const s=(...d)=>d.join(" ");return Sa(s,e),Object.setPrototypeOf(s,Dt.prototype),s};function Dt(e){return Ca(e)}Object.setPrototypeOf(Dt.prototype,Function.prototype);for(const[e,s]of Object.entries(Fe))pt[e]={get(){const d=qt(this,ki(s.open,s.close,this[_t]),this[kt]);return Object.defineProperty(this,e,{value:d}),d}};pt.visible={get(){const e=qt(this,this[_t],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const Ai=(e,s,d,...v)=>e==="rgb"?s==="ansi16m"?Fe[d].ansi16m(...v):s==="ansi256"?Fe[d].ansi256(Fe.rgbToAnsi256(...v)):Fe[d].ansi(Fe.rgbToAnsi(...v)):e==="hex"?Ai("rgb",s,d,...Fe.hexToRgb(...v)):Fe[d][e](...v),ba=["rgb","hex","ansi256"];for(const e of ba){pt[e]={get(){const{level:d}=this;return function(...v){const C=ki(Ai(e,Ps[d],"color",...v),Fe.color.close,this[_t]);return qt(this,C,this[kt])}}};const s="bg"+e[0].toUpperCase()+e.slice(1);pt[s]={get(){const{level:d}=this;return function(...v){const C=ki(Ai(e,Ps[d],"bgColor",...v),Fe.bgColor.close,this[_t]);return qt(this,C,this[kt])}}}}const ya=Object.defineProperties(()=>{},{...pt,level:{enumerable:!0,get(){return this[Ri].level},set(e){this[Ri].level=e}}}),ki=(e,s,d)=>{let v,C;return d===void 0?(v=e,C=s):(v=d.openAll+e,C=s+d.closeAll),{open:e,close:s,openAll:v,closeAll:C,parent:d}},qt=(e,s,d)=>{const v=(...C)=>wa(v,C.length===1?""+C[0]:C.join(" "));return Object.setPrototypeOf(v,ya),v[Ri]=e,v[_t]=s,v[kt]=d,v},wa=(e,s)=>{if(e.level<=0||!s)return e[kt]?"":s;let d=e[_t];if(d===void 0)return s;const{openAll:v,closeAll:C}=d;if(s.includes("\x1B"))for(;d!==void 0;)s=va(s,d.close,d.open),d=d.parent;const w=s.indexOf(`
`);return w!==-1&&(s=ma(s,C,v,w)),v+s+C};Object.defineProperties(Dt.prototype,pt);const Hs=Dt();Dt({level:Is?Is.level:0});var xr={exports:{}};(function(e,s){(function(d,v){e.exports=v()})(self,function(){return(()=>{var d={4567:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const l=n(9042),_=n(6114),f=n(9924),p=n(3656),S=n(844),m=n(5596),u=n(9631);class t extends S.Disposable{constructor(c,r){super(),this._terminal=c,this._renderService=r,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new f.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(a=>this._handleResize(a.rows))),this.register(this._terminal.onRender(a=>this._refreshRows(a.start,a.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(a=>this._handleChar(a))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(a=>this._handleTab(a))),this.register(this._terminal.onKey(a=>this._handleKey(a.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new m.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,S.toDisposable)(()=>{(0,u.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(c,r){const a=c.target,g=this._rowElements[r===0?1:this._rowElements.length-2];if(a.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==g)return;let b,x;if(r===0?(b=a,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(b=this._rowElements.shift(),x=a,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const h=this._createAccessibilityTreeNode();this._rowElements.unshift(h),this._rowContainer.insertAdjacentElement("afterbegin",h)}else{const h=this._createAccessibilityTreeNode();this._rowElements.push(h),this._rowContainer.appendChild(h)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_handleTab(c){for(let r=0;r<c;r++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&(0,u.removeElementFromParent)(this._liveRegion)}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,r){this._renderRowsDebouncer.refresh(c,r,this._terminal.rows)}_renderRows(c,r){const a=this._terminal.buffer,g=a.lines.length.toString();for(let b=c;b<=r;b++){const x=a.translateBufferLineToString(a.ydisp+b,!0),h=(a.ydisp+b+1).toString(),y=this._rowElements[b];y&&(x.length===0?y.innerText="":y.textContent=x,y.setAttribute("aria-posinset",h),y.setAttribute("aria-setsize",g))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}i.AccessibilityManager=t},3614:(L,i)=>{function n(p){return p.replace(/\r?\n/g,"\r")}function l(p,S){return S?"\x1B[200~"+p+"\x1B[201~":p}function _(p,S,m){p=l(p=n(p),m.decPrivateModes.bracketedPasteMode),m.triggerDataEvent(p,!0),S.value=""}function f(p,S,m){const u=m.getBoundingClientRect(),t=p.clientX-u.left-10,o=p.clientY-u.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${t}px`,S.style.top=`${o}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=l,i.copyHandler=function(p,S){p.clipboardData&&p.clipboardData.setData("text/plain",S.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,S,m){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),S,m)},i.paste=_,i.moveTextAreaUnderMouseCursor=f,i.rightClickHandler=function(p,S,m,u,t){f(p,S,m),t&&u.rightClickSelect(p),S.value=u.selectionText,S.select()}},7239:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const l=n(1505);i.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(_,f,p){this._css.set(_,f,p)}getCss(_,f){return this._css.get(_,f)}setColor(_,f,p){this._color.set(_,f,p)}getColor(_,f){return this._color.get(_,f)}clear(){this._color.clear(),this._css.clear()}}},9631:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(...n){var l;for(const _ of n)(l=_==null?void 0:_.parentElement)===null||l===void 0||l.removeChild(_)}},3656:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,l,_,f){n.addEventListener(l,_,f);let p=!1;return{dispose:()=>{p||(p=!0,n.removeEventListener(l,_,f))}}}},6465:function(L,i,n){var l=this&&this.__decorate||function(t,o,c,r){var a,g=arguments.length,b=g<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,o,c,r);else for(var x=t.length-1;x>=0;x--)(a=t[x])&&(b=(g<3?a(b):g>3?a(o,c,b):a(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},_=this&&this.__param||function(t,o){return function(c,r){o(c,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const f=n(2585),p=n(8460),S=n(844),m=n(3656);let u=class extends S.Disposable{constructor(t){super(),this._bufferService=t,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(t){return this._linkProviders.push(t),{dispose:()=>{const o=this._linkProviders.indexOf(t);o!==-1&&this._linkProviders.splice(o,1)}}}attachToDom(t,o,c){this._element=t,this._mouseService=o,this._renderService=c,this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(t){if(this._lastMouseEvent=t,!this._element||!this._mouseService)return;const o=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const c=t.composedPath();for(let r=0;r<c.length;r++){const a=c[r];if(a.classList.contains("xterm"))break;if(a.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,o){var c,r;this._activeProviderReplies&&o||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(g=>{g==null||g.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let a=!1;for(const[g,b]of this._linkProviders.entries())o?!((r=this._activeProviderReplies)===null||r===void 0)&&r.get(g)&&(a=this._checkLinkProviderResult(g,t,a)):b.provideLinks(t.y,x=>{var h,y;if(this._isMouseOut)return;const R=x==null?void 0:x.map(D=>({link:D}));(h=this._activeProviderReplies)===null||h===void 0||h.set(g,R),a=this._checkLinkProviderResult(g,t,a),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,o){const c=new Set;for(let r=0;r<o.size;r++){const a=o.get(r);if(a)for(let g=0;g<a.length;g++){const b=a[g],x=b.link.range.start.y<t?0:b.link.range.start.x,h=b.link.range.end.y>t?this._bufferService.cols:b.link.range.end.x;for(let y=x;y<=h;y++){if(c.has(y)){a.splice(g--,1);break}c.add(y)}}}}_checkLinkProviderResult(t,o,c){var r;if(!this._activeProviderReplies)return c;const a=this._activeProviderReplies.get(t);let g=!1;for(let b=0;b<t;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(g=!0);if(!g&&a){const b=a.find(x=>this._linkAtPosition(x.link,o));b&&(c=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let b=0;b<this._activeProviderReplies.size;b++){const x=(r=this._activeProviderReplies.get(b))===null||r===void 0?void 0:r.find(h=>this._linkAtPosition(h.link,o));if(x){c=!0,this._handleNewLink(x);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._element||!this._mouseService||!this._currentLink)return;const o=this._positionFromMouseEvent(t,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,o){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!o||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(t){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(t.link,o)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>{var c,r;return(r=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||r===void 0?void 0:r.decorations.pointerCursor},set:c=>{var r,a;!((r=this._currentLink)===null||r===void 0)&&r.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((a=this._element)===null||a===void 0||a.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,r;return(r=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||r===void 0?void 0:r.decorations.underline},set:c=>{var r,a,g;!((r=this._currentLink)===null||r===void 0)&&r.state&&((g=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||g===void 0?void 0:g.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{const r=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,a=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(r,c.end+1+this._bufferService.buffer.ydisp),a&&this._element){const g=this._positionFromMouseEvent(a,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(t,o,c){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(c,o.text)}_fireUnderlineEvent(t,o){const c=t.range,r=this._bufferService.buffer.ydisp,a=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-r-1,c.end.x,c.end.y-r-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(a)}_linkLeave(t,o,c){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(c,o.text)}_linkAtPosition(t,o){const c=t.range.start.y*this._bufferService.cols+t.range.start.x,r=t.range.end.y*this._bufferService.cols+t.range.end.x,a=o.y*this._bufferService.cols+o.x;return c<=a&&a<=r}_positionFromMouseEvent(t,o,c){const r=c.getCoords(t,o,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,o,c,r,a){return{x1:t,y1:o,x2:c,y2:r,cols:this._bufferService.cols,fg:a}}};u=l([_(0,f.IBufferService)],u),i.Linkifier2=u},9042:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(L,i,n){var l=this&&this.__decorate||function(u,t,o,c){var r,a=arguments.length,g=a<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,o,c);else for(var b=u.length-1;b>=0;b--)(r=u[b])&&(g=(a<3?r(g):a>3?r(t,o,g):r(t,o))||g);return a>3&&g&&Object.defineProperty(t,o,g),g},_=this&&this.__param||function(u,t){return function(o,c){t(o,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const f=n(511),p=n(2585);let S=class{constructor(u,t,o){this._bufferService=u,this._optionsService=t,this._oscLinkService=o}provideLinks(u,t){var o;const c=this._bufferService.buffer.lines.get(u-1);if(!c)return void t(void 0);const r=[],a=this._optionsService.rawOptions.linkHandler,g=new f.CellData,b=c.getTrimmedLength();let x=-1,h=-1,y=!1;for(let R=0;R<b;R++)if(h!==-1||c.hasContent(R)){if(c.loadCell(R,g),g.hasExtendedAttrs()&&g.extended.urlId){if(h===-1){h=R,x=g.extended.urlId;continue}y=g.extended.urlId!==x}else h!==-1&&(y=!0);if(y||h!==-1&&R===b-1){const D=(o=this._oscLinkService.getLinkData(x))===null||o===void 0?void 0:o.uri;if(D){const T={start:{x:h+1,y:u},end:{x:R+(y||R!==b-1?0:1),y:u}};let P=!1;if(!(a!=null&&a.allowNonHttpProtocols))try{const j=new URL(D);["http:","https:"].includes(j.protocol)||(P=!0)}catch{P=!0}P||r.push({text:D,range:T,activate:(j,J)=>a?a.activate(j,J,T):m(0,J),hover:(j,J)=>{var z;return(z=a==null?void 0:a.hover)===null||z===void 0?void 0:z.call(a,j,J,T)},leave:(j,J)=>{var z;return(z=a==null?void 0:a.leave)===null||z===void 0?void 0:z.call(a,j,J,T)}})}y=!1,g.hasExtendedAttrs()&&g.extended.urlId?(h=R,x=g.extended.urlId):(h=-1,x=-1)}}t(r)}};function m(u,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}S=l([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],S),i.OscLinkProvider=S},6193:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,l){this._parentWindow=n,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,l,_){this._rowCount=_,n=n!==void 0?n:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const l=n(844);class _ extends l.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=_},3236:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const l=n(2950),_=n(1680),f=n(3614),p=n(2584),S=n(5435),m=n(9312),u=n(6114),t=n(3656),o=n(9042),c=n(4567),r=n(1296),a=n(7399),g=n(8460),b=n(8437),x=n(3230),h=n(4725),y=n(428),R=n(8934),D=n(6465),T=n(5114),P=n(8969),j=n(8055),J=n(4269),z=n(5941),E=n(3107),k=n(5744),O=n(9074),H=n(2585),q=n(3730),Z=n(844),ne=n(6731),Y=typeof window<"u"?window.document:null;class ie extends P.CoreTerminal{constructor(B={}){super(B),this.browser=u,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new g.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new g.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new g.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new g.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new g.EventEmitter),this._onBlur=this.register(new g.EventEmitter),this._onA11yCharEmitter=this.register(new g.EventEmitter),this._onA11yTabEmitter=this.register(new g.EventEmitter),this._onWillOpen=this.register(new g.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(D.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(q.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((F,$)=>this.refresh(F,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(F=>this._reportWindowsOptions(F))),this.register(this._inputHandler.onColor(F=>this._handleColorEvent(F))),this.register((0,g.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,g.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,g.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,g.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(F=>this._afterResize(F.cols,F.rows))),this.register((0,Z.toDisposable)(()=>{var F,$;this._customKeyEventHandler=void 0,($=(F=this.element)===null||F===void 0?void 0:F.parentNode)===null||$===void 0||$.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(B){if(this._themeService)for(const F of B){let $,G="";switch(F.index){case 256:$="foreground",G="10";break;case 257:$="background",G="11";break;case 258:$="cursor",G="12";break;default:$="ansi",G="4;"+F.index}switch(F.type){case 0:const fe=j.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${p.C0.ESC}]${G};${(0,z.toRgbString)(fe)}${p.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(A=>A.ansi[F.index]=j.rgba.toColor(...F.color));else{const A=$;this._themeService.modifyColors(M=>M[A]=j.rgba.toColor(...F.color))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(B){var F;B?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new c.AccessibilityManager(this,this._renderService)):((F=this._accessibilityManager)===null||F===void 0||F.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const B=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(B);if(!F)return;const $=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,fe=F.getWidth($),A=this._renderService.dimensions.css.cell.width*fe,M=this.buffer.y*this._renderService.dimensions.css.cell.height,U=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=U+"px",this.textarea.style.top=M+"px",this.textarea.style.width=A+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,t.addDisposableDomListener)(this.element,"copy",F=>{this.hasSelection()&&(0,f.copyHandler)(F,this._selectionService)}));const B=F=>(0,f.handlePasteEvent)(F,this.textarea,this.coreService);this.register((0,t.addDisposableDomListener)(this.textarea,"paste",B)),this.register((0,t.addDisposableDomListener)(this.element,"paste",B)),u.isFirefox?this.register((0,t.addDisposableDomListener)(this.element,"mousedown",F=>{F.button===2&&(0,f.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,t.addDisposableDomListener)(this.element,"contextmenu",F=>{(0,f.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),u.isLinux&&this.register((0,t.addDisposableDomListener)(this.element,"auxclick",F=>{F.button===1&&(0,f.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,t.addDisposableDomListener)(this.textarea,"keyup",B=>this._keyUp(B),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keydown",B=>this._keyDown(B),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keypress",B=>this._keyPress(B),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionupdate",B=>this._compositionHelper.compositionupdate(B))),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,t.addDisposableDomListener)(this.textarea,"input",B=>this._inputEvent(B),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(B){var F;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),B.appendChild(this.element);const $=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),u.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,(F=this._document.defaultView)!==null&&F!==void 0?F:window),this._instantiationService.setService(h.ICoreBrowserService,this._coreBrowserService),this.register((0,t.addDisposableDomListener)(this.textarea,"focus",G=>this._handleTextAreaFocus(G))),this.register((0,t.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(h.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(ne.ThemeService),this._instantiationService.setService(h.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(J.CharacterJoinerService),this._instantiationService.setService(h.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(h.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(G=>this._onRender.fire(G))),this.onResize(G=>this._renderService.resize(G.cols,G.rows)),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(h.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(_.Viewport,G=>this.scrollLines(G,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(h.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(G=>this.scrollLines(G.amount,G.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(G=>this._renderService.handleSelectionChanged(G.start,G.end,G.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(G=>{this.textarea.value=G,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(G=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,t.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(E.BufferDecorationRenderer,this.screenElement)),this.register((0,t.addDisposableDomListener)(this.element,"mousedown",G=>this._selectionService.handleMouseDown(G))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new c.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",G=>this._handleScreenReaderModeOptionChange(G))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(k.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",G=>{!this._overviewRulerRenderer&&G&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(k.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const B=this,F=this.element;function $(A){const M=B._mouseService.getMouseReportCoords(A,B.screenElement);if(!M)return!1;let U,W;switch(A.overrideType||A.type){case"mousemove":W=32,A.buttons===void 0?(U=3,A.button!==void 0&&(U=A.button<3?A.button:3)):U=1&A.buttons?0:4&A.buttons?1:2&A.buttons?2:3;break;case"mouseup":W=0,U=A.button<3?A.button:3;break;case"mousedown":W=1,U=A.button<3?A.button:3;break;case"wheel":if(B.viewport.getLinesScrolled(A)===0)return!1;W=A.deltaY<0?0:1,U=4;break;default:return!1}return!(W===void 0||U===void 0||U>4)&&B.coreMouseService.triggerMouseEvent({col:M.col,row:M.row,x:M.x,y:M.y,button:U,action:W,ctrl:A.ctrlKey,alt:A.altKey,shift:A.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},fe={mouseup:A=>($(A),A.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(A)),wheel:A=>($(A),this.cancel(A,!0)),mousedrag:A=>{A.buttons&&$(A)},mousemove:A=>{A.buttons||$(A)}};this.register(this.coreMouseService.onProtocolChange(A=>{A?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(A)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&A?G.mousemove||(F.addEventListener("mousemove",fe.mousemove),G.mousemove=fe.mousemove):(F.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&A?G.wheel||(F.addEventListener("wheel",fe.wheel,{passive:!1}),G.wheel=fe.wheel):(F.removeEventListener("wheel",G.wheel),G.wheel=null),2&A?G.mouseup||(G.mouseup=fe.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&A?G.mousedrag||(G.mousedrag=fe.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,t.addDisposableDomListener)(F,"mousedown",A=>{if(A.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(A))return $(A),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(A)})),this.register((0,t.addDisposableDomListener)(F,"wheel",A=>{if(!G.wheel){if(!this.buffer.hasScrollback){const M=this.viewport.getLinesScrolled(A);if(M===0)return;const U=p.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(A.deltaY<0?"A":"B");let W="";for(let N=0;N<Math.abs(M);N++)W+=U;return this.coreService.triggerDataEvent(W,!0),this.cancel(A,!0)}return this.viewport.handleWheel(A)?this.cancel(A):void 0}},{passive:!1})),this.register((0,t.addDisposableDomListener)(F,"touchstart",A=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(A),this.cancel(A)},{passive:!0})),this.register((0,t.addDisposableDomListener)(F,"touchmove",A=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(A)?void 0:this.cancel(A)},{passive:!1}))}refresh(B,F){var $;($=this._renderService)===null||$===void 0||$.refreshRows(B,F)}updateCursorStyle(B){var F;!((F=this._selectionService)===null||F===void 0)&&F.shouldColumnSelect(B)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(B,F,$=0){super.scrollLines(B,F,$),this.refresh(0,this.rows-1)}paste(B){(0,f.paste)(B,this.textarea,this.coreService)}attachCustomKeyEventHandler(B){this._customKeyEventHandler=B}registerLinkProvider(B){return this.linkifier2.registerLinkProvider(B)}registerCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(B){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)}registerDecoration(B){return this._decorationService.registerDecoration(B)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(B,F,$){this._selectionService.setSelection(B,F,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()}selectAll(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()}selectLines(B,F){var $;($=this._selectionService)===null||$===void 0||$.selectLines(B,F)}_keyDown(B){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&B.altKey;if(!F&&!this._compositionHelper.keydown(B))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;F||B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,a.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),$.type===3||$.type===2){const G=this.rows-1;return this.scrollLines($.type===2?-G:G),this.cancel(B,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||($.cancel&&this.cancel(B,!0),!$.key||!!(B.key&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&B.key.length===1&&B.key.charCodeAt(0)>=65&&B.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==p.C0.ETX&&$.key!==p.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||B.altKey||B.ctrlKey?this.cancel(B,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(B,F){const $=B.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||B.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||B.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?$:$&&(!F.keyCode||F.keyCode>47)}_keyUp(B){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||(function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18}(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)}_keyPress(B){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)F=B.charCode;else if(B.which===null||B.which===void 0)F=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;F=B.which}return!(!F||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(B){if(B.data&&B.inputType==="insertText"&&(!B.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=B.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(B),!0}return!1}resize(B,F){B!==this.cols||F!==this.rows?super.resize(B,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(B,F){var $,G;($=this._charSizeService)===null||$===void 0||$.measure(),(G=this.viewport)===null||G===void 0||G.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(b.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var B,F;this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)===null||B===void 0||B.reset(),this._decorationService.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1),(F=this.viewport)===null||F===void 0||F.syncScrollArea()}clearTextureAtlas(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()}_reportFocus(){var B;!((B=this.element)===null||B===void 0)&&B.classList.contains("focus")?this.coreService.triggerDataEvent(p.C0.ESC+"[I"):this.coreService.triggerDataEvent(p.C0.ESC+"[O")}_reportWindowsOptions(B){if(this._renderService)switch(B){case S.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${p.C0.ESC}[4;${$};${F}t`);break;case S.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),fe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${p.C0.ESC}[6;${fe};${G}t`)}}cancel(B,F){if(this.options.cancelEvents||F)return B.preventDefault(),B.stopPropagation(),!1}}i.Terminal=ie},9924:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,l=1e3){this._renderCallback=n,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,l,_){this._rowCount=_,n=n!==void 0?n:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=f-this._lastRefreshMs,S=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,l)}}},1680:function(L,i,n){var l=this&&this.__decorate||function(t,o,c,r){var a,g=arguments.length,b=g<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,o,c,r);else for(var x=t.length-1;x>=0;x--)(a=t[x])&&(b=(g<3?a(b):g>3?a(o,c,b):a(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},_=this&&this.__param||function(t,o){return function(c,r){o(c,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const f=n(844),p=n(3656),S=n(4725),m=n(2585);let u=class extends f.Disposable{constructor(t,o,c,r,a,g,b,x,h){super(),this._scrollLines=t,this._viewportElement=o,this._scrollArea=c,this._bufferService=r,this._optionsService=a,this._charSizeService=g,this._renderService=b,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(h.colors),this.register(h.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(t){this._viewportElement.style.backgroundColor=t.background.css}_refresh(t){if(t)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null}syncScrollArea(t=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(t)}_handleScroll(t){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(o)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const t=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(t*(this._smoothScrollState.target-this._smoothScrollState.origin)),t<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(t,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)}handleWheel(t){const o=this._getPixelsScrolled(t);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(t,o))}_getPixelsScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let o=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getLinesScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let o=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(t,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(t){this._lastTouchY=t.touches[0].pageY}handleTouchMove(t){const o=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(t,o))}};u=l([_(3,m.IBufferService),_(4,m.IOptionsService),_(5,S.ICharSizeService),_(6,S.IRenderService),_(7,S.ICoreBrowserService),_(8,S.IThemeService)],u),i.Viewport=u},3107:function(L,i,n){var l=this&&this.__decorate||function(t,o,c,r){var a,g=arguments.length,b=g<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,o,c,r);else for(var x=t.length-1;x>=0;x--)(a=t[x])&&(b=(g<3?a(b):g>3?a(o,c,b):a(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},_=this&&this.__param||function(t,o){return function(c,r){o(c,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const f=n(3656),p=n(4725),S=n(844),m=n(2585);let u=class extends S.Disposable{constructor(t,o,c,r){super(),this._screenElement=t,this._bufferService=o,this._decorationService=c,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){var o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(t.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const r=(o=t.options.x)!==null&&o!==void 0?o:0;return r&&r>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(t,c),c}_refreshStyle(t){const o=t.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let c=this._decorationElements.get(t);c||(c=this._createElement(t),t.element=c,this._decorationElements.set(t,c),this._container.appendChild(c)),c.style.top=o*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(c)}}_refreshXPosition(t,o=t.element){var c;if(!o)return;const r=(c=t.options.x)!==null&&c!==void 0?c:0;(t.options.anchor||"left")==="right"?o.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(t){var o;(o=this._decorationElements.get(t))===null||o===void 0||o.remove(),this._decorationElements.delete(t),t.dispose()}};u=l([_(1,m.IBufferService),_(2,m.IDecorationService),_(3,p.IRenderService)],u),i.BufferDecorationRenderer=u},5871:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const l of this._zones)if(l.color===n.options.overviewRulerOptions.color&&l.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,n.marker.line))return;if(this._lineAdjacentToZone(l,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(l,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,l){return l>=n.startBufferLine&&l<=n.endBufferLine}_lineAdjacentToZone(n,l,_){return l>=n.startBufferLine-this._linePadding[_||"full"]&&l<=n.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(n,l){n.startBufferLine=Math.min(n.startBufferLine,l),n.endBufferLine=Math.max(n.endBufferLine,l)}}},5744:function(L,i,n){var l=this&&this.__decorate||function(a,g,b,x){var h,y=arguments.length,R=y<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,g,b,x);else for(var D=a.length-1;D>=0;D--)(h=a[D])&&(R=(y<3?h(R):y>3?h(g,b,R):h(g,b))||R);return y>3&&R&&Object.defineProperty(g,b,R),R},_=this&&this.__param||function(a,g){return function(b,x){g(b,x,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const f=n(5871),p=n(3656),S=n(4725),m=n(844),u=n(2585),t={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let r=class extends m.Disposable{constructor(a,g,b,x,h,y,R){var D;super(),this._viewportElement=a,this._screenElement=g,this._bufferService=b,this._decorationService=x,this._renderService=h,this._optionsService=y,this._coreBrowseService=R,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(D=this._viewportElement.parentElement)===null||D===void 0||D.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var P;(P=this._canvas)===null||P===void 0||P.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const a=Math.floor(this._canvas.width/3),g=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=a,o.center=g,o.right=a,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=o.left,c.right=o.left+o.center}_refreshDrawHeightConstants(){t.full=Math.round(2*this._coreBrowseService.dpr);const a=this._canvas.height/this._bufferService.buffer.lines.length,g=Math.round(Math.max(Math.min(a,12),6)*this._coreBrowseService.dpr);t.left=g,t.center=g,t.right=g}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const g of this._decorationService.decorations)this._colorZoneStore.addDecoration(g);this._ctx.lineWidth=1;const a=this._colorZoneStore.zones;for(const g of a)g.position!=="full"&&this._renderColorZone(g);for(const g of a)g.position==="full"&&this._renderColorZone(g);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(a){this._ctx.fillStyle=a.color,this._ctx.fillRect(c[a.position||"full"],Math.round((this._canvas.height-1)*(a.startBufferLine/this._bufferService.buffers.active.lines.length)-t[a.position||"full"]/2),o[a.position||"full"],Math.round((this._canvas.height-1)*((a.endBufferLine-a.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[a.position||"full"]))}_queueRefresh(a,g){this._shouldUpdateDimensions=a||this._shouldUpdateDimensions,this._shouldUpdateAnchor=g||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r=l([_(2,u.IBufferService),_(3,u.IDecorationService),_(4,S.IRenderService),_(5,u.IOptionsService),_(6,S.ICoreBrowserService)],r),i.OverviewRulerRenderer=r},2950:function(L,i,n){var l=this&&this.__decorate||function(u,t,o,c){var r,a=arguments.length,g=a<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,o,c);else for(var b=u.length-1;b>=0;b--)(r=u[b])&&(g=(a<3?r(g):a>3?r(t,o,g):r(t,o))||g);return a>3&&g&&Object.defineProperty(t,o,g),g},_=this&&this.__param||function(u,t){return function(o,c){t(o,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const f=n(4725),p=n(2585),S=n(2584);let m=class{constructor(u,t,o,c,r,a){this._textarea=u,this._compositionView=t,this._bufferService=o,this._optionsService=c,this._coreService=r,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,o=t.replace(u,"");this._dataAlreadySent=o,t.length>u.length?this._coreService.triggerDataEvent(o,!0):t.length<u.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):t.length===u.length&&t!==u&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const a=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};m=l([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,f.IRenderService)],m),i.CompositionHelper=m},9806:(L,i)=>{function n(l,_,f){const p=f.getBoundingClientRect(),S=l.getComputedStyle(f),m=parseInt(S.getPropertyValue("padding-left")),u=parseInt(S.getPropertyValue("padding-top"));return[_.clientX-p.left-m,_.clientY-p.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(l,_,f,p,S,m,u,t,o){if(!m)return;const c=n(l,_,f);return c?(c[0]=Math.ceil((c[0]+(o?u/2:0))/u),c[1]=Math.ceil(c[1]/t),c[0]=Math.min(Math.max(c[0],1),p+(o?1:0)),c[1]=Math.min(Math.max(c[1],1),S),c):void 0}},9504:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const l=n(2584);function _(t,o,c,r){const a=t-f(t,c),g=o-f(o,c),b=Math.abs(a-g)-function(x,h,y){let R=0;const D=x-f(x,y),T=h-f(h,y);for(let P=0;P<Math.abs(D-T);P++){const j=p(x,h)==="A"?-1:1,J=y.buffer.lines.get(D+j*P);J!=null&&J.isWrapped&&R++}return R}(t,o,c);return u(b,m(p(t,o),r))}function f(t,o){let c=0,r=o.buffer.lines.get(t),a=r==null?void 0:r.isWrapped;for(;a&&t>=0&&t<o.rows;)c++,r=o.buffer.lines.get(--t),a=r==null?void 0:r.isWrapped;return c}function p(t,o){return t>o?"A":"B"}function S(t,o,c,r,a,g){let b=t,x=o,h="";for(;b!==c||x!==r;)b+=a?1:-1,a&&b>g.cols-1?(h+=g.buffer.translateBufferLineToString(x,!1,t,b),b=0,t=0,x++):!a&&b<0&&(h+=g.buffer.translateBufferLineToString(x,!1,0,t+1),b=g.cols-1,t=b,x--);return h+g.buffer.translateBufferLineToString(x,!1,t,b)}function m(t,o){const c=o?"O":"[";return l.C0.ESC+c+t}function u(t,o){t=Math.floor(t);let c="";for(let r=0;r<t;r++)c+=o;return c}i.moveToCellSequence=function(t,o,c,r){const a=c.buffer.x,g=c.buffer.y;if(!c.buffer.hasScrollback)return function(h,y,R,D,T,P){return _(y,D,T,P).length===0?"":u(S(h,y,h,y-f(y,T),!1,T).length,m("D",P))}(a,g,0,o,c,r)+_(g,o,c,r)+function(h,y,R,D,T,P){let j;j=_(y,D,T,P).length>0?D-f(D,T):y;const J=D,z=function(E,k,O,H,q,Z){let ne;return ne=_(O,H,q,Z).length>0?H-f(H,q):k,E<O&&ne<=H||E>=O&&ne<H?"C":"D"}(h,y,R,D,T,P);return u(S(h,j,R,J,z==="C",T).length,m(z,P))}(a,g,t,o,c,r);let b;if(g===o)return b=a>t?"D":"C",u(Math.abs(a-t),m(b,r));b=g>o?"D":"C";const x=Math.abs(g-o);return u(function(h,y){return y.cols-h}(g>o?t:a,c)+(x-1)*c.cols+1+((g>o?a:t)-1),m(b,r))}},1296:function(L,i,n){var l=this&&this.__decorate||function(h,y,R,D){var T,P=arguments.length,j=P<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,R):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(h,y,R,D);else for(var J=h.length-1;J>=0;J--)(T=h[J])&&(j=(P<3?T(j):P>3?T(y,R,j):T(y,R))||j);return P>3&&j&&Object.defineProperty(y,R,j),j},_=this&&this.__param||function(h,y){return function(R,D){y(R,D,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const f=n(9631),p=n(3787),S=n(2223),m=n(6171),u=n(4725),t=n(8055),o=n(8460),c=n(844),r=n(2585),a="xterm-dom-renderer-owner-",g="xterm-focus";let b=1,x=class extends c.Disposable{constructor(h,y,R,D,T,P,j,J,z,E){super(),this._element=h,this._screenElement=y,this._viewportElement=R,this._linkifier2=D,this._charSizeService=P,this._optionsService=j,this._bufferService=J,this._coreBrowserService=z,this._terminalClass=b++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,m.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(E.onChangeColors(k=>this._injectCss(k))),this._injectCss(E.colors),this._rowFactory=T.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(a+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(k=>this._handleLinkHover(k))),this.register(this._linkifier2.onHideLinkUnderline(k=>this._handleLinkLeave(k))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(a+this._terminalClass),(0,f.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){const h=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*h,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*h),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/h),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/h),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const R of this._rowElements)R.style.width=`${this.dimensions.css.canvas.width}px`,R.style.height=`${this.dimensions.css.cell.height}px`,R.style.lineHeight=`${this.dimensions.css.cell.height}px`,R.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const y=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=y,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(h){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let y=`${this._terminalSelector} .xterm-rows { color: ${h.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;y+=`${this._terminalSelector} span:not(.${p.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${p.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${p.ITALIC_CLASS} { font-style: italic;}`,y+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",y+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${h.cursor.css};  color: ${h.cursorAccent.css}; } 50% {  background-color: ${h.cursorAccent.css};  color: ${h.cursor.css}; }}`,y+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${p.CURSOR_CLASS}.${p.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${h.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${p.CURSOR_CLASS}.${p.CURSOR_BLINK_CLASS}:not(.${p.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${p.CURSOR_CLASS}.${p.CURSOR_BLINK_CLASS}.${p.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${p.CURSOR_CLASS}.${p.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${h.cursor.css}; color: ${h.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${p.CURSOR_CLASS}.${p.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${h.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${p.CURSOR_CLASS}.${p.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${h.cursor.css} inset;}`,y+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${h.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${h.selectionInactiveBackgroundOpaque.css};}`;for(const[R,D]of h.ansi.entries())y+=`${this._terminalSelector} .xterm-fg-${R} { color: ${D.css}; }${this._terminalSelector} .xterm-bg-${R} { background-color: ${D.css}; }`;y+=`${this._terminalSelector} .xterm-fg-${S.INVERTED_DEFAULT_COLOR} { color: ${t.color.opaque(h.background).css}; }${this._terminalSelector} .xterm-bg-${S.INVERTED_DEFAULT_COLOR} { background-color: ${h.foreground.css}; }`,this._themeStyleElement.textContent=y}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(h,y){for(let R=this._rowElements.length;R<=y;R++){const D=document.createElement("div");this._rowContainer.appendChild(D),this._rowElements.push(D)}for(;this._rowElements.length>y;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(h,y){this._refreshRowElements(h,y),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g)}handleSelectionChanged(h,y,R){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(h,y,R),this.renderRows(0,this._bufferService.rows-1),!h||!y)return;const D=h[1]-this._bufferService.buffer.ydisp,T=y[1]-this._bufferService.buffer.ydisp,P=Math.max(D,0),j=Math.min(T,this._bufferService.rows-1);if(P>=this._bufferService.rows||j<0)return;const J=document.createDocumentFragment();if(R){const z=h[0]>y[0];J.appendChild(this._createSelectionElement(P,z?y[0]:h[0],z?h[0]:y[0],j-P+1))}else{const z=D===P?h[0]:0,E=P===T?y[0]:this._bufferService.cols;J.appendChild(this._createSelectionElement(P,z,E));const k=j-P-1;if(J.appendChild(this._createSelectionElement(P+1,0,this._bufferService.cols,k)),P!==j){const O=T===j?y[0]:this._bufferService.cols;J.appendChild(this._createSelectionElement(j,0,O))}}this._selectionContainer.appendChild(J)}_createSelectionElement(h,y,R,D=1){const T=document.createElement("div");return T.style.height=D*this.dimensions.css.cell.height+"px",T.style.top=h*this.dimensions.css.cell.height+"px",T.style.left=y*this.dimensions.css.cell.width+"px",T.style.width=this.dimensions.css.cell.width*(R-y)+"px",T}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(const h of this._rowElements)h.replaceChildren()}renderRows(h,y){const R=this._bufferService.buffer.ybase+this._bufferService.buffer.y,D=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),T=this._optionsService.rawOptions.cursorBlink;for(let P=h;P<=y;P++){const j=this._rowElements[P],J=P+this._bufferService.buffer.ydisp,z=this._bufferService.buffer.lines.get(J),E=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[P]&&this._cellToRowElements[P].length===this._bufferService.cols||(this._cellToRowElements[P]=new Int16Array(this._bufferService.cols)),j.replaceChildren(this._rowFactory.createRow(z,J,J===R,E,D,T,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[P]))}}get _terminalSelector(){return`.${a}${this._terminalClass}`}_handleLinkHover(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!0)}_handleLinkLeave(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!1)}_setCellUnderline(h,y,R,D,T,P){if(h=this._cellToRowElements[R][h],y=this._cellToRowElements[D][y],h!==-1&&y!==-1)for(;h!==y||R!==D;){const j=this._rowElements[R];if(!j)return;const J=j.children[h];J&&(J.style.textDecoration=P?"underline":"none"),++h>=T&&(h=0,R++)}}};x=l([_(4,r.IInstantiationService),_(5,u.ICharSizeService),_(6,r.IOptionsService),_(7,r.IBufferService),_(8,u.ICoreBrowserService),_(9,u.IThemeService)],x),i.DomRenderer=x},3787:function(L,i,n){var l=this&&this.__decorate||function(b,x,h,y){var R,D=arguments.length,T=D<3?x:y===null?y=Object.getOwnPropertyDescriptor(x,h):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(b,x,h,y);else for(var P=b.length-1;P>=0;P--)(R=b[P])&&(T=(D<3?R(T):D>3?R(x,h,T):R(x,h))||T);return D>3&&T&&Object.defineProperty(x,h,T),T},_=this&&this.__param||function(b,x){return function(h,y){x(h,y,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.STRIKETHROUGH_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;const f=n(2223),p=n(643),S=n(511),m=n(2585),u=n(8055),t=n(4725),o=n(4269),c=n(6171),r=n(3734);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.STRIKETHROUGH_CLASS="xterm-strikethrough",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let a=class{constructor(b,x,h,y,R,D,T){this._document=b,this._characterJoinerService=x,this._optionsService=h,this._coreBrowserService=y,this._coreService=R,this._decorationService=D,this._themeService=T,this._workCell=new S.CellData,this._columnSelectMode=!1}handleSelectionChanged(b,x,h){this._selectionStart=b,this._selectionEnd=x,this._columnSelectMode=h}createRow(b,x,h,y,R,D,T,P,j){const J=this._document.createDocumentFragment(),z=this._characterJoinerService.getJoinedCharacters(x);let E=0;for(let q=Math.min(b.length,P)-1;q>=0;q--)if(b.loadCell(q,this._workCell).getCode()!==p.NULL_CELL_CODE||h&&q===R){E=q+1;break}const k=this._themeService.colors;let O=-1,H=0;for(;H<E;H++){b.loadCell(H,this._workCell);let q=this._workCell.getWidth();if(q===0){j[H]=O;continue}let Z=!1,ne=H,Y=this._workCell;if(z.length>0&&H===z[0][0]){Z=!0;const N=z.shift();Y=new o.JoinedCellData(this._workCell,b.translateToString(!0,N[0],N[1]),N[1]-N[0]),ne=N[1]-1,q=Y.getWidth()}const ie=this._document.createElement("span");if(q>1&&(ie.style.width=T*q+"px"),Z&&(ie.style.display="inline",R>=H&&R<=ne&&(R=H)),!this._coreService.isCursorHidden&&h&&H===R)switch(ie.classList.add(i.CURSOR_CLASS),D&&ie.classList.add(i.CURSOR_BLINK_CLASS),y){case"bar":ie.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":ie.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ie.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}if(Y.isBold()&&ie.classList.add(i.BOLD_CLASS),Y.isItalic()&&ie.classList.add(i.ITALIC_CLASS),Y.isDim()&&ie.classList.add(i.DIM_CLASS),Y.isInvisible()?ie.textContent=p.WHITESPACE_CELL_CHAR:ie.textContent=Y.getChars()||p.WHITESPACE_CELL_CHAR,Y.isUnderline()&&(ie.classList.add(`${i.UNDERLINE_CLASS}-${Y.extended.underlineStyle}`),ie.textContent===" "&&(ie.textContent=""),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())ie.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let N=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&N<8&&(N+=8),ie.style.textDecorationColor=k.ansi[N].css}Y.isStrikethrough()&&ie.classList.add(i.STRIKETHROUGH_CLASS);let I=Y.getFgColor(),B=Y.getFgColorMode(),F=Y.getBgColor(),$=Y.getBgColorMode();const G=!!Y.isInverse();if(G){const N=I;I=F,F=N;const V=B;B=$,$=V}let fe,A,M=!1;this._decorationService.forEachDecorationAtCell(H,x,void 0,N=>{N.options.layer!=="top"&&M||(N.backgroundColorRGB&&($=50331648,F=N.backgroundColorRGB.rgba>>8&16777215,fe=N.backgroundColorRGB),N.foregroundColorRGB&&(B=50331648,I=N.foregroundColorRGB.rgba>>8&16777215,A=N.foregroundColorRGB),M=N.options.layer==="top")});const U=this._isCellInSelection(H,x);let W;switch(M||k.selectionForeground&&U&&(B=50331648,I=k.selectionForeground.rgba>>8&16777215,A=k.selectionForeground),U&&(fe=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,M=!0),M&&ie.classList.add("xterm-decoration-top"),$){case 16777216:case 33554432:W=k.ansi[F],ie.classList.add(`xterm-bg-${F}`);break;case 50331648:W=u.rgba.toColor(F>>16,F>>8&255,255&F),this._addStyle(ie,`background-color:#${g((F>>>0).toString(16),"0",6)}`);break;default:G?(W=k.foreground,ie.classList.add(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):W=k.background}switch(fe||Y.isDim()&&(fe=u.color.multiplyOpacity(W,.5)),B){case 16777216:case 33554432:Y.isBold()&&I<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(I+=8),this._applyMinimumContrast(ie,W,k.ansi[I],Y,fe,void 0)||ie.classList.add(`xterm-fg-${I}`);break;case 50331648:const N=u.rgba.toColor(I>>16&255,I>>8&255,255&I);this._applyMinimumContrast(ie,W,N,Y,fe,A)||this._addStyle(ie,`color:#${g(I.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(ie,W,k.foreground,Y,fe,void 0)||G&&ie.classList.add(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}J.appendChild(ie),j[H]=++O,H=ne}return H<P-1&&j.subarray(H).fill(++O),J}_applyMinimumContrast(b,x,h,y,R,D){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(y.getCode()))return!1;let T;return R||D||(T=this._themeService.colors.contrastCache.getColor(x.rgba,h.rgba)),T===void 0&&(T=u.color.ensureContrastRatio(R||x,D||h,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((R||x).rgba,(D||h).rgba,T??null)),!!T&&(this._addStyle(b,`color:${T.css}`),!0)}_addStyle(b,x){b.setAttribute("style",`${b.getAttribute("style")||""}${x};`)}_isCellInSelection(b,x){const h=this._selectionStart,y=this._selectionEnd;return!(!h||!y)&&(this._columnSelectMode?h[0]<=y[0]?b>=h[0]&&x>=h[1]&&b<y[0]&&x<=y[1]:b<h[0]&&x>=h[1]&&b>=y[0]&&x<=y[1]:x>h[1]&&x<y[1]||h[1]===y[1]&&x===h[1]&&b>=h[0]&&b<y[0]||h[1]<y[1]&&x===y[1]&&b<y[0]||h[1]<y[1]&&x===h[1]&&b>=h[0])}};function g(b,x,h){for(;b.length<h;)b=x+b;return b}a=l([_(1,t.ICharacterJoinerService),_(2,m.IOptionsService),_(3,t.ICoreBrowserService),_(4,m.ICoreService),_(5,m.IDecorationService),_(6,t.IThemeService)],a),i.DomRendererRowFactory=a},2223:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const l=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(L,i)=>{function n(l){return 57508<=l&&l<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},i.excludeFromContrastRatioDemands=function(l){return n(l)||function(_){return 9472<=_&&_<=9631}(l)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,l=this.selectionEnd;return!(!n||!l)&&(n[1]>l[1]||n[1]===l[1]&&n[0]>l[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(L,i,n){var l=this&&this.__decorate||function(t,o,c,r){var a,g=arguments.length,b=g<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,o,c,r);else for(var x=t.length-1;x>=0;x--)(a=t[x])&&(b=(g<3?a(b):g>3?a(o,c,b):a(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},_=this&&this.__param||function(t,o){return function(c,r){o(c,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const f=n(2585),p=n(8460),S=n(844);let m=class extends S.Disposable{constructor(t,o,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new u(t,o,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};m=l([_(2,f.IOptionsService)],m),i.CharSizeService=m;class u{constructor(o,c,r){this._document=o,this._parentElement=c,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const o=this._measureElement.getBoundingClientRect();return o.width!==0&&o.height!==0&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result}}},4269:function(L,i,n){var l=this&&this.__decorate||function(o,c,r,a){var g,b=arguments.length,x=b<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,r):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(o,c,r,a);else for(var h=o.length-1;h>=0;h--)(g=o[h])&&(x=(b<3?g(x):b>3?g(c,r,x):g(c,r))||x);return b>3&&x&&Object.defineProperty(c,r,x),x},_=this&&this.__param||function(o,c){return function(r,a){c(r,a,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const f=n(3734),p=n(643),S=n(511),m=n(2585);class u extends f.AttributeData{constructor(c,r,a){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=r,this._width=a}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let t=class Rr{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(c){const r={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(r),r.id}deregister(c){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===c)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(c);if(!r||r.length===0)return[];const a=[],g=r.translateToString(!0);let b=0,x=0,h=0,y=r.getFg(0),R=r.getBg(0);for(let D=0;D<r.getTrimmedLength();D++)if(r.loadCell(D,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==R){if(D-b>1){const T=this._getJoinedRanges(g,h,x,r,b);for(let P=0;P<T.length;P++)a.push(T[P])}b=D,h=x,y=this._workCell.fg,R=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const D=this._getJoinedRanges(g,h,x,r,b);for(let T=0;T<D.length;T++)a.push(D[T])}return a}_getJoinedRanges(c,r,a,g,b){const x=c.substring(r,a);let h=[];try{h=this._characterJoiners[0].handler(x)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const R=this._characterJoiners[y].handler(x);for(let D=0;D<R.length;D++)Rr._mergeRanges(h,R[D])}catch(R){console.error(R)}return this._stringRangesToCellRanges(h,g,b),h}_stringRangesToCellRanges(c,r,a){let g=0,b=!1,x=0,h=c[g];if(h){for(let y=a;y<this._bufferService.cols;y++){const R=r.getWidth(y),D=r.getString(y).length||p.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!b&&h[0]<=x&&(h[0]=y,b=!0),h[1]<=x){if(h[1]=y,h=c[++g],!h)break;h[0]<=x?(h[0]=y,b=!0):b=!1}x+=D}}h&&(h[1]=this._bufferService.cols)}}static _mergeRanges(c,r){let a=!1;for(let g=0;g<c.length;g++){const b=c[g];if(a){if(r[1]<=b[0])return c[g-1][1]=r[1],c;if(r[1]<=b[1])return c[g-1][1]=Math.max(r[1],b[1]),c.splice(g,1),c;c.splice(g,1),g--}else{if(r[1]<=b[0])return c.splice(g,0,r),c;if(r[1]<=b[1])return b[0]=Math.min(r[0],b[0]),c;r[0]<b[1]&&(b[0]=Math.min(r[0],b[0]),a=!0)}}return a?c[c.length-1][1]=r[1]:c.push(r),c}};t=l([_(0,m.IBufferService)],t),i.CharacterJoinerService=t},5114:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(n,l){this._textarea=n,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(L,i,n){var l=this&&this.__decorate||function(m,u,t,o){var c,r=arguments.length,a=r<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,t):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(m,u,t,o);else for(var g=m.length-1;g>=0;g--)(c=m[g])&&(a=(r<3?c(a):r>3?c(u,t,a):c(u,t))||a);return r>3&&a&&Object.defineProperty(u,t,a),a},_=this&&this.__param||function(m,u){return function(t,o){u(t,o,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const f=n(4725),p=n(9806);let S=class{constructor(m,u){this._renderService=m,this._charSizeService=u}getCoords(m,u,t,o,c){return(0,p.getCoords)(window,m,u,t,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(m,u){const t=(0,p.getCoordsRelativeToElement)(window,m,u);if(!(!this._charSizeService.hasValidSize||t[0]<0||t[1]<0||t[0]>=this._renderService.dimensions.css.canvas.width||t[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};S=l([_(0,f.IRenderService),_(1,f.ICharSizeService)],S),i.MouseService=S},3230:function(L,i,n){var l=this&&this.__decorate||function(a,g,b,x){var h,y=arguments.length,R=y<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,g,b,x);else for(var D=a.length-1;D>=0;D--)(h=a[D])&&(R=(y<3?h(R):y>3?h(g,b,R):h(g,b))||R);return y>3&&R&&Object.defineProperty(g,b,R),R},_=this&&this.__param||function(a,g){return function(b,x){g(b,x,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const f=n(6193),p=n(8460),S=n(844),m=n(5596),u=n(3656),t=n(2585),o=n(4725),c=n(7226);let r=class extends S.Disposable{constructor(a,g,b,x,h,y,R,D){if(super(),this._rowCount=a,this._charSizeService=x,this._pausedResizeTask=new c.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.dispose()}}),this._renderDebouncer=new f.RenderDebouncer(R.window,(T,P)=>this._renderRows(T,P)),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(R.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(h.onDecorationRegistered(()=>this._fullRefresh())),this.register(h.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(R.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(D.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in R.window){const T=new R.window.IntersectionObserver(P=>this._handleIntersectionChange(P[P.length-1]),{threshold:0});T.observe(g),this.register({dispose:()=>T.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(a,g,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,g,this._rowCount))}_renderRows(a,g){this._renderer&&(this._renderer.renderRows(a,g),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:a,end:g}),this._onRender.fire({start:a,end:g}),this._isNextRenderRedrawOnly=!0)}resize(a,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(a){var g;(g=this._renderer)===null||g===void 0||g.dispose(),this._renderer=a,this._renderer.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(a){return this._renderDebouncer.addRefreshCallback(a)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var a,g;this._renderer&&((g=(a=this._renderer).clearTextureAtlas)===null||g===void 0||g.call(a),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(a,g){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(a,g)):this._renderer.handleResize(a,g),this._fullRefresh())}handleCharSizeChanged(){var a;(a=this._renderer)===null||a===void 0||a.handleCharSizeChanged()}handleBlur(){var a;(a=this._renderer)===null||a===void 0||a.handleBlur()}handleFocus(){var a;(a=this._renderer)===null||a===void 0||a.handleFocus()}handleSelectionChanged(a,g,b){var x;this._selectionState.start=a,this._selectionState.end=g,this._selectionState.columnSelectMode=b,(x=this._renderer)===null||x===void 0||x.handleSelectionChanged(a,g,b)}handleCursorMove(){var a;(a=this._renderer)===null||a===void 0||a.handleCursorMove()}clear(){var a;(a=this._renderer)===null||a===void 0||a.clear()}};r=l([_(2,t.IOptionsService),_(3,o.ICharSizeService),_(4,t.IDecorationService),_(5,t.IBufferService),_(6,o.ICoreBrowserService),_(7,o.IThemeService)],r),i.RenderService=r},9312:function(L,i,n){var l=this&&this.__decorate||function(h,y,R,D){var T,P=arguments.length,j=P<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,R):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(h,y,R,D);else for(var J=h.length-1;J>=0;J--)(T=h[J])&&(j=(P<3?T(j):P>3?T(y,R,j):T(y,R))||j);return P>3&&j&&Object.defineProperty(y,R,j),j},_=this&&this.__param||function(h,y){return function(R,D){y(R,D,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const f=n(6114),p=n(456),S=n(511),m=n(8460),u=n(4725),t=n(2585),o=n(9806),c=n(9504),r=n(844),a=n(4841),g=String.fromCharCode(160),b=new RegExp(g,"g");let x=class extends r.Disposable{constructor(h,y,R,D,T,P,j,J,z){super(),this._element=h,this._screenElement=y,this._linkifier=R,this._bufferService=D,this._coreService=T,this._mouseService=P,this._optionsService=j,this._renderService=J,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new S.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=E=>this._handleMouseMove(E),this._mouseUpListener=E=>this._handleMouseUp(E),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(E=>this._handleTrim(E)),this.register(this._bufferService.buffers.onBufferActivate(E=>this._handleBufferActivate(E))),this.enable(),this._model=new p.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const h=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!h||!y||h[0]===y[0]&&h[1]===y[1])}get selectionText(){const h=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!h||!y)return"";const R=this._bufferService.buffer,D=[];if(this._activeSelectionMode===3){if(h[0]===y[0])return"";const T=h[0]<y[0]?h[0]:y[0],P=h[0]<y[0]?y[0]:h[0];for(let j=h[1];j<=y[1];j++){const J=R.translateBufferLineToString(j,!0,T,P);D.push(J)}}else{const T=h[1]===y[1]?y[0]:void 0;D.push(R.translateBufferLineToString(h[1],!0,h[0],T));for(let P=h[1]+1;P<=y[1]-1;P++){const j=R.lines.get(P),J=R.translateBufferLineToString(P,!0);j!=null&&j.isWrapped?D[D.length-1]+=J:D.push(J)}if(h[1]!==y[1]){const P=R.lines.get(y[1]),j=R.translateBufferLineToString(y[1],!0,0,y[0]);P&&P.isWrapped?D[D.length-1]+=j:D.push(j)}}return D.map(T=>T.replace(b," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(h){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&h&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(h){const y=this._getMouseBufferCoords(h),R=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!!(R&&D&&y)&&this._areCoordsInSelection(y,R,D)}isCellInSelection(h,y){const R=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!R||!D)&&this._areCoordsInSelection([h,y],R,D)}_areCoordsInSelection(h,y,R){return h[1]>y[1]&&h[1]<R[1]||y[1]===R[1]&&h[1]===y[1]&&h[0]>=y[0]&&h[0]<R[0]||y[1]<R[1]&&h[1]===R[1]&&h[0]<R[0]||y[1]<R[1]&&h[1]===y[1]&&h[0]>=y[0]}_selectWordAtCursor(h,y){var R,D;const T=(D=(R=this._linkifier.currentLink)===null||R===void 0?void 0:R.link)===null||D===void 0?void 0:D.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const P=this._getMouseBufferCoords(h);return!!P&&(this._selectWordAt(P,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(h,y){this._model.clearSelection(),h=Math.max(h,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,h],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(h){this._model.handleTrim(h)&&this.refresh()}_getMouseBufferCoords(h){const y=this._mouseService.getCoords(h,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(h){let y=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,h,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=R?0:(y>R&&(y-=R),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(h){return f.isMac?h.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:h.shiftKey}handleMouseDown(h){if(this._mouseDownTimeStamp=h.timeStamp,(h.button!==2||!this.hasSelection)&&h.button===0){if(!this._enabled){if(!this.shouldForceSelection(h))return;h.stopPropagation()}h.preventDefault(),this._dragScrollAmount=0,this._enabled&&h.shiftKey?this._handleIncrementalClick(h):h.detail===1?this._handleSingleClick(h):h.detail===2?this._handleDoubleClick(h):h.detail===3&&this._handleTripleClick(h),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(h){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(h))}_handleSingleClick(h){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(h)?3:0,this._model.selectionStart=this._getMouseBufferCoords(h),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(h){this._selectWordAtCursor(h,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(h){const y=this._getMouseBufferCoords(h);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(h){return h.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(h){if(h.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(h),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(h),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const D=R.lines.get(this._model.selectionEnd[1]);D&&D.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const h=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(h.ydisp+this._bufferService.rows,h.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=h.ydisp),this.refresh()}}_handleMouseUp(h){const y=h.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&h.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(h,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const D=(0,c.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(D,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const h=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,R=!(!h||!y||h[0]===y[0]&&h[1]===y[1]);R?h&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&h[0]===this._oldSelectionStart[0]&&h[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(h,y,R)):this._oldHasSelection&&this._fireOnSelectionChange(h,y,R)}_fireOnSelectionChange(h,y,R){this._oldSelectionStart=h,this._oldSelectionEnd=y,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(h){this.clearSelection(),this._trimListener.dispose(),this._trimListener=h.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(h,y){let R=y;for(let D=0;y>=D;D++){const T=h.loadCell(D,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:T>1&&y!==D&&(R+=T-1)}return R}setSelection(h,y,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[h,y],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(h){this._isClickInSelection(h)||(this._selectWordAtCursor(h,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(h,y,R=!0,D=!0){if(h[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,P=T.lines.get(h[1]);if(!P)return;const j=T.translateBufferLineToString(h[1],!1);let J=this._convertViewportColToCharacterIndex(P,h[0]),z=J;const E=h[0]-J;let k=0,O=0,H=0,q=0;if(j.charAt(J)===" "){for(;J>0&&j.charAt(J-1)===" ";)J--;for(;z<j.length&&j.charAt(z+1)===" ";)z++}else{let Y=h[0],ie=h[0];P.getWidth(Y)===0&&(k++,Y--),P.getWidth(ie)===2&&(O++,ie++);const I=P.getString(ie).length;for(I>1&&(q+=I-1,z+=I-1);Y>0&&J>0&&!this._isCharWordSeparator(P.loadCell(Y-1,this._workCell));){P.loadCell(Y-1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===0?(k++,Y--):B>1&&(H+=B-1,J-=B-1),J--,Y--}for(;ie<P.length&&z+1<j.length&&!this._isCharWordSeparator(P.loadCell(ie+1,this._workCell));){P.loadCell(ie+1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===2?(O++,ie++):B>1&&(q+=B-1,z+=B-1),z++,ie++}}z++;let Z=J+E-k+H,ne=Math.min(this._bufferService.cols,z-J+k+O-H-q);if(y||j.slice(J,z).trim()!==""){if(R&&Z===0&&P.getCodePoint(0)!==32){const Y=T.lines.get(h[1]-1);if(Y&&P.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const ie=this._getWordAt([this._bufferService.cols-1,h[1]-1],!1,!0,!1);if(ie){const I=this._bufferService.cols-ie.start;Z-=I,ne+=I}}}if(D&&Z+ne===this._bufferService.cols&&P.getCodePoint(this._bufferService.cols-1)!==32){const Y=T.lines.get(h[1]+1);if(Y!=null&&Y.isWrapped&&Y.getCodePoint(0)!==32){const ie=this._getWordAt([0,h[1]+1],!1,!1,!0);ie&&(ne+=ie.length)}}return{start:Z,length:ne}}}_selectWordAt(h,y){const R=this._getWordAt(h,y);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,h[1]--;this._model.selectionStart=[R.start,h[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(h){const y=this._getWordAt(h,!0);if(y){let R=h[1];for(;y.start<0;)y.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,R]}}_isCharWordSeparator(h){return h.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(h.getChars())>=0}_selectLineAt(h){const y=this._bufferService.buffer.getWrappedRangeForLine(h),R={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(R,this._bufferService.cols)}};x=l([_(3,t.IBufferService),_(4,t.ICoreService),_(5,u.IMouseService),_(6,t.IOptionsService),_(7,u.IRenderService),_(8,u.ICoreBrowserService)],x),i.SelectionService=x},4725:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const l=n(8343);i.ICharSizeService=(0,l.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),i.IMouseService=(0,l.createDecorator)("MouseService"),i.IRenderService=(0,l.createDecorator)("RenderService"),i.ISelectionService=(0,l.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(L,i,n){var l=this&&this.__decorate||function(x,h,y,R){var D,T=arguments.length,P=T<3?h:R===null?R=Object.getOwnPropertyDescriptor(h,y):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,h,y,R);else for(var j=x.length-1;j>=0;j--)(D=x[j])&&(P=(T<3?D(P):T>3?D(h,y,P):D(h,y))||P);return T>3&&P&&Object.defineProperty(h,y,P),P},_=this&&this.__param||function(x,h){return function(y,R){h(y,R,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const f=n(7239),p=n(8055),S=n(8460),m=n(844),u=n(2585),t=p.css.toColor("#ffffff"),o=p.css.toColor("#000000"),c=p.css.toColor("#ffffff"),r=p.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],h=[0,95,135,175,215,255];for(let y=0;y<216;y++){const R=h[y/36%6|0],D=h[y/6%6|0],T=h[y%6];x.push({css:p.channels.toCss(R,D,T),rgba:p.channels.toRgba(R,D,T)})}for(let y=0;y<24;y++){const R=8+10*y;x.push({css:p.channels.toCss(R,R,R),rgba:p.channels.toRgba(R,R,R)})}return x})());let g=class extends m.Disposable{constructor(x){super(),this._optionsService=x,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new f.ColorContrastCache,this._colors={foreground:t,background:o,cursor:c,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:a,selectionBackgroundOpaque:p.color.blend(o,a),selectionInactiveBackgroundTransparent:a,selectionInactiveBackgroundOpaque:p.color.blend(o,a),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(x={}){const h=this._colors;if(h.foreground=b(x.foreground,t),h.background=b(x.background,o),h.cursor=b(x.cursor,c),h.cursorAccent=b(x.cursorAccent,r),h.selectionBackgroundTransparent=b(x.selectionBackground,a),h.selectionBackgroundOpaque=p.color.blend(h.background,h.selectionBackgroundTransparent),h.selectionInactiveBackgroundTransparent=b(x.selectionInactiveBackground,h.selectionBackgroundTransparent),h.selectionInactiveBackgroundOpaque=p.color.blend(h.background,h.selectionInactiveBackgroundTransparent),h.selectionForeground=x.selectionForeground?b(x.selectionForeground,p.NULL_COLOR):void 0,h.selectionForeground===p.NULL_COLOR&&(h.selectionForeground=void 0),p.color.isOpaque(h.selectionBackgroundTransparent)&&(h.selectionBackgroundTransparent=p.color.opacity(h.selectionBackgroundTransparent,.3)),p.color.isOpaque(h.selectionInactiveBackgroundTransparent)&&(h.selectionInactiveBackgroundTransparent=p.color.opacity(h.selectionInactiveBackgroundTransparent,.3)),h.ansi=i.DEFAULT_ANSI_COLORS.slice(),h.ansi[0]=b(x.black,i.DEFAULT_ANSI_COLORS[0]),h.ansi[1]=b(x.red,i.DEFAULT_ANSI_COLORS[1]),h.ansi[2]=b(x.green,i.DEFAULT_ANSI_COLORS[2]),h.ansi[3]=b(x.yellow,i.DEFAULT_ANSI_COLORS[3]),h.ansi[4]=b(x.blue,i.DEFAULT_ANSI_COLORS[4]),h.ansi[5]=b(x.magenta,i.DEFAULT_ANSI_COLORS[5]),h.ansi[6]=b(x.cyan,i.DEFAULT_ANSI_COLORS[6]),h.ansi[7]=b(x.white,i.DEFAULT_ANSI_COLORS[7]),h.ansi[8]=b(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),h.ansi[9]=b(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),h.ansi[10]=b(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),h.ansi[11]=b(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),h.ansi[12]=b(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),h.ansi[13]=b(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),h.ansi[14]=b(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),h.ansi[15]=b(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const y=Math.min(h.ansi.length-16,x.extendedAnsi.length);for(let R=0;R<y;R++)h.ansi[R+16]=b(x.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let h=0;h<this._restoreColors.ansi.length;++h)this._colors.ansi[h]=this._restoreColors.ansi[h]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(x,h){if(x!==void 0)try{return p.css.toColor(x)}catch{}return h}g=l([_(0,u.IOptionsService)],g),i.ThemeService=g},6349:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const l=n(8460),_=n(844);class f extends _.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const m=new Array(S);for(let u=0;u<Math.min(S,this.length);u++)m[u]=this._array[this._getCyclicIndex(u)];this._array=m,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let m=this._length;m<S;m++)this._array[m]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,m){this._array[this._getCyclicIndex(S)]=m}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,m,...u){if(m){for(let t=S;t<this._length-m;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+m)];this._length-=m,this.onDeleteEmitter.fire({index:S,amount:m})}for(let t=this._length-1;t>=S;t--)this._array[this._getCyclicIndex(t+u.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<u.length;t++)this._array[this._getCyclicIndex(S+t)]=u[t];if(u.length&&this.onInsertEmitter.fire({index:S,amount:u.length}),this._length+u.length>this._maxLength){const t=this._length+u.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=u.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,m,u){if(!(m<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let o=m-1;o>=0;o--)this.set(S+o+u,this.get(S+o));const t=S+m+u-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<m;t++)this.set(S+t+u,this.get(S+t))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=f},1439:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(l,_=5){if(typeof l!="object")return l;const f=Array.isArray(l)?[]:{};for(const p in l)f[p]=_<=1?l[p]:l[p]&&n(l[p],_-1);return f}},8055:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const l=n(6114);let _=0,f=0,p=0,S=0;var m,u,t;function o(r){const a=r.toString(16);return a.length<2?"0"+a:a}function c(r,a){return r<a?(a+.05)/(r+.05):(r+.05)/(a+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(a,g,b,x){return x!==void 0?`#${o(a)}${o(g)}${o(b)}${o(x)}`:`#${o(a)}${o(g)}${o(b)}`},r.toRgba=function(a,g,b,x=255){return(a<<24|g<<16|b<<8|x)>>>0}}(m=i.channels||(i.channels={})),function(r){function a(g,b){return S=Math.round(255*b),[_,f,p]=t.toChannels(g.rgba),{css:m.toCss(_,f,p,S),rgba:m.toRgba(_,f,p,S)}}r.blend=function(g,b){if(S=(255&b.rgba)/255,S===1)return{css:b.css,rgba:b.rgba};const x=b.rgba>>24&255,h=b.rgba>>16&255,y=b.rgba>>8&255,R=g.rgba>>24&255,D=g.rgba>>16&255,T=g.rgba>>8&255;return _=R+Math.round((x-R)*S),f=D+Math.round((h-D)*S),p=T+Math.round((y-T)*S),{css:m.toCss(_,f,p),rgba:m.toRgba(_,f,p)}},r.isOpaque=function(g){return(255&g.rgba)==255},r.ensureContrastRatio=function(g,b,x){const h=t.ensureContrastRatio(g.rgba,b.rgba,x);if(h)return t.toColor(h>>24&255,h>>16&255,h>>8&255)},r.opaque=function(g){const b=(255|g.rgba)>>>0;return[_,f,p]=t.toChannels(b),{css:m.toCss(_,f,p),rgba:b}},r.opacity=a,r.multiplyOpacity=function(g,b){return S=255&g.rgba,a(g,S*b/255)},r.toColorRGB=function(g){return[g.rgba>>24&255,g.rgba>>16&255,g.rgba>>8&255]}}(i.color||(i.color={})),function(r){let a,g;if(!l.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const x=b.getContext("2d",{willReadFrequently:!0});x&&(a=x,a.globalCompositeOperation="copy",g=a.createLinearGradient(0,0,1,1))}r.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return _=parseInt(b.slice(1,2).repeat(2),16),f=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),t.toColor(_,f,p);case 5:return _=parseInt(b.slice(1,2).repeat(2),16),f=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),S=parseInt(b.slice(4,5).repeat(2),16),t.toColor(_,f,p,S);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const x=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return _=parseInt(x[1]),f=parseInt(x[2]),p=parseInt(x[3]),S=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),t.toColor(_,f,p,S);if(!a||!g)throw new Error("css.toColor: Unsupported css format");if(a.fillStyle=g,a.fillStyle=b,typeof a.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(a.fillRect(0,0,1,1),[_,f,p,S]=a.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(_,f,p,S),css:b}}}(i.css||(i.css={})),function(r){function a(g,b,x){const h=g/255,y=b/255,R=x/255;return .2126*(h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}r.relativeLuminance=function(g){return a(g>>16&255,g>>8&255,255&g)},r.relativeLuminance2=a}(u=i.rgb||(i.rgb={})),function(r){function a(b,x,h){const y=b>>24&255,R=b>>16&255,D=b>>8&255;let T=x>>24&255,P=x>>16&255,j=x>>8&255,J=c(u.relativeLuminance2(T,P,j),u.relativeLuminance2(y,R,D));for(;J<h&&(T>0||P>0||j>0);)T-=Math.max(0,Math.ceil(.1*T)),P-=Math.max(0,Math.ceil(.1*P)),j-=Math.max(0,Math.ceil(.1*j)),J=c(u.relativeLuminance2(T,P,j),u.relativeLuminance2(y,R,D));return(T<<24|P<<16|j<<8|255)>>>0}function g(b,x,h){const y=b>>24&255,R=b>>16&255,D=b>>8&255;let T=x>>24&255,P=x>>16&255,j=x>>8&255,J=c(u.relativeLuminance2(T,P,j),u.relativeLuminance2(y,R,D));for(;J<h&&(T<255||P<255||j<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),P=Math.min(255,P+Math.ceil(.1*(255-P))),j=Math.min(255,j+Math.ceil(.1*(255-j))),J=c(u.relativeLuminance2(T,P,j),u.relativeLuminance2(y,R,D));return(T<<24|P<<16|j<<8|255)>>>0}r.ensureContrastRatio=function(b,x,h){const y=u.relativeLuminance(b>>8),R=u.relativeLuminance(x>>8);if(c(y,R)<h){if(R<y){const P=a(b,x,h),j=c(y,u.relativeLuminance(P>>8));if(j<h){const J=g(b,x,h);return j>c(y,u.relativeLuminance(J>>8))?P:J}return P}const D=g(b,x,h),T=c(y,u.relativeLuminance(D>>8));if(T<h){const P=a(b,x,h);return T>c(y,u.relativeLuminance(P>>8))?D:P}return D}},r.reduceLuminance=a,r.increaseLuminance=g,r.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},r.toColor=function(b,x,h,y){return{css:m.toCss(b,x,h,y),rgba:m.toRgba(b,x,h,y)}}}(t=i.rgba||(i.rgba={})),i.toPaddedHex=o,i.contrastRatio=c},8969:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const l=n(844),_=n(2585),f=n(4348),p=n(7866),S=n(744),m=n(7302),u=n(6975),t=n(8460),o=n(1753),c=n(1480),r=n(7994),a=n(9282),g=n(5435),b=n(5981),x=n(2660);let h=!1;class y extends l.Disposable{constructor(D){super(),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new m.OptionsService(D)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",T=>this._handleWindowsModeOptionChange(T))),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((T,P)=>this._inputHandler.parse(T,P))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,l.toDisposable)(()=>{var T;(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(D=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(D.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(D){for(const T in D)this.optionsService.options[T]=D[T]}write(D,T){this._writeBuffer.write(D,T)}writeSync(D,T){this._logService.logLevel<=_.LogLevelEnum.WARN&&!h&&(this._logService.warn("writeSync is unreliable and will be removed soon."),h=!0),this._writeBuffer.writeSync(D,T)}resize(D,T){isNaN(D)||isNaN(T)||(D=Math.max(D,S.MINIMUM_COLS),T=Math.max(T,S.MINIMUM_ROWS),this._bufferService.resize(D,T))}scroll(D,T=!1){this._bufferService.scroll(D,T)}scrollLines(D,T,P){this._bufferService.scrollLines(D,T,P)}scrollPages(D){this._bufferService.scrollPages(D)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(D){this._bufferService.scrollToLine(D)}registerEscHandler(D,T){return this._inputHandler.registerEscHandler(D,T)}registerDcsHandler(D,T){return this._inputHandler.registerDcsHandler(D,T)}registerCsiHandler(D,T){return this._inputHandler.registerCsiHandler(D,T)}registerOscHandler(D,T){return this._inputHandler.registerOscHandler(D,T)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(D){var T;D?this._enableWindowsMode():((T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){const D=[];D.push(this.onLineFeed(a.updateWindowsModeWrappedState.bind(null,this._bufferService))),D.push(this.registerCsiHandler({final:"H"},()=>((0,a.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(const T of D)T.dispose()}}}}}i.CoreTerminal=y},8460:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===n)return void this._listeners.splice(l,1)}}})),this._event}fire(n,l){const _=[];for(let f=0;f<this._listeners.length;f++)_.push(this._listeners[f]);for(let f=0;f<_.length;f++)_[f].call(void 0,n,l)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},i.forwardEvent=function(n,l){return n(_=>l.fire(_))}},5435:function(L,i,n){var l=this&&this.__decorate||function(z,E,k,O){var H,q=arguments.length,Z=q<3?E:O===null?O=Object.getOwnPropertyDescriptor(E,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(z,E,k,O);else for(var ne=z.length-1;ne>=0;ne--)(H=z[ne])&&(Z=(q<3?H(Z):q>3?H(E,k,Z):H(E,k))||Z);return q>3&&Z&&Object.defineProperty(E,k,Z),Z},_=this&&this.__param||function(z,E){return function(k,O){E(k,O,z)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const f=n(2584),p=n(7116),S=n(2015),m=n(844),u=n(482),t=n(8437),o=n(8460),c=n(643),r=n(511),a=n(3734),g=n(2585),b=n(6242),x=n(6351),h=n(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function D(z,E){if(z>24)return E.setWinLines||!1;switch(z){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var T;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));let P=0;class j extends m.Disposable{constructor(E,k,O,H,q,Z,ne,Y,ie=new S.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=k,this._coreService=O,this._logService=H,this._optionsService=q,this._oscLinkService=Z,this._coreMouseService=ne,this._unicodeService=Y,this._parser=ie,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._parser.setCsiHandlerFallback((I,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(I),params:B.toArray()})}),this._parser.setEscHandlerFallback(I=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(I)})}),this._parser.setExecuteHandlerFallback(I=>{this._logService.debug("Unknown EXECUTE code: ",{code:I})}),this._parser.setOscHandlerFallback((I,B,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:I,action:B,data:F})}),this._parser.setDcsHandlerFallback((I,B,F)=>{B==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(I),action:B,payload:F})}),this._parser.setPrintHandler((I,B,F)=>this.print(I,B,F)),this._parser.registerCsiHandler({final:"@"},I=>this.insertChars(I)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},I=>this.scrollLeft(I)),this._parser.registerCsiHandler({final:"A"},I=>this.cursorUp(I)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},I=>this.scrollRight(I)),this._parser.registerCsiHandler({final:"B"},I=>this.cursorDown(I)),this._parser.registerCsiHandler({final:"C"},I=>this.cursorForward(I)),this._parser.registerCsiHandler({final:"D"},I=>this.cursorBackward(I)),this._parser.registerCsiHandler({final:"E"},I=>this.cursorNextLine(I)),this._parser.registerCsiHandler({final:"F"},I=>this.cursorPrecedingLine(I)),this._parser.registerCsiHandler({final:"G"},I=>this.cursorCharAbsolute(I)),this._parser.registerCsiHandler({final:"H"},I=>this.cursorPosition(I)),this._parser.registerCsiHandler({final:"I"},I=>this.cursorForwardTab(I)),this._parser.registerCsiHandler({final:"J"},I=>this.eraseInDisplay(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},I=>this.eraseInDisplay(I,!0)),this._parser.registerCsiHandler({final:"K"},I=>this.eraseInLine(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},I=>this.eraseInLine(I,!0)),this._parser.registerCsiHandler({final:"L"},I=>this.insertLines(I)),this._parser.registerCsiHandler({final:"M"},I=>this.deleteLines(I)),this._parser.registerCsiHandler({final:"P"},I=>this.deleteChars(I)),this._parser.registerCsiHandler({final:"S"},I=>this.scrollUp(I)),this._parser.registerCsiHandler({final:"T"},I=>this.scrollDown(I)),this._parser.registerCsiHandler({final:"X"},I=>this.eraseChars(I)),this._parser.registerCsiHandler({final:"Z"},I=>this.cursorBackwardTab(I)),this._parser.registerCsiHandler({final:"`"},I=>this.charPosAbsolute(I)),this._parser.registerCsiHandler({final:"a"},I=>this.hPositionRelative(I)),this._parser.registerCsiHandler({final:"b"},I=>this.repeatPrecedingCharacter(I)),this._parser.registerCsiHandler({final:"c"},I=>this.sendDeviceAttributesPrimary(I)),this._parser.registerCsiHandler({prefix:">",final:"c"},I=>this.sendDeviceAttributesSecondary(I)),this._parser.registerCsiHandler({final:"d"},I=>this.linePosAbsolute(I)),this._parser.registerCsiHandler({final:"e"},I=>this.vPositionRelative(I)),this._parser.registerCsiHandler({final:"f"},I=>this.hVPosition(I)),this._parser.registerCsiHandler({final:"g"},I=>this.tabClear(I)),this._parser.registerCsiHandler({final:"h"},I=>this.setMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"h"},I=>this.setModePrivate(I)),this._parser.registerCsiHandler({final:"l"},I=>this.resetMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"l"},I=>this.resetModePrivate(I)),this._parser.registerCsiHandler({final:"m"},I=>this.charAttributes(I)),this._parser.registerCsiHandler({final:"n"},I=>this.deviceStatus(I)),this._parser.registerCsiHandler({prefix:"?",final:"n"},I=>this.deviceStatusPrivate(I)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},I=>this.softReset(I)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},I=>this.setCursorStyle(I)),this._parser.registerCsiHandler({final:"r"},I=>this.setScrollRegion(I)),this._parser.registerCsiHandler({final:"s"},I=>this.saveCursor(I)),this._parser.registerCsiHandler({final:"t"},I=>this.windowOptions(I)),this._parser.registerCsiHandler({final:"u"},I=>this.restoreCursor(I)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},I=>this.insertColumns(I)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},I=>this.deleteColumns(I)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},I=>this.selectProtected(I)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},I=>this.requestMode(I,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},I=>this.requestMode(I,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(I=>(this.setTitle(I),this.setIconName(I),!0))),this._parser.registerOscHandler(1,new b.OscHandler(I=>this.setIconName(I))),this._parser.registerOscHandler(2,new b.OscHandler(I=>this.setTitle(I))),this._parser.registerOscHandler(4,new b.OscHandler(I=>this.setOrReportIndexedColor(I))),this._parser.registerOscHandler(8,new b.OscHandler(I=>this.setHyperlink(I))),this._parser.registerOscHandler(10,new b.OscHandler(I=>this.setOrReportFgColor(I))),this._parser.registerOscHandler(11,new b.OscHandler(I=>this.setOrReportBgColor(I))),this._parser.registerOscHandler(12,new b.OscHandler(I=>this.setOrReportCursorColor(I))),this._parser.registerOscHandler(104,new b.OscHandler(I=>this.restoreIndexedColor(I))),this._parser.registerOscHandler(110,new b.OscHandler(I=>this.restoreFgColor(I))),this._parser.registerOscHandler(111,new b.OscHandler(I=>this.restoreBgColor(I))),this._parser.registerOscHandler(112,new b.OscHandler(I=>this.restoreCursorColor(I))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const I in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:I},()=>this.selectCharset("("+I)),this._parser.registerEscHandler({intermediates:")",final:I},()=>this.selectCharset(")"+I)),this._parser.registerEscHandler({intermediates:"*",final:I},()=>this.selectCharset("*"+I)),this._parser.registerEscHandler({intermediates:"+",final:I},()=>this.selectCharset("+"+I)),this._parser.registerEscHandler({intermediates:"-",final:I},()=>this.selectCharset("-"+I)),this._parser.registerEscHandler({intermediates:".",final:I},()=>this.selectCharset("."+I)),this._parser.registerEscHandler({intermediates:"/",final:I},()=>this.selectCharset("/"+I));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(I=>(this._logService.error("Parsing error: ",I),I)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((I,B)=>this.requestStatusString(I,B)))}getAttrData(){return this._curAttrData}_preserveStack(E,k,O,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=O,this._parseStack.position=H}_logSlowResolvingAsync(E){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([E,new Promise((k,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(k=>{if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,k){let O,H=this._activeBuffer.x,q=this._activeBuffer.y,Z=0;const ne=this._parseStack.paused;if(ne){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(O),O;H=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>R&&(Z=this._parseStack.position+R)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,Y=>String.fromCharCode(Y)).join("")}"`),typeof E=="string"?E.split("").map(Y=>Y.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(E.length,R))),ne||this._dirtyRowTracker.clearRange(),E.length>R)for(let Y=Z;Y<E.length;Y+=R){const ie=Y+R<E.length?Y+R:E.length,I=typeof E=="string"?this._stringDecoder.decode(E.substring(Y,ie),this._parseBuffer):this._utf8Decoder.decode(E.subarray(Y,ie),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,I))return this._preserveStack(H,q,I,Y),this._logSlowResolvingAsync(O),O}else if(!ne){const Y=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(H,q,Y,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===H&&this._activeBuffer.y===q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,k,O){let H,q;const Z=this._charsetService.charset,ne=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,ie=this._coreService.decPrivateModes.wraparound,I=this._coreService.modes.insertMode,B=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-k>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let $=k;$<O;++$){if(H=E[$],q=this._unicodeService.wcwidth(H),H<127&&Z){const G=Z[String.fromCharCode(H)];G&&(H=G.charCodeAt(0))}if(ne&&this._onA11yChar.fire((0,u.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),q||!this._activeBuffer.x){if(this._activeBuffer.x+q-1>=Y){if(ie){for(;this._activeBuffer.x<Y;)F.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,q===2)continue}if(I&&(F.insertCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(B),B),F.getWidth(Y-1)===2&&F.setCellFromCodePoint(Y-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),F.setCellFromCodePoint(this._activeBuffer.x++,H,q,B.fg,B.bg,B.extended),q>0)for(;--q;)F.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else F.getWidth(this._activeBuffer.x-1)?F.addCodepointToCell(this._activeBuffer.x-1,H):F.addCodepointToCell(this._activeBuffer.x-2,H)}O-k>0&&(F.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&O-k>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,k){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,k):this._parser.registerCsiHandler(E,O=>!D(O.params[0],this._optionsService.rawOptions.windowOptions)||k(O))}registerDcsHandler(E,k){return this._parser.registerDcsHandler(E,new x.DcsHandler(k))}registerEscHandler(E,k){return this._parser.registerEscHandler(E,k)}registerOscHandler(E,k){return this._parser.registerOscHandler(E,new b.OscHandler(k))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,k){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=E,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+k)}cursorUp(E){const k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const k=E.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=E.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=E.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const k=E.params[0];return k===1&&(this._curAttrData.bg|=536870912),k!==2&&k!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,k,O,H=!1,q=!1){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);Z.replaceCells(k,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),q),H&&(Z.isWrapped=!1)}_resetBufferLine(E,k=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),k),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),O.isWrapped=!1}eraseInDisplay(E,k=!1){let O;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);O<this._bufferService.rows;O++)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,k),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(E,k=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,k);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,k)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let k=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;k--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let k=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;k--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let k=E.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let k=E.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);H.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);H.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);H.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);H.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;const k=E.params[0]||1,O=new Uint32Array(k);for(let H=0;H<k;++H)O[H]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,k){const O=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:q}=this._coreMouseService,Z=this._coreService,{buffers:ne,cols:Y}=this._bufferService,{active:ie,alt:I}=ne,B=this._optionsService.rawOptions,F=A=>A?1:2,$=E.params[0];return G=$,fe=k?$===2?3:$===4?F(Z.modes.insertMode):$===12?4:$===20?F(B.convertEol):0:$===1?F(O.applicationCursorKeys):$===3?B.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:$===6?F(O.origin):$===7?F(O.wraparound):$===8?3:$===9?F(H==="X10"):$===12?F(B.cursorBlink):$===25?F(!Z.isCursorHidden):$===45?F(O.reverseWraparound):$===66?F(O.applicationKeypad):$===1e3?F(H==="VT200"):$===1002?F(H==="DRAG"):$===1003?F(H==="ANY"):$===1004?F(O.sendFocus):$===1005?4:$===1006?F(q==="SGR"):$===1015?4:$===1016?F(q==="SGR_PIXELS"):$===1048?1:$===47||$===1047||$===1049?F(ie===I):$===2004?F(O.bracketedPasteMode):0,Z.triggerDataEvent(`${f.C0.ESC}[${k?"":"?"}${G};${fe}$y`),!0;var G,fe}_updateAttrColor(E,k,O,H,q){return k===2?(E|=50331648,E&=-16777216,E|=a.AttributeData.fromColorRGB([O,H,q])):k===5&&(E&=-50331904,E|=33554432|255&O),E}_extractColor(E,k,O){const H=[0,0,-1,0,0,0];let q=0,Z=0;do{if(H[Z+q]=E.params[k+Z],E.hasSubParams(k+Z)){const ne=E.getSubParams(k+Z);let Y=0;do H[1]===5&&(q=1),H[Z+Y+1+q]=ne[Y];while(++Y<ne.length&&Y+Z+1+q<H.length);break}if(H[1]===5&&Z+q>=2||H[1]===2&&Z+q>=5)break;H[1]&&(q=1)}while(++Z+k<E.length&&Z+q<H.length);for(let ne=2;ne<H.length;++ne)H[ne]===-1&&(H[ne]=0);switch(H[0]){case 38:O.fg=this._updateAttrColor(O.fg,H[1],H[3],H[4],H[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,H[1],H[3],H[4],H[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,H[1],H[3],H[4],H[5])}return Z}_processUnderline(E,k){k.extended=k.extended.clone(),(!~E||E>5)&&(E=1),k.extended.underlineStyle=E,k.fg|=268435456,E===0&&(k.fg&=-268435457),k.updateExtended()}_processSGR0(E){E.fg=t.DEFAULT_ATTR_DATA.fg,E.bg=t.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const k=E.length;let O;const H=this._curAttrData;for(let q=0;q<k;q++)O=E.params[q],O>=30&&O<=37?(H.fg&=-50331904,H.fg|=16777216|O-30):O>=40&&O<=47?(H.bg&=-50331904,H.bg|=16777216|O-40):O>=90&&O<=97?(H.fg&=-50331904,H.fg|=16777224|O-90):O>=100&&O<=107?(H.bg&=-50331904,H.bg|=16777224|O-100):O===0?this._processSGR0(H):O===1?H.fg|=134217728:O===3?H.bg|=67108864:O===4?(H.fg|=268435456,this._processUnderline(E.hasSubParams(q)?E.getSubParams(q)[0]:1,H)):O===5?H.fg|=536870912:O===7?H.fg|=67108864:O===8?H.fg|=1073741824:O===9?H.fg|=2147483648:O===2?H.bg|=134217728:O===21?this._processUnderline(2,H):O===22?(H.fg&=-134217729,H.bg&=-134217729):O===23?H.bg&=-67108865:O===24?(H.fg&=-268435457,this._processUnderline(0,H)):O===25?H.fg&=-536870913:O===27?H.fg&=-67108865:O===28?H.fg&=-1073741825:O===29?H.fg&=2147483647:O===39?(H.fg&=-67108864,H.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):O===49?(H.bg&=-67108864,H.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?q+=this._extractColor(E,q,H):O===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):O===100?(H.fg&=-67108864,H.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${k};${O}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${k};${O}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const k=E.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=k%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(E){const k=E.params[0]||1;let O;return(E.length<2||(O=E.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(E){if(!D(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const k=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const k=[],O=E.split(";");for(;O.length>1;){const H=O.shift(),q=O.shift();if(/^\d+$/.exec(H)){const Z=parseInt(H);if(0<=Z&&Z<256)if(q==="?")k.push({type:0,index:Z});else{const ne=(0,h.parseColor)(q);ne&&k.push({type:1,index:Z,color:ne})}}}return k.length&&this._onColor.fire(k),!0}setHyperlink(E){const k=E.split(";");return!(k.length<2)&&(k[1]?this._createHyperlink(k[0],k[1]):!k[0]&&this._finishHyperlink())}_createHyperlink(E,k){this._getCurrentLinkId()&&this._finishHyperlink();const O=E.split(":");let H;const q=O.findIndex(Z=>Z.startsWith("id="));return q!==-1&&(H=O[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:k}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,k){const O=E.split(";");for(let H=0;H<O.length&&!(k>=this._specialColors.length);++H,++k)if(O[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{const q=(0,h.parseColor)(O[H]);q&&this._onColor.fire([{type:1,index:this._specialColors[k],color:q}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const k=[],O=E.split(";");for(let H=0;H<O.length;++H)if(/^\d+$/.exec(O[H])){const q=parseInt(O[H]);0<=q&&q<256&&k.push({type:2,index:q})}return k.length&&this._onColor.fire(k),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(y[E[0]],p.CHARSETS[E[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new r.CellData;E.content=4194304|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let k=0;k<this._bufferService.rows;++k){const O=this._activeBuffer.ybase+this._activeBuffer.y+k,H=this._activeBuffer.lines.get(O);H&&(H.fill(E),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,k){const O=this._bufferService.buffer,H=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${q}${f.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,k){this._dirtyRowTracker.markRangeDirty(E,k)}}i.InputHandler=j;let J=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,E){z>E&&(P=z,z=E,E=P),z<this.start&&(this.start=z),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};J=l([_(0,g.IBufferService)],J)},844:(L,i)=>{function n(l){for(const _ of l)_.dispose();l.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const _=this._disposables.indexOf(l);_!==-1&&this._disposables.splice(_,1)}},i.toDisposable=function(l){return{dispose:l}},i.disposeArray=n,i.getDisposeArrayDisposable=function(l){return{dispose:()=>n(l)}}},1505:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(_,f,p){this._data[_]||(this._data[_]={}),this._data[_][f]=p}get(_,f){return this._data[_]?this._data[_][f]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(l,_,f,p,S){this._data.get(l,_)||this._data.set(l,_,new n),this._data.get(l,_).set(f,p,S)}get(l,_,f,p){var S;return(S=this._data.get(l,_))===null||S===void 0?void 0:S.get(f,p)}clear(){this._data.clear()}}},6114:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const n=i.isNode?"node":navigator.userAgent,l=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=n.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),i.isIpad=l==="iPad",i.isIphone=l==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),i.isLinux=l.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(n=this._search(this._getKey(l),0,this._array.length-1),this._array.splice(n,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;const _=this._getKey(l);if(_===void 0||(n=this._search(_,0,this._array.length-1),n===-1)||this._getKey(this._array[n])!==_)return!1;do if(this._array[n]===l)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===_);return!1}*getKeyIterator(l){if(this._array.length!==0&&(n=this._search(l,0,this._array.length-1),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===l))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===l)}forEachByKey(l,_){if(this._array.length!==0&&(n=this._search(l,0,this._array.length-1),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===l))do _(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===l)}values(){return this._array.values()}_search(l,_,f){if(f<_)return _;let p=Math.floor((_+f)/2);const S=this._getKey(this._array[p]);if(S>l)return this._search(l,_,p-1);if(S<l)return this._search(l,p+1,f);for(;p>0&&this._getKey(this._array[p-1])===l;)p--;return p}}},7226:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const l=n(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let m=0,u=0,t=S.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),u=Math.max(m,u),o=S.timeRemaining(),1.5*u>o)return t-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-m))}ms`),void this._start();t=o}this.clear()}}class f extends _{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const m=Date.now()+S;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}i.PriorityTaskQueue=f,i.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:f,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const l=n(643);i.updateWindowsModeWrappedState=function(_){const f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=f==null?void 0:f.get(_.cols-1),S=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);S&&p&&(S.isWrapped=p[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&p[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new n;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=n;class l{constructor(f=0,p=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=p}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=l},9092:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;const l=n(6349),_=n(8437),f=n(511),p=n(643),S=n(4634),m=n(4863),u=n(7116),t=n(3734),o=n(7226);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(r,a,g){this._hasScrollback=r,this._optionsService=a,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new o.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new t.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new t.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,a){return new _.BufferLine(this._bufferService.cols,this.getNullCell(r),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;const a=r+this._optionsService.rawOptions.scrollback;return a>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:a}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=_.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,a){const g=this.getNullCell(_.DEFAULT_ATTR_DATA);let b=0;const x=this._getCorrectBufferLength(a);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<r)for(let y=0;y<this.lines.length;y++)b+=+this.lines.get(y).resize(r,g);let h=0;if(this._rows<a)for(let y=this._rows;y<a;y++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new _.BufferLine(r,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(r,g)));else for(let y=this._rows;y>a;y--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const y=this.lines.length-x;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=x}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,a-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(r,a),this._cols>r))for(let h=0;h<this.lines.length;h++)b+=+this.lines.get(h).resize(r,g);this._cols=r,this._rows=a,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return r}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,a){this._cols!==r&&(r>this._cols?this._reflowLarger(r,a):this._reflowSmaller(r,a))}_reflowLarger(r,a){const g=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(g.length>0){const b=(0,S.reflowLargerCreateNewLayout)(this.lines,g);(0,S.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(r,a,b.countRemoved)}}_reflowLargerAdjustViewport(r,a,g){const b=this.getNullCell(_.DEFAULT_ATTR_DATA);let x=g;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new _.BufferLine(r,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(r,a){const g=this.getNullCell(_.DEFAULT_ATTR_DATA),b=[];let x=0;for(let h=this.lines.length-1;h>=0;h--){let y=this.lines.get(h);if(!y||!y.isWrapped&&y.getTrimmedLength()<=r)continue;const R=[y];for(;y.isWrapped&&h>0;)y=this.lines.get(--h),R.unshift(y);const D=this.ybase+this.y;if(D>=h&&D<h+R.length)continue;const T=R[R.length-1].getTrimmedLength(),P=(0,S.reflowSmallerGetNewLineLengths)(R,this._cols,r),j=P.length-R.length;let J;J=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+j):Math.max(0,this.lines.length-this.lines.maxLength+j);const z=[];for(let Z=0;Z<j;Z++){const ne=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);z.push(ne)}z.length>0&&(b.push({start:h+R.length+x,newLines:z}),x+=z.length),R.push(...z);let E=P.length-1,k=P[E];k===0&&(E--,k=P[E]);let O=R.length-j-1,H=T;for(;O>=0;){const Z=Math.min(H,k);if(R[E]===void 0)break;if(R[E].copyCellsFrom(R[O],H-Z,k-Z,Z,!0),k-=Z,k===0&&(E--,k=P[E]),H-=Z,H===0){O--;const ne=Math.max(O,0);H=(0,S.getWrappedLineTrimmedLength)(R,ne,this._cols)}}for(let Z=0;Z<R.length;Z++)P[Z]<r&&R[Z].setCell(P[Z],g);let q=j-J;for(;q-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+a-1)}if(b.length>0){const h=[],y=[];for(let E=0;E<this.lines.length;E++)y.push(this.lines.get(E));const R=this.lines.length;let D=R-1,T=0,P=b[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let j=0;for(let E=Math.min(this.lines.maxLength-1,R+x-1);E>=0;E--)if(P&&P.start>D+j){for(let k=P.newLines.length-1;k>=0;k--)this.lines.set(E--,P.newLines[k]);E++,h.push({index:D+1,amount:P.newLines.length}),j+=P.newLines.length,P=b[++T]}else this.lines.set(E,y[D--]);let J=0;for(let E=h.length-1;E>=0;E--)h[E].index+=J,this.lines.onInsertEmitter.fire(h[E]),J+=h[E].amount;const z=Math.max(0,R+x-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}stringIndexToBufferIndex(r,a,g=!1){for(;a;){const b=this.lines.get(r);if(!b)return[-1,-1];const x=g?b.getTrimmedLength():b.length;for(let h=0;h<x;++h)if(b.get(h)[p.CHAR_DATA_WIDTH_INDEX]&&(a-=b.get(h)[p.CHAR_DATA_CHAR_INDEX].length||1),a<0)return[r,h];r++}return[r,0]}translateBufferLineToString(r,a,g=0,b){const x=this.lines.get(r);return x?x.translateToString(a,g,b):""}getWrappedRangeForLine(r){let a=r,g=r;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:a,last:g}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===r&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){const a=new m.Marker(r);return this.markers.push(a),a.register(this.lines.onTrim(g=>{a.line-=g,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(g=>{a.line>=g.index&&(a.line+=g.amount)})),a.register(this.lines.onDelete(g=>{a.line>=g.index&&a.line<g.index+g.amount&&a.dispose(),a.line>g.index&&(a.line-=g.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}iterator(r,a,g,b,x){return new c(this,r,a,g,b,x)}};class c{constructor(a,g,b=0,x=a.lines.length,h=0,y=0){this._buffer=a,this._trimRight=g,this._startIndex=b,this._endIndex=x,this._startOverscan=h,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){const a=this._buffer.getWrappedRangeForLine(this._current);a.first<this._startIndex-this._startOverscan&&(a.first=this._startIndex-this._startOverscan),a.last>this._endIndex+this._endOverscan&&(a.last=this._endIndex+this._endOverscan),a.first=Math.max(a.first,0),a.last=Math.min(a.last,this._buffer.lines.length);let g="";for(let b=a.first;b<=a.last;++b)g+=this._buffer.translateBufferLineToString(b,this._trimRight);return this._current=a.last+1,{range:a,content:g}}}i.BufferStringIterator=c},8437:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const l=n(482),_=n(643),f=n(511),p=n(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let S=0;class m{constructor(t,o,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const r=o||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]);for(let a=0;a<t;++a)this.setCell(a,r);this.length=t}get(t){const o=this._data[3*t+0],c=2097151&o;return[this._data[3*t+1],2097152&o?this._combined[t]:c?(0,l.stringFromCodePoint)(c):"",o>>22,2097152&o?this._combined[t].charCodeAt(this._combined[t].length-1):c]}set(t,o){this._data[3*t+1]=o[_.CHAR_DATA_ATTR_INDEX],o[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=o[1],this._data[3*t+0]=2097152|t|o[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=o[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[_.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const o=this._data[3*t+0];return 2097152&o?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&o}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const o=this._data[3*t+0];return 2097152&o?this._combined[t]:2097151&o?(0,l.stringFromCodePoint)(2097151&o):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,o){return S=3*t,o.content=this._data[S+0],o.fg=this._data[S+1],o.bg=this._data[S+2],2097152&o.content&&(o.combinedData=this._combined[t]),268435456&o.bg&&(o.extended=this._extendedAttrs[t]),o}setCell(t,o){2097152&o.content&&(this._combined[t]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[t]=o.extended),this._data[3*t+0]=o.content,this._data[3*t+1]=o.fg,this._data[3*t+2]=o.bg}setCellFromCodePoint(t,o,c,r,a,g){268435456&a&&(this._extendedAttrs[t]=g),this._data[3*t+0]=o|c<<22,this._data[3*t+1]=r,this._data[3*t+2]=a}addCodepointToCell(t,o){let c=this._data[3*t+0];2097152&c?this._combined[t]+=(0,l.stringFromCodePoint)(o):(2097151&c?(this._combined[t]=(0,l.stringFromCodePoint)(2097151&c)+(0,l.stringFromCodePoint)(o),c&=-2097152,c|=2097152):c=o|4194304,this._data[3*t+0]=c)}insertCells(t,o,c,r){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs),o<this.length-t){const a=new f.CellData;for(let g=this.length-t-o-1;g>=0;--g)this.setCell(t+o+g,this.loadCell(t+g,a));for(let g=0;g<o;++g)this.setCell(t+g,c)}else for(let a=t;a<this.length;++a)this.setCell(a,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs)}deleteCells(t,o,c,r){if(t%=this.length,o<this.length-t){const a=new f.CellData;for(let g=0;g<this.length-t-o;++g)this.setCell(t+g,this.loadCell(t+o+g,a));for(let g=this.length-o;g<this.length;++g)this.setCell(g,c)}else for(let a=t;a<this.length;++a)this.setCell(a,c);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs)}replaceCells(t,o,c,r,a=!1){if(a)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodePoint(o,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs);t<o&&t<this.length;)this.isProtected(t)||this.setCell(t,c),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new p.ExtendedAttrs);t<o&&t<this.length;)this.setCell(t++,c)}resize(t,o){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const r=new Uint32Array(c);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,o)}else{this._data=this._data.subarray(0,c);const r=Object.keys(this._combined);for(let g=0;g<r.length;g++){const b=parseInt(r[g],10);b>=t&&delete this._combined[b]}const a=Object.keys(this._extendedAttrs);for(let g=0;g<a.length;g++){const b=parseInt(a[g],10);b>=t&&delete this._extendedAttrs[b]}}return this.length=t,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,o=!1){if(o)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,t);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const o in t._combined)this._combined[o]=t._combined[o];this._extendedAttrs={};for(const o in t._extendedAttrs)this._extendedAttrs[o]=t._extendedAttrs[o];this.isWrapped=t.isWrapped}clone(){const t=new m(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const o in this._combined)t._combined[o]=this._combined[o];for(const o in this._extendedAttrs)t._extendedAttrs[o]=this._extendedAttrs[o];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,o,c,r,a){const g=t._data;if(a)for(let x=r-1;x>=0;x--){for(let h=0;h<3;h++)this._data[3*(c+x)+h]=g[3*(o+x)+h];268435456&g[3*(o+x)+2]&&(this._extendedAttrs[c+x]=t._extendedAttrs[o+x])}else for(let x=0;x<r;x++){for(let h=0;h<3;h++)this._data[3*(c+x)+h]=g[3*(o+x)+h];268435456&g[3*(o+x)+2]&&(this._extendedAttrs[c+x]=t._extendedAttrs[o+x])}const b=Object.keys(t._combined);for(let x=0;x<b.length;x++){const h=parseInt(b[x],10);h>=o&&(this._combined[h-o+c]=t._combined[h])}}translateToString(t=!1,o=0,c=this.length){t&&(c=Math.min(c,this.getTrimmedLength()));let r="";for(;o<c;){const a=this._data[3*o+0],g=2097151&a;r+=2097152&a?this._combined[o]:g?(0,l.stringFromCodePoint)(g):_.WHITESPACE_CELL_CHAR,o+=a>>22||1}return r}}i.BufferLine=m},4841:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,l){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return l*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(L,i)=>{function n(l,_,f){if(_===l.length-1)return l[_].getTrimmedLength();const p=!l[_].hasContent(f-1)&&l[_].getWidth(f-1)===1,S=l[_+1].getWidth(0)===2;return p&&S?f-1:f}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(l,_,f,p,S){const m=[];for(let u=0;u<l.length-1;u++){let t=u,o=l.get(++t);if(!o.isWrapped)continue;const c=[l.get(u)];for(;t<l.length&&o.isWrapped;)c.push(o),o=l.get(++t);if(p>=u&&p<t){u+=c.length-1;continue}let r=0,a=n(c,r,_),g=1,b=0;for(;g<c.length;){const h=n(c,g,_),y=h-b,R=f-a,D=Math.min(y,R);c[r].copyCellsFrom(c[g],b,a,D,!1),a+=D,a===f&&(r++,a=0),b+=D,b===h&&(g++,b=0),a===0&&r!==0&&c[r-1].getWidth(f-1)===2&&(c[r].copyCellsFrom(c[r-1],f-1,a++,1,!1),c[r-1].setCell(f-1,S))}c[r].replaceCells(a,f,S);let x=0;for(let h=c.length-1;h>0&&(h>r||c[h].getTrimmedLength()===0);h--)x++;x>0&&(m.push(u+c.length-x),m.push(x)),u+=c.length-1}return m},i.reflowLargerCreateNewLayout=function(l,_){const f=[];let p=0,S=_[p],m=0;for(let u=0;u<l.length;u++)if(S===u){const t=_[++p];l.onDeleteEmitter.fire({index:u-m,amount:t}),u+=t-1,m+=t,S=_[++p]}else f.push(u);return{layout:f,countRemoved:m}},i.reflowLargerApplyNewLayout=function(l,_){const f=[];for(let p=0;p<_.length;p++)f.push(l.get(_[p]));for(let p=0;p<f.length;p++)l.set(p,f[p]);l.length=_.length},i.reflowSmallerGetNewLineLengths=function(l,_,f){const p=[],S=l.map((o,c)=>n(l,c,_)).reduce((o,c)=>o+c);let m=0,u=0,t=0;for(;t<S;){if(S-t<f){p.push(S-t);break}m+=f;const o=n(l,u,_);m>o&&(m-=o,u++);const c=l[u].getWidth(m-1)===2;c&&m--;const r=c?f-1:f;p.push(r),t+=r}return p},i.getWrappedLineTrimmedLength=n},5295:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const l=n(9092),_=n(8460),f=n(844);class p extends f.Disposable{constructor(m,u){super(),this._optionsService=m,this._bufferService=u,this._onBufferActivate=this.register(new _.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(m){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(m),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(m,u){this._normal.resize(m,u),this._alt.resize(m,u),this.setupTabStops(m)}setupTabStops(m){this._normal.setupTabStops(m),this._alt.setupTabStops(m)}}i.BufferSet=p},511:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const l=n(482),_=n(643),f=n(3734);class p extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const u=new p;return u.setFromCharData(m),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(m[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(m[_.CHAR_DATA_CHAR_INDEX].length===2){const t=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const o=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(t-55296)+o-56320+65536|m[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=m[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=m[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const l=n(8460),_=n(844);class f{constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=f,f._nextId=1},7116:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(L,i)=>{var n,l;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(_){_.NUL="\0",_.SOH="",_.STX="",_.ETX="",_.EOT="",_.ENQ="",_.ACK="",_.BEL="\x07",_.BS="\b",_.HT="	",_.LF=`
`,_.VT="\v",_.FF="\f",_.CR="\r",_.SO="",_.SI="",_.DLE="",_.DC1="",_.DC2="",_.DC3="",_.DC4="",_.NAK="",_.SYN="",_.ETB="",_.CAN="",_.EM="",_.SUB="",_.ESC="\x1B",_.FS="",_.GS="",_.RS="",_.US="",_.SP=" ",_.DEL=""}(n=i.C0||(i.C0={})),(l=i.C1||(i.C1={})).PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC="",(i.C1_ESCAPED||(i.C1_ESCAPED={})).ST=`${n.ESC}\\`},7399:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const l=n(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(f,p,S,m){const u={type:0,cancel:!1,key:void 0},t=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?u.key=p?l.C0.ESC+"OA":l.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?u.key=p?l.C0.ESC+"OD":l.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?u.key=p?l.C0.ESC+"OC":l.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(u.key=p?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(f.altKey){u.key=l.C0.ESC+l.C0.DEL;break}u.key=l.C0.DEL;break;case 9:if(f.shiftKey){u.key=l.C0.ESC+"[Z";break}u.key=l.C0.HT,u.cancel=!0;break;case 13:u.key=f.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,u.cancel=!0;break;case 27:u.key=l.C0.ESC,f.altKey&&(u.key=l.C0.ESC+l.C0.ESC),u.cancel=!0;break;case 37:if(f.metaKey)break;t?(u.key=l.C0.ESC+"[1;"+(t+1)+"D",u.key===l.C0.ESC+"[1;3D"&&(u.key=l.C0.ESC+(S?"b":"[1;5D"))):u.key=p?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(f.metaKey)break;t?(u.key=l.C0.ESC+"[1;"+(t+1)+"C",u.key===l.C0.ESC+"[1;3C"&&(u.key=l.C0.ESC+(S?"f":"[1;5C"))):u.key=p?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(f.metaKey)break;t?(u.key=l.C0.ESC+"[1;"+(t+1)+"A",S||u.key!==l.C0.ESC+"[1;3A"||(u.key=l.C0.ESC+"[1;5A")):u.key=p?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(f.metaKey)break;t?(u.key=l.C0.ESC+"[1;"+(t+1)+"B",S||u.key!==l.C0.ESC+"[1;3B"||(u.key=l.C0.ESC+"[1;5B")):u.key=p?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(u.key=l.C0.ESC+"[2~");break;case 46:u.key=t?l.C0.ESC+"[3;"+(t+1)+"~":l.C0.ESC+"[3~";break;case 36:u.key=t?l.C0.ESC+"[1;"+(t+1)+"H":p?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:u.key=t?l.C0.ESC+"[1;"+(t+1)+"F":p?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:f.shiftKey?u.type=2:f.ctrlKey?u.key=l.C0.ESC+"[5;"+(t+1)+"~":u.key=l.C0.ESC+"[5~";break;case 34:f.shiftKey?u.type=3:f.ctrlKey?u.key=l.C0.ESC+"[6;"+(t+1)+"~":u.key=l.C0.ESC+"[6~";break;case 112:u.key=t?l.C0.ESC+"[1;"+(t+1)+"P":l.C0.ESC+"OP";break;case 113:u.key=t?l.C0.ESC+"[1;"+(t+1)+"Q":l.C0.ESC+"OQ";break;case 114:u.key=t?l.C0.ESC+"[1;"+(t+1)+"R":l.C0.ESC+"OR";break;case 115:u.key=t?l.C0.ESC+"[1;"+(t+1)+"S":l.C0.ESC+"OS";break;case 116:u.key=t?l.C0.ESC+"[15;"+(t+1)+"~":l.C0.ESC+"[15~";break;case 117:u.key=t?l.C0.ESC+"[17;"+(t+1)+"~":l.C0.ESC+"[17~";break;case 118:u.key=t?l.C0.ESC+"[18;"+(t+1)+"~":l.C0.ESC+"[18~";break;case 119:u.key=t?l.C0.ESC+"[19;"+(t+1)+"~":l.C0.ESC+"[19~";break;case 120:u.key=t?l.C0.ESC+"[20;"+(t+1)+"~":l.C0.ESC+"[20~";break;case 121:u.key=t?l.C0.ESC+"[21;"+(t+1)+"~":l.C0.ESC+"[21~";break;case 122:u.key=t?l.C0.ESC+"[23;"+(t+1)+"~":l.C0.ESC+"[23~";break;case 123:u.key=t?l.C0.ESC+"[24;"+(t+1)+"~":l.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(S&&!m||!f.altKey||f.metaKey)!S||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?u.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(u.key=l.C0.US),f.key==="@"&&(u.key=l.C0.NUL)):f.keyCode===65&&(u.type=1);else{const o=_[f.keyCode],c=o==null?void 0:o[f.shiftKey?1:0];if(c)u.key=l.C0.ESC+c;else if(f.keyCode>=65&&f.keyCode<=90){const r=f.ctrlKey?f.keyCode-64:f.keyCode+32;let a=String.fromCharCode(r);f.shiftKey&&(a=a.toUpperCase()),u.key=l.C0.ESC+a}else if(f.keyCode===32)u.key=l.C0.ESC+(f.ctrlKey?l.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let r=f.code.slice(3,4);f.shiftKey||(r=r.toLowerCase()),u.key=l.C0.ESC+r,u.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?u.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?u.key=l.C0.NUL:f.keyCode>=51&&f.keyCode<=55?u.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?u.key=l.C0.DEL:f.keyCode===219?u.key=l.C0.ESC:f.keyCode===220?u.key=l.C0.FS:f.keyCode===221&&(u.key=l.C0.GS)}return u}},482:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,l=0,_=n.length){let f="";for(let p=l;p<_;++p){let S=n[p];S>65535?(S-=65536,f+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):f+=String.fromCharCode(S)}return f},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,l){const _=n.length;if(!_)return 0;let f=0,p=0;if(this._interim){const S=n.charCodeAt(p++);56320<=S&&S<=57343?l[f++]=1024*(this._interim-55296)+S-56320+65536:(l[f++]=this._interim,l[f++]=S),this._interim=0}for(let S=p;S<_;++S){const m=n.charCodeAt(S);if(55296<=m&&m<=56319){if(++S>=_)return this._interim=m,f;const u=n.charCodeAt(S);56320<=u&&u<=57343?l[f++]=1024*(m-55296)+u-56320+65536:(l[f++]=m,l[f++]=u)}else m!==65279&&(l[f++]=m)}return f}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,l){const _=n.length;if(!_)return 0;let f,p,S,m,u=0,t=0,o=0;if(this.interim[0]){let a=!1,g=this.interim[0];g&=(224&g)==192?31:(240&g)==224?15:7;let b,x=0;for(;(b=63&this.interim[++x])&&x<4;)g<<=6,g|=b;const h=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=h-x;for(;o<y;){if(o>=_)return 0;if(b=n[o++],(192&b)!=128){o--,a=!0;break}this.interim[x++]=b,g<<=6,g|=63&b}a||(h===2?g<128?o--:l[u++]=g:h===3?g<2048||g>=55296&&g<=57343||g===65279||(l[u++]=g):g<65536||g>1114111||(l[u++]=g)),this.interim.fill(0)}const c=_-4;let r=o;for(;r<_;){for(;!(!(r<c)||128&(f=n[r])||128&(p=n[r+1])||128&(S=n[r+2])||128&(m=n[r+3]));)l[u++]=f,l[u++]=p,l[u++]=S,l[u++]=m,r+=4;if(f=n[r++],f<128)l[u++]=f;else if((224&f)==192){if(r>=_)return this.interim[0]=f,u;if(p=n[r++],(192&p)!=128){r--;continue}if(t=(31&f)<<6|63&p,t<128){r--;continue}l[u++]=t}else if((240&f)==224){if(r>=_)return this.interim[0]=f,u;if(p=n[r++],(192&p)!=128){r--;continue}if(r>=_)return this.interim[0]=f,this.interim[1]=p,u;if(S=n[r++],(192&S)!=128){r--;continue}if(t=(15&f)<<12|(63&p)<<6|63&S,t<2048||t>=55296&&t<=57343||t===65279)continue;l[u++]=t}else if((248&f)==240){if(r>=_)return this.interim[0]=f,u;if(p=n[r++],(192&p)!=128){r--;continue}if(r>=_)return this.interim[0]=f,this.interim[1]=p,u;if(S=n[r++],(192&S)!=128){r--;continue}if(r>=_)return this.interim[0]=f,this.interim[1]=p,this.interim[2]=S,u;if(m=n[r++],(192&m)!=128){r--;continue}if(t=(7&f)<<18|(63&p)<<12|(63&S)<<6|63&m,t<65536||t>1114111)continue;l[u++]=t}}return u}}},225:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let f=0;f<n.length;++f)_.fill(0,n[f][0],n[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?_[f]:function(p,S){let m,u=0,t=S.length-1;if(p<S[0][0]||p>S[t][1])return!1;for(;t>=u;)if(m=u+t>>1,p>S[m][1])u=m+1;else{if(!(p<S[m][0]))return!0;t=m-1}return!1}(f,l)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const l=n(8460),_=n(844);class f extends _.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,m){if(m!==void 0&&this._syncCalls>m)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,m){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(m),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(m)}_innerWrite(S=0,m=!0){const u=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],o=this._action(t,m);if(o){const r=a=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,a)):this._innerWrite(u,a);return void o.catch(a=>(queueMicrotask(()=>{throw a}),Promise.resolve(!1))).then(r)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=f},5941:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function _(f,p){const S=f.toString(16),m=S.length<2?"0"+S:S;switch(p){case 4:return S[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}i.parseColor=function(f){if(!f)return;let p=f.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const S=n.exec(p);if(S){const m=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/m*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/m*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/m*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),l.exec(p)&&[3,6,9,12].includes(p.length))){const S=p.length/3,m=[0,0,0];for(let u=0;u<3;++u){const t=parseInt(p.slice(S*u,S*u+S),16);m[u]=S===1?t<<4:S===2?t:S===3?t>>4:t>>8}return m}},i.toRgbString=function(f,p=16){const[S,m,u]=f;return`rgb:${_(S,p)}/${_(m,p)}/${_(u,p)}`}},5770:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const l=n(482),_=n(8742),f=n(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(m,u){this._handlers[m]===void 0&&(this._handlers[m]=[]);const t=this._handlers[m];return t.push(u),{dispose:()=>{const o=t.indexOf(u);o!==-1&&t.splice(o,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}reset(){if(this._active.length)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(m,u){if(this.reset(),this._ident=m,this._active=this._handlers[m]||p,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(m,u,t){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(m,u,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(m,u,t))}unhook(m,u=!0){if(this._active.length){let t=!1,o=this._active.length-1,c=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,t=u,c=this._stack.fallThrough,this._stack.paused=!1),!c&&t===!1){for(;o>=0&&(t=this._active[o].unhook(m),t!==!0);o--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,t;o--}for(;o>=0;o--)if(t=this._active[o].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",m);this._active=p,this._ident=0}};const S=new _.Params;S.addParam(0),i.DcsHandler=class{constructor(m){this._handler=m,this._data="",this._params=S,this._hitLimit=!1}hook(m){this._params=m.length>1||m.params[0]?m.clone():S,this._data="",this._hitLimit=!1}put(m,u,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(m,u,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(m){let u=!1;if(this._hitLimit)u=!1;else if(m&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(t=>(this._params=S,this._data="",this._hitLimit=!1,t));return this._params=S,this._data="",this._hitLimit=!1,u}}},2015:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const l=n(844),_=n(8742),f=n(6242),p=n(6351);class S{constructor(o){this.table=new Uint8Array(o)}setDefault(o,c){this.table.fill(o<<4|c)}add(o,c,r,a){this.table[c<<8|o]=r<<4|a}addMany(o,c,r,a){for(let g=0;g<o.length;g++)this.table[c<<8|o[g]]=r<<4|a}}i.TransitionTable=S;const m=160;i.VT500_TRANSITION_TABLE=function(){const t=new S(4095),o=Array.apply(null,Array(256)).map((x,h)=>h),c=(x,h)=>o.slice(x,h),r=c(32,127),a=c(0,24);a.push(25),a.push.apply(a,c(28,32));const g=c(0,14);let b;for(b in t.setDefault(1,0),t.addMany(r,0,2,0),g)t.addMany([24,26,153,154],b,3,0),t.addMany(c(128,144),b,3,0),t.addMany(c(144,152),b,3,0),t.add(156,b,0,0),t.add(27,b,11,1),t.add(157,b,4,8),t.addMany([152,158,159],b,0,7),t.add(155,b,11,3),t.add(144,b,11,9);return t.addMany(a,0,3,0),t.addMany(a,1,3,1),t.add(127,1,0,1),t.addMany(a,8,0,8),t.addMany(a,3,3,3),t.add(127,3,0,3),t.addMany(a,4,3,4),t.add(127,4,0,4),t.addMany(a,6,3,6),t.addMany(a,5,3,5),t.add(127,5,0,5),t.addMany(a,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(c(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(a,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(c(64,127),3,7,0),t.addMany(c(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(c(48,60),4,8,4),t.addMany(c(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(c(32,64),6,0,6),t.add(127,6,0,6),t.addMany(c(64,127),6,0,0),t.addMany(c(32,48),3,9,5),t.addMany(c(32,48),5,9,5),t.addMany(c(48,64),5,0,6),t.addMany(c(64,127),5,7,0),t.addMany(c(32,48),4,9,5),t.addMany(c(32,48),1,9,2),t.addMany(c(32,48),2,9,2),t.addMany(c(48,127),2,10,0),t.addMany(c(48,80),1,10,0),t.addMany(c(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(c(96,127),1,10,0),t.add(80,1,11,9),t.addMany(a,9,0,9),t.add(127,9,0,9),t.addMany(c(28,32),9,0,9),t.addMany(c(32,48),9,9,12),t.addMany(c(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(a,11,0,11),t.addMany(c(32,128),11,0,11),t.addMany(c(28,32),11,0,11),t.addMany(a,10,0,10),t.add(127,10,0,10),t.addMany(c(28,32),10,0,10),t.addMany(c(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(c(32,48),10,9,12),t.addMany(a,12,0,12),t.add(127,12,0,12),t.addMany(c(28,32),12,0,12),t.addMany(c(32,48),12,9,12),t.addMany(c(48,64),12,0,11),t.addMany(c(64,127),12,12,13),t.addMany(c(64,127),10,12,13),t.addMany(c(64,127),9,12,13),t.addMany(a,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(m,0,2,0),t.add(m,8,5,8),t.add(m,6,0,6),t.add(m,11,0,11),t.add(m,13,13,13),t}();class u extends l.Disposable{constructor(o=i.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,r,a)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,r)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,c=[64,126]){let r=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=o.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let g=0;g<o.intermediates.length;++g){const b=o.intermediates.charCodeAt(g);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=b}}if(o.final.length!==1)throw new Error("final must be a single byte");const a=o.final.charCodeAt(0);if(c[0]>a||a>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return r<<=8,r|=a,r}identToString(o){const c=[];for(;o;)c.push(String.fromCharCode(255&o)),o>>=8;return c.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,c){const r=this._identifier(o,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const a=this._escHandlers[r];return a.push(c),{dispose:()=>{const g=a.indexOf(c);g!==-1&&a.splice(g,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,c){this._executeHandlers[o.charCodeAt(0)]=c}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,c){const r=this._identifier(o);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const a=this._csiHandlers[r];return a.push(c),{dispose:()=>{const g=a.indexOf(c);g!==-1&&a.splice(g,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,c){return this._dcsParser.registerHandler(this._identifier(o),c)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,c){return this._oscParser.registerHandler(o,c)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,c,r,a,g){this._parseStack.state=o,this._parseStack.handlers=c,this._parseStack.handlerPos=r,this._parseStack.transition=a,this._parseStack.chunkPos=g}parse(o,c,r){let a,g=0,b=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const h=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&y>-1){for(;y>=0&&(a=h[y](this._params),a!==!0);y--)if(a instanceof Promise)return this._parseStack.handlerPos=y,a}this._parseStack.handlers=[];break;case 4:if(r===!1&&y>-1){for(;y>=0&&(a=h[y](),a!==!0);y--)if(a instanceof Promise)return this._parseStack.handlerPos=y,a}this._parseStack.handlers=[];break;case 6:if(g=o[this._parseStack.chunkPos],a=this._dcsParser.unhook(g!==24&&g!==26,r),a)return a;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=o[this._parseStack.chunkPos],a=this._oscParser.end(g!==24&&g!==26,r),a)return a;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let h=x;h<c;++h){switch(g=o[h],b=this._transitions.table[this.currentState<<8|(g<160?g:m)],b>>4){case 2:for(let P=h+1;;++P){if(P>=c||(g=o[P])<32||g>126&&g<m){this._printHandler(o,h,P),h=P-1;break}if(++P>=c||(g=o[P])<32||g>126&&g<m){this._printHandler(o,h,P),h=P-1;break}if(++P>=c||(g=o[P])<32||g>126&&g<m){this._printHandler(o,h,P),h=P-1;break}if(++P>=c||(g=o[P])<32||g>126&&g<m){this._printHandler(o,h,P),h=P-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|g];let R=y?y.length-1:-1;for(;R>=0&&(a=y[R](this._params),a!==!0);R--)if(a instanceof Promise)return this._preserveStack(3,y,R,b,h),a;R<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++h<c&&(g=o[h])>47&&g<60);h--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:const D=this._escHandlers[this._collect<<8|g];let T=D?D.length-1:-1;for(;T>=0&&(a=D[T](),a!==!0);T--)if(a instanceof Promise)return this._preserveStack(4,D,T,b,h),a;T<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(let P=h+1;;++P)if(P>=c||(g=o[P])===24||g===26||g===27||g>127&&g<m){this._dcsParser.put(o,h,P),h=P-1;break}break;case 14:if(a=this._dcsParser.unhook(g!==24&&g!==26),a)return this._preserveStack(6,[],0,b,h),a;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let P=h+1;;P++)if(P>=c||(g=o[P])<32||g>127&&g<m){this._oscParser.put(o,h,P),h=P-1;break}break;case 6:if(a=this._oscParser.end(g!==24&&g!==26),a)return this._preserveStack(5,[],0,b,h),a;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}i.EscapeSequenceParser=u},6242:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const l=n(5770),_=n(482),f=[];i.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,S){this._handlers[p]===void 0&&(this._handlers[p]=[]);const m=this._handlers[p];return m.push(S),{dispose:()=>{const u=m.indexOf(S);u!==-1&&m.splice(u,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,S,m){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(p,S,m);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,S,m))}start(){this.reset(),this._state=1}put(p,S,m){if(this._state!==3){if(this._state===1)for(;S<m;){const u=p[S++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&m-S>0&&this._put(p,S,m)}}end(p,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let m=!1,u=this._active.length-1,t=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,m=S,t=this._stack.fallThrough,this._stack.paused=!1),!t&&m===!1){for(;u>=0&&(m=this._active[u].end(p),m!==!0);u--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,m;u--}for(;u>=0;u--)if(m=this._active[u].end(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,m}else this._handlerFb(this._id,"END",p);this._active=f,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,S,m){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,S,m),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let S=!1;if(this._hitLimit)S=!1;else if(p&&(S=this._handler(this._data),S instanceof Promise))return S.then(m=>(this._data="",this._hitLimit=!1,m));return this._data="",this._hitLimit=!1,S}}},8742:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class l{constructor(f=32,p=32){if(this.maxLength=f,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(f){const p=new l;if(!f.length)return p;for(let S=Array.isArray(f[0])?1:0;S<f.length;++S){const m=f[S];if(Array.isArray(m))for(let u=0;u<m.length;++u)p.addSubParam(m[u]);else p.addParam(m)}return p}clone(){const f=new l(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let p=0;p<this.length;++p){f.push(this.params[p]);const S=this._subParamsIdx[p]>>8,m=255&this._subParamsIdx[p];m-S>0&&f.push(Array.prototype.slice.call(this._subParams,S,m))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>n?n:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>n?n:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const p=this._subParamsIdx[f]>>8,S=255&this._subParamsIdx[f];return S-p>0?this._subParams.subarray(p,S):null}getSubParamsAll(){const f={};for(let p=0;p<this.length;++p){const S=this._subParamsIdx[p]>>8,m=255&this._subParamsIdx[p];m-S>0&&(f[p]=this._subParams.slice(S,m))}return f}addDigit(f){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,m=S[p-1];S[p-1]=~m?Math.min(10*m+f,n):f}}i.Params=l},5741:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,l){const _={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(_),l.dispose=()=>this._wrappedAddonDispose(_),l.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let l=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===n){l=_;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(l,1)}}},8771:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const l=n(3785),_=n(511);i.BufferApiView=class{constructor(f,p){this._buffer=f,this.type=p}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const p=this._buffer.lines.get(f);if(p)return new l.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const l=n(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,f){if(!(_<0||_>=this._line.length))return f?(this._line.loadCell(_,f),f):this._line.loadCell(_,new l.CellData)}translateToString(_,f,p){return this._line.translateToString(_,f,p)}}},8285:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const l=n(8771),_=n(8460);i.BufferNamespaceApi=class{constructor(f){this._core=f,this._onBufferChange=new _.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,l){return this._core.registerCsiHandler(n,_=>l(_.toArray()))}addCsiHandler(n,l){return this.registerCsiHandler(n,l)}registerDcsHandler(n,l){return this._core.registerDcsHandler(n,(_,f)=>l(_,f.toArray()))}addDcsHandler(n,l){return this.registerDcsHandler(n,l)}registerEscHandler(n,l){return this._core.registerEscHandler(n,l)}addEscHandler(n,l){return this.registerEscHandler(n,l)}registerOscHandler(n,l){return this._core.registerOscHandler(n,l)}addOscHandler(n,l){return this.registerOscHandler(n,l)}}},7090:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(L,i,n){var l=this&&this.__decorate||function(t,o,c,r){var a,g=arguments.length,b=g<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,o,c,r);else for(var x=t.length-1;x>=0;x--)(a=t[x])&&(b=(g<3?a(b):g>3?a(o,c,b):a(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},_=this&&this.__param||function(t,o){return function(c,r){o(c,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const f=n(2585),p=n(5295),S=n(8460),m=n(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=class extends m.Disposable{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new S.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new S.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new p.BufferSet(t,this))}get buffer(){return this.buffers.active}resize(t,o){this.cols=t,this.rows=o,this.buffers.resize(t,o),this._onResize.fire({cols:t,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,o=!1){const c=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=c.getBlankLine(t,o),this._cachedBlankLine=r),r.isWrapped=o;const a=c.ybase+c.scrollTop,g=c.ybase+c.scrollBottom;if(c.scrollTop===0){const b=c.lines.isFull;g===c.lines.length-1?b?c.lines.recycle().copyFrom(r):c.lines.push(r.clone()):c.lines.splice(g+1,0,r.clone()),b?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const b=g-a+1;c.lines.shiftElements(a+1,b-1,-1),c.lines.set(g,r.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(t,o,c){const r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const a=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),a!==r.ydisp&&(o||this._onScroll.fire(r.ydisp))}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(t){const o=t-this.buffer.ydisp;o!==0&&this.scrollLines(o)}};u=l([_(0,f.IOptionsService)],u),i.BufferService=u},7994:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,l){this._charsets[n]=l,this.glevel===n&&(this.charset=l)}}},1753:function(L,i,n){var l=this&&this.__decorate||function(r,a,g,b){var x,h=arguments.length,y=h<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,a,g,b);else for(var R=r.length-1;R>=0;R--)(x=r[R])&&(y=(h<3?x(y):h>3?x(a,g,y):x(a,g))||y);return h>3&&y&&Object.defineProperty(a,g,y),y},_=this&&this.__param||function(r,a){return function(g,b){a(g,b,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const f=n(2585),p=n(8460),S=n(844),m={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function u(r,a){let g=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(g|=64,g|=r.action):(g|=3&r.button,4&r.button&&(g|=64),8&r.button&&(g|=128),r.action===32?g|=32:r.action!==0||a||(g|=3)),g}const t=String.fromCharCode,o={DEFAULT:r=>{const a=[u(r,!1)+32,r.col+32,r.row+32];return a[0]>255||a[1]>255||a[2]>255?"":`\x1B[M${t(a[0])}${t(a[1])}${t(a[2])}`},SGR:r=>{const a=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${u(r,!0)};${r.col};${r.row}${a}`},SGR_PIXELS:r=>{const a=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${u(r,!0)};${r.x};${r.y}${a}`}};let c=class extends S.Disposable{constructor(r,a){super(),this._bufferService=r,this._coreService=a,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const g of Object.keys(m))this.addProtocol(g,m[g]);for(const g of Object.keys(o))this.addEncoding(g,o[g]);this.reset()}addProtocol(r,a){this._protocols[r]=a}addEncoding(r,a){this._encodings[r]=a}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const a=this._encodings[this._activeEncoding](r);return a&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(a):this._coreService.triggerDataEvent(a,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,a,g){if(g){if(r.x!==a.x||r.y!==a.y)return!1}else if(r.col!==a.col||r.row!==a.row)return!1;return r.button===a.button&&r.action===a.action&&r.ctrl===a.ctrl&&r.alt===a.alt&&r.shift===a.shift}};c=l([_(0,f.IBufferService),_(1,f.ICoreService)],c),i.CoreMouseService=c},6975:function(L,i,n){var l=this&&this.__decorate||function(c,r,a,g){var b,x=arguments.length,h=x<3?r:g===null?g=Object.getOwnPropertyDescriptor(r,a):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,r,a,g);else for(var y=c.length-1;y>=0;y--)(b=c[y])&&(h=(x<3?b(h):x>3?b(r,a,h):b(r,a))||h);return x>3&&h&&Object.defineProperty(r,a,h),h},_=this&&this.__param||function(c,r){return function(a,g){r(a,g,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const f=n(2585),p=n(8460),S=n(1439),m=n(844),u=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=class extends m.Disposable{constructor(c,r,a){super(),this._bufferService=c,this._logService=r,this._optionsService=a,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,S.clone)(u),this.decPrivateModes=(0,S.clone)(t)}reset(){this.modes=(0,S.clone)(u),this.decPrivateModes=(0,S.clone)(t)}triggerDataEvent(c,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const a=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&a.ybase!==a.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(g=>g.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(c))}};o=l([_(0,f.IBufferService),_(1,f.ILogService),_(2,f.IOptionsService)],o),i.CoreService=o},9074:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const l=n(8055),_=n(8460),f=n(844),p=n(6106);let S=0,m=0;class u extends f.Disposable{constructor(){super(),this._decorations=new p.SortedList(c=>c==null?void 0:c.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>{for(const c of this._decorations.values())this._onDecorationRemoved.fire(c);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(c){if(c.marker.isDisposed)return;const r=new t(c);if(r){const a=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),a.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,r,a){var g,b,x;let h=0,y=0;for(const R of this._decorations.getKeyIterator(r))h=(g=R.options.x)!==null&&g!==void 0?g:0,y=h+((b=R.options.width)!==null&&b!==void 0?b:1),c>=h&&c<y&&(!a||((x=R.options.layer)!==null&&x!==void 0?x:"bottom")===a)&&(yield R)}forEachDecorationAtCell(c,r,a,g){this._decorations.forEachByKey(r,b=>{var x,h,y;S=(x=b.options.x)!==null&&x!==void 0?x:0,m=S+((h=b.options.width)!==null&&h!==void 0?h:1),c>=S&&c<m&&(!a||((y=b.options.layer)!==null&&y!==void 0?y:"bottom")===a)&&g(b)})}dispose(){for(const c of this._decorations.values())this._onDecorationRemoved.fire(c);this.reset()}}i.DecorationService=u;class t extends f.Disposable{constructor(c){super(),this.options=c,this.isDisposed=!1,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const l=n(2585),_=n(8343);class f{constructor(...S){this._entries=new Map;for(const[m,u]of S)this.set(m,u)}set(S,m){const u=this._entries.get(S);return this._entries.set(S,m),u}forEach(S){for(const[m,u]of this._entries.entries())S(m,u)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=f,i.InstantiationService=class{constructor(){this._services=new f,this._services.set(l.IInstantiationService,this)}setService(p,S){this._services.set(p,S)}getService(p){return this._services.get(p)}createInstance(p,...S){const m=(0,_.getServiceDependencies)(p).sort((o,c)=>o.index-c.index),u=[];for(const o of m){const c=this._services.get(o.id);if(!c)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${o.id}.`);u.push(c)}const t=m.length>0?m[0].index:S.length;if(S.length!==t)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${t+1} conflicts with ${S.length} static arguments`);return new p(...S,...u)}}},7866:function(L,i,n){var l=this&&this.__decorate||function(u,t,o,c){var r,a=arguments.length,g=a<3?t:c===null?c=Object.getOwnPropertyDescriptor(t,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,t,o,c);else for(var b=u.length-1;b>=0;b--)(r=u[b])&&(g=(a<3?r(g):a>3?r(t,o,g):r(t,o))||g);return a>3&&g&&Object.defineProperty(t,o,g),g},_=this&&this.__param||function(u,t){return function(o,c){t(o,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LogService=void 0;const f=n(844),p=n(2585),S={debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let m=class extends f.Disposable{constructor(u){super(),this._optionsService=u,this.logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let t=0;t<u.length;t++)typeof u[t]=="function"&&(u[t]=u[t]())}_log(u,t,o){this._evalLazyOptionalParams(o),u.call(console,"xterm.js: "+t,...o)}debug(u,...t){this.logLevel<=p.LogLevelEnum.DEBUG&&this._log(console.log,u,t)}info(u,...t){this.logLevel<=p.LogLevelEnum.INFO&&this._log(console.info,u,t)}warn(u,...t){this.logLevel<=p.LogLevelEnum.WARN&&this._log(console.warn,u,t)}error(u,...t){this.logLevel<=p.LogLevelEnum.ERROR&&this._log(console.error,u,t)}};m=l([_(0,p.IOptionsService)],m),i.LogService=m},7302:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const l=n(8460),_=n(6114),f=n(844);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:_.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends f.Disposable{constructor(u){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t=Object.assign({},i.DEFAULT_OPTIONS);for(const o in u)if(o in t)try{const c=u[o];t[o]=this._sanitizeAndValidateOption(o,c)}catch(c){console.error(c)}this.rawOptions=t,this.options=Object.assign({},t),this._setupOptions()}onSpecificOptionChange(u,t){return this.onOptionChange(o=>{o===u&&t(this.rawOptions[u])})}onMultipleOptionChange(u,t){return this.onOptionChange(o=>{u.indexOf(o)!==-1&&t()})}_setupOptions(){const u=o=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},t=(o,c)=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);c=this._sanitizeAndValidateOption(o,c),this.rawOptions[o]!==c&&(this.rawOptions[o]=c,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const c={get:u.bind(this,o),set:t.bind(this,o)};Object.defineProperty(this.options,o,c)}}_sanitizeAndValidateOption(u,t){switch(u){case"cursorStyle":if(t||(t=i.DEFAULT_OPTIONS[u]),!function(o){return o==="block"||o==="underline"||o==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${u}`);break;case"wordSeparator":t||(t=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=p.includes(t)?t:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${u} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${t}`);case"rows":case"cols":if(!t&&t!==0)throw new Error(`${u} must be numeric, value: ${t}`)}return t}}i.OptionsService=S},2660:function(L,i,n){var l=this&&this.__decorate||function(S,m,u,t){var o,c=arguments.length,r=c<3?m:t===null?t=Object.getOwnPropertyDescriptor(m,u):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(S,m,u,t);else for(var a=S.length-1;a>=0;a--)(o=S[a])&&(r=(c<3?o(r):c>3?o(m,u,r):o(m,u))||r);return c>3&&r&&Object.defineProperty(m,u,r),r},_=this&&this.__param||function(S,m){return function(u,t){m(u,t,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const f=n(2585);let p=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const m=this._bufferService.buffer;if(S.id===void 0){const a=m.addMarker(m.ybase+m.y),g={data:S,id:this._nextId++,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(g,a)),this._dataByLinkId.set(g.id,g),g.id}const u=S,t=this._getEntryIdKey(u),o=this._entriesWithId.get(t);if(o)return this.addLineToLink(o.id,m.ybase+m.y),o.id;const c=m.addMarker(m.ybase+m.y),r={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(r,c)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(S,m){const u=this._dataByLinkId.get(S);if(u&&u.lines.every(t=>t.line!==m)){const t=this._bufferService.buffer.addMarker(m);u.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(u,t))}}getLinkData(S){var m;return(m=this._dataByLinkId.get(S))===null||m===void 0?void 0:m.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,m){const u=S.lines.indexOf(m);u!==-1&&(S.lines.splice(u,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};p=l([_(0,f.IBufferService)],p),i.OscLinkService=p},8343:(L,i)=>{function n(l,_,f){_.di$target===_?_.di$dependencies.push({id:l,index:f}):(_.di$dependencies=[{id:l,index:f}],_.di$target=_)}Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(l){return l.di$dependencies||[]},i.createDecorator=function(l){if(i.serviceRegistry.has(l))return i.serviceRegistry.get(l);const _=function(f,p,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(_,f,S)};return _.toString=()=>l,i.serviceRegistry.set(l,_),_}},2585:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const l=n(8343);var _;i.IBufferService=(0,l.createDecorator)("BufferService"),i.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),i.ICoreService=(0,l.createDecorator)("CoreService"),i.ICharsetService=(0,l.createDecorator)("CharsetService"),i.IInstantiationService=(0,l.createDecorator)("InstantiationService"),(_=i.LogLevelEnum||(i.LogLevelEnum={}))[_.DEBUG=0]="DEBUG",_[_.INFO=1]="INFO",_[_.WARN=2]="WARN",_[_.ERROR=3]="ERROR",_[_.OFF=4]="OFF",i.ILogService=(0,l.createDecorator)("LogService"),i.IOptionsService=(0,l.createDecorator)("OptionsService"),i.IOscLinkService=(0,l.createDecorator)("OscLinkService"),i.IUnicodeService=(0,l.createDecorator)("UnicodeService"),i.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(L,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const l=n(8460),_=n(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;const f=new _.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let p=0;const S=f.length;for(let m=0;m<S;++m){let u=f.charCodeAt(m);if(55296<=u&&u<=56319){if(++m>=S)return p+this.wcwidth(u);const t=f.charCodeAt(m);56320<=t&&t<=57343?u=1024*(u-55296)+t-56320+65536:p+=this.wcwidth(t)}p+=this.wcwidth(u)}return p}}}},v={};function C(L){var i=v[L];if(i!==void 0)return i.exports;var n=v[L]={exports:{}};return d[L].call(n.exports,n,n.exports,C),n.exports}var w={};return(()=>{var L=w;Object.defineProperty(L,"__esModule",{value:!0}),L.Terminal=void 0;const i=C(3236),n=C(9042),l=C(7975),_=C(7090),f=C(5741),p=C(8285),S=["cols","rows"];L.Terminal=class{constructor(m){this._core=new i.Terminal(m),this._addonManager=new f.AddonManager,this._publicOptions=Object.assign({},this._core.options);const u=o=>this._core.options[o],t=(o,c)=>{this._checkReadonlyOptions(o),this._core.options[o]=c};for(const o in this._core.options){const c={get:u.bind(this,o),set:t.bind(this,o)};Object.defineProperty(this._publicOptions,o,c)}}_checkReadonlyOptions(m){if(S.includes(m))throw new Error(`Option "${m}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new p.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const m=this._core.coreService.decPrivateModes;let u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:m.applicationCursorKeys,applicationKeypadMode:m.applicationKeypad,bracketedPasteMode:m.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:m.origin,reverseWraparoundMode:m.reverseWraparound,sendFocusMode:m.sendFocus,wraparoundMode:m.wraparound}}get options(){return this._publicOptions}set options(m){for(const u in m)this._publicOptions[u]=m[u]}blur(){this._core.blur()}focus(){this._core.focus()}resize(m,u){this._verifyIntegers(m,u),this._core.resize(m,u)}open(m){this._core.open(m)}attachCustomKeyEventHandler(m){this._core.attachCustomKeyEventHandler(m)}registerLinkProvider(m){return this._core.registerLinkProvider(m)}registerCharacterJoiner(m){return this._checkProposedApi(),this._core.registerCharacterJoiner(m)}deregisterCharacterJoiner(m){this._checkProposedApi(),this._core.deregisterCharacterJoiner(m)}registerMarker(m=0){return this._verifyIntegers(m),this._core.addMarker(m)}registerDecoration(m){var u,t,o;return this._checkProposedApi(),this._verifyPositiveIntegers((u=m.x)!==null&&u!==void 0?u:0,(t=m.width)!==null&&t!==void 0?t:0,(o=m.height)!==null&&o!==void 0?o:0),this._core.registerDecoration(m)}hasSelection(){return this._core.hasSelection()}select(m,u,t){this._verifyIntegers(m,u,t),this._core.select(m,u,t)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(m,u){this._verifyIntegers(m,u),this._core.selectLines(m,u)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(m){this._verifyIntegers(m),this._core.scrollLines(m)}scrollPages(m){this._verifyIntegers(m),this._core.scrollPages(m)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(m){this._verifyIntegers(m),this._core.scrollToLine(m)}clear(){this._core.clear()}write(m,u){this._core.write(m,u)}writeln(m,u){this._core.write(m),this._core.write(`\r
`,u)}paste(m){this._core.paste(m)}refresh(m,u){this._verifyIntegers(m,u),this._core.refresh(m,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(m){return this._addonManager.loadAddon(this,m)}static get strings(){return n}_verifyIntegers(...m){for(const u of m)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...m){for(const u of m)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}})(),w})()})})(xr);var Ea=xr.exports,Ar={exports:{}};(function(e,s){(function(d,v){e.exports=v()})(self,function(){return(()=>{var d={};return(()=>{var v=d;Object.defineProperty(v,"__esModule",{value:!0}),v.FitAddon=void 0,v.FitAddon=class{constructor(){}activate(C){this._terminal=C}dispose(){}fit(){const C=this.proposeDimensions();if(!C||!this._terminal||isNaN(C.cols)||isNaN(C.rows))return;const w=this._terminal._core;this._terminal.rows===C.rows&&this._terminal.cols===C.cols||(w._renderService.clear(),this._terminal.resize(C.cols,C.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const C=this._terminal._core,w=C._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;const L=this._terminal.options.scrollback===0?0:C.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),l=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),f=n-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=l-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-L;return{cols:Math.max(2,Math.floor(p/w.css.cell.width)),rows:Math.max(1,Math.floor(f/w.css.cell.height))}}}})(),d})()})})(Ar);var La=Ar.exports;const xa=(e,s)=>{const d=e.__vccOpts||e;for(const[v,C]of s)d[v]=C;return d},Ra={id:"xterm-container"},Aa={__name:"App",setup(e){let s;return Xi(()=>{const d=document.querySelector("#xterm-container"),v=new Ea.Terminal({screenReaderMode:!0,scrollback:0}),C=new La.FitAddon;v.loadAddon(C),v.open(d),C.fit(),s=new WebSocket(`ws://${document.location.host}/api/log`),s.addEventListener("open",()=>{v.writeln(Hs.green("connected"))}),s.addEventListener("message",w=>{v.writeln(w.data)}),s.addEventListener("close",()=>{v.writeln(Hs.red("connection lose"))})}),Yi(()=>{s.close()}),(d,v)=>(wo(),xo("div",Ra))}},ka=xa(Aa,[["__scopeId","data-v-3e969e89"]]);da(ka).mount("#app");
